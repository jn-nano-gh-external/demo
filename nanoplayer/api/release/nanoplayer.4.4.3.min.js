!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),e.exports=n(1)},function(e,t,n){var i,r;i=[n(6),n(75),n(7),n(50),n(67),n(74),n(2),n(85),n(11),n(9),n(53)],r=function(e,t,n,i,r,a,o,s,u,d,c){"use strict";function l(t){s.validatePlayerDivId(t),this.version=e.NANOPLAYER,console.log("NanoPlayer api version: "+this.version),this.coreversion="",this.viewversion="",this.type="default",this.id=Math.round(1e11*Math.random()).toString(),this._playerDivId=t,this._core=null,this._view=null,this._metrics=null}var f=t.events,E=t.states,p=t.emptyConfig,h=t.validConfig,m=t.pauseReasons,_=t.errorCodes,T=t.capabilities,S=n.events,g=n.emptyConfig,y=n.validConfig,A=r.emptyConfig,v=r.validConfig,b=(i.emptyConfig,i.validConfig,l.prototype=Object.create(u.prototype));return b.setup=function(e){var n=c.copy(e);return new Promise(function(e,s){try{var u=c&&c.events&&c.events.onError?c.events.onError:null,d=function(e){e.code||(e.code=_.SETUP.EXCEPTION),e.message||(e.message="An unknown error occured during setup.");var t={name:"Error",data:{code:e.code,message:e.message},player:this._playerDivId,id:this.id,version:this.version,state:E.IDLE};u&&this.on(t.name,u),this.emit(t.name,t),this._initView(this._viewConfig),null!==this._view&&this._view.handleView(l.states.UNINITIALIZED),s(e)}.bind(this),c={};o.extend(n,c),this._bintuConfig=A.create(),this._coreConfig=p.create(),this._viewConfig=g.create(),o.merge(c,this._bintuConfig),o.clean(this._bintuConfig),o.merge(c,this._viewConfig),o.clean(this._viewConfig),this.destroy();var f={};o.extend(n,f),this._checkConfig(f),r.setup(c).then(function(n){try{n.metrics&&(this._metrics=new i,this._metrics.version=this.version,this._metrics.setup(n,this)),o.merge(n,this._viewConfig),o.merge(n,this._coreConfig),this._initView(this._viewConfig),this._core=new t(this._playerDivId),this._core.id=this.id,this._corePropagator=a.create(this._core,l.coreEvents,this),this._setPublicListeners(this._coreConfig.events,this),this._connectLayers(),this._core.setup(this._coreConfig).then(function(t){window.removeEventListener("unload",this.destroy.bind(this)),window.addEventListener("unload",this.destroy.bind(this)),this.coreversion=this._core.version,this.type=this._core.type,this._viewConfig.style&&this._viewConfig.style.view&&this._view.postSetup(),o.extend(this._bintuConfig,t),o.extend(this._viewConfig,t),o.clean(t),e(t)}.bind(this),function(e){null!==this._view&&this._view.handleView(l.states.UNINITIALIZED),s(e)}.bind(this))}catch(e){d(e)}}.bind(this),d)}catch(e){d(e)}}.bind(this))},b.destroy=function(){this._view&&this._view.destroy(),this._view=null,this._core&&this._core.destroy(),this._core=null,this._metrics&&this._metrics.destroy(),this._metrics=null},b._checkConfig=function(e){var t=[];if(e.source&&e.source.bintu){var n=o.check({source:{bintu:e.source.bintu}},v.create());t=t.concat(n)}if(e.style){var i=o.check({style:e.style},y.create());t=t.concat(i)}if(e.source){delete e.source.bintu,delete e.style,delete e.metrics;var r=o.check(e,h.create()).filter(function(e){return e.indexOf("valid")!==-1});t=t.concat(r)}if(t.length){var a=e&&e.events&&e.events.onWarning?e.events.onWarning:null;a&&this.on(f.WARNING,a),t.forEach(function(e){var t={name:f.WARNING,data:{message:e},player:this._playerDivId,id:this.id,version:this.version,state:E.IDLE};this.emit(t.name,t)}.bind(this))}},b._initView=function(e){!this._view&&this._viewConfig.style&&this._viewConfig.style.view&&(this._view=new n,this._view.version=this.version,this.viewversion=this._view.version,this._view.setBaseValues(this._playerDivId),this._view.baseSetup(e),this._viewPropagator=a.create(this._view,l.viewEvents,this))},b._setPublicListeners=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&"function"==typeof e[n]){var i=n.replace("on",""),r=e[n];t.on(i,r),delete e[n]}},b._connectLayers=function(){function e(e,t,n,i){for(var r in e)e.hasOwnProperty(r)&&t.indexOf(e[r])===-1&&n.on(e[r],i.bind(this))}var t=[l.coreEvents.MEDIA];e(l.coreEvents,t,this,this._onCoreEvent.bind(this)),e(l.viewEvents,[],this,this._onViewEvent.bind(this))},b._onCoreEvent=function(e){if(this._view){if(e.name===l.coreEvents.STATS)return void this._view.handleStats(e.data.stats);e.name===l.coreEvents.STATE_CHANGE&&this._view.update(e),e.name===l.coreEvents.STREAM_INFO&&this._view.handleStreamInfo(e),e.name===l.coreEvents.STREAM_INFO_UPDATE&&this._view.handleStreamInfoUpdate(e),e.name!==l.coreEvents.MUTE&&e.name!==l.coreEvents.UNMUTE||this._view.handleMute(e.name===l.coreEvents.MUTE),e.name===l.coreEvents.VOLUME_CHANGE&&this._view.handleVolume(e.data.volume),e.name===l.coreEvents.READY&&this._view.handleConfig(e.data.config),e.name===l.coreEvents.METADATA&&this._view.handleMetaData(e),e.name===l.coreEvents.UPDATE_SOURCE_SUCCESS&&this._view.handleUpdateSourceSuccess(e),e.name===l.coreEvents.SWITCH_STREAM_SUCCESS&&this._view.handleSwitchStreamSuccess(e)}},b._onViewEvent=function(e){e.name===l.viewEvents.PLAY?this._core.play():e.name===l.viewEvents.PAUSE&&this._core.pause(),e.name===l.viewEvents.MUTE?this._core.mute():e.name===l.viewEvents.UNMUTE&&this._core.unmute(),e.name===l.viewEvents.VOLUME_CHANGE&&this._core.setVolume(e.data.volume)},b._callMethod=function(){if(!this._core)throw new Error('"'+arguments[0]+'" must be implemented or player not initialized by call setup.');return this._core[arguments[0]].apply(this._core,Array.prototype.slice.call(arguments,1))},b.play=function(){this._callMethod("play")},b.pause=function(){this._callMethod("pause")},b.mute=function(){this._callMethod("mute")},b.unmute=function(){this._callMethod("unmute")},b.setVolume=function(e){this._callMethod("setVolume",e)},b.updateSource=function(e,t){return new Promise(function(n,i){r.updateSource(e,t).then(function(e){this._callMethod("updateSource",e.source,t).then(function(e){n(e)},function(e){i(e)})}.bind(this),function(e){var t={name:"Error",data:{code:e.code,message:e.message},player:this._playerDivId,id:this.id,version:this.version,state:E.IDLE};this.emit(t.name,t),i(e)}.bind(this))}.bind(this))},b.switchStream=function(e){return new Promise(function(t,n){this._callMethod("switchStream",e).then(function(e){t(e)},function(e){n(e)})}.bind(this))},b.setAdaption=function(e){this._callMethod("setAdaption",e)},l.states=E,l.coreEvents=f,l.viewEvents=S,l.pauseReasons=m,l.capabilities=T,window.NanoPlayer=l,l}.apply(t,i),/**
	 * @license
	 * nanoStream H5Live Player 4.4.3
	 * Build from Wed May 20 2020 14:27:44 GMT+0200 (GMT+02:00)
	 * Copyright (c) 2020 nanocosmos IT GmbH. All rights reserved.
	 * http://www.nanocosmos.de
	 * sales@nanocosmos.de
	 *
	 * LEGAL NOTICE:
	 * This material is subject to the terms and conditions defined in
	 * separate license conditions ('LICENSE.txt')
	 * All information contained herein is, and remains the property
	 * of nanocosmos GmbH and its suppliers if any. The intellectual and technical concepts
	 * contained herein are proprietary to nanocosmos GmbH, and are protected by trade secret
	 * or copyright law. Dissemination of this information or reproduction of this material
	 * is strictly forbidden unless prior written permission is obtained from nanocosmos.
	 * All modifications will remain property of nanocosmos.
	 */
!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(3),n(4),n(5)],r=function(e,t,n){function i(e,t){var n;for(n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&("object"!=typeof e[n]||!Object.keys(e[n]).length||"object"==typeof t[n]&&Object.keys(t[n]).length||Array.isArray(e[n])?"object"!=typeof e[n]||Array.isArray(e[n])?t[n]=e[n]:i(e[n],t[n]):r(e[n],t[n]))}function r(e,t){var n;for(n in e)e.hasOwnProperty(n)&&(!t[n]&&(t[n]={}),"object"!=typeof e[n]||Array.isArray(e[n])?t[n]=e[n]:r(e[n],t[n]))}function a(e){var t;for(t in e)e.hasOwnProperty(t)&&("undefined"==typeof e[t]||"string"==typeof e[t]&&0===e[t].length)&&delete e[t],e.hasOwnProperty(t)&&e[t]instanceof Object&&a(e[t]);for(t in e)(e.hasOwnProperty(t)&&("undefined"==typeof e[t]||"string"==typeof e[t]&&0===e[t].length)||"object"==typeof e[t]&&"function"!=typeof e[t]&&0===Object.keys(e[t]).length)&&delete e[t]}function o(e,t,n,i){n=n||"",i=i||[];var r;for(r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&("object"==typeof e[r]&&"object"==typeof t[r]?i=o(e[r],t[r],n+r+".",i):typeof e[r]!==t[r]&&"*"!==t[r]&&void 0!==e[r]&&""!==e[r]&&i.push("Configuration warning. The config property '$property$' must be of type '$type$'.".replace("$property$",n+r).replace("$type$",t[r]))),e.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&i.push("Configuration warning. The config property '$property$' is not a valid property. Please remove from config.".replace("$property$",n+r));return i}return{merge:i,clean:a,check:o,extend:r}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e,t){var n=new window.Error(e||"");return n.code=t||0,n}return e}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({CONFIG_RTMP:"Configuration error. Could not create player, the rtmp configuration is missing or incomplete. Add an rtmp url and streamname to the configuration.",CONFIG_TOKEN:"Configuration error. Could not create player, with this configuration an security token is required. Add an token to the configuration.",CONFIG_WSS:"Configuration error. Could not create player, the websocket server configuration is missing.",CONFIG_HLS:"Configuration error. Could not create player, the hls server configuration is missing.",CONFIG_METADATA:"Configuration error. Could not create player, the websocket server configuration for metadata is missing.",CONFIG_SOURCE:"The players source configuration is malformed or missing, please check documentation for more information or contact us."})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({PLAYER:{NO_RTMP_URL_SET:1001,NO_SERVER_SET:1002,NOT_CONFIGURED:1003,NOT_PLAYING:1004,INTERACTION_REQUIRED:1005,BUFFER_CONFIG_INVALID:1006,PLAYBACK_SUSPENDED:1007,PLAYBACK_ERROR:1008,VISIBILITY_HIDDEN:1009,INVALID_ENTRY_INDEX:1010},STREAM:{NOT_FOUND:2001,MEDIA_NOT_AVAILABLE:2002,NOT_ENOUGH_DATA:2003,SOURCE_STOPPED:2004,METADATA_STILL_PROCESSING:2014,METADATA_NO_START_INDEX:2013,METADATA_INVALID_JSON:2012,METADATA_WRONG_INDEX:2011},MEDIA:{ABORTED:3001,DOWNLOAD_ERROR:3002,DECODE_ERROR:3003,NOT_SUPPORTED:3004,MEDIA_SOURCE_ENDED:3100},NETWORK:{COULD_NOT_ESTABLISH_CONNECTION:4001,CONNECTION_ERROR:4002,MAX_RECONNECTS_REACHED:4003,RECONNECTION_CONFIG_INVALID:4004,SOURCE_STREAM_STOPPED:4005,SOURCE_TIMEOUT:4006},SETUP:{EXCEPTION:5001,CLIENT_NOT_SUPPORTED:5002,FORCE_NOT_SUPPORTED:5003,SOURCE_NOT_SUPPORTED:5004,CONFIG_RTMP:5005,CONFIG_TOKEN:5006,CONFIG_WSS:5007,CONFIG_HLS:5008,CONFIG_METADATA:5009,EMBED_PLAYER:5010}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return{NANOPLAYER:"4.4.3"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(9),n(2),n(10),n(11),n(12),n(14),n(15),n(16),n(17),n(18),n(19),n(8),n(20),n(21),n(22),n(23),n(24),n(25),n(30),n(35),n(37),n(42)],r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,E,p,h,m,_,T,S,g,y){"use strict";function A(){this.version=""}var v=(n.log,A.prototype=Object.create(i.prototype));return v.setBaseValues=function(e){console.log("NanoView api version: "+this.version),this.config=o.create(),this._playerDivId=e,this._emitter=new i,this._muted=!1,this._handleAutoplay=!1,this._isRestarting=!1,this.state=d.IDLE},v.baseSetup=function(e){t.merge(e,this.config),t.clean(this.config),this.config.style.view&&(this.registerExternalEventHandler(),this._style=_.create(this._emitter,this._playerDivId,this.config.style),this.config.style.audioPlayer||(this.config.style.fullScreenControl&&(this._fullscreen=g.create(this._playerDivId,this._emitter)),this._middleView=T.create(this._playerDivId),this._resizeListener=u.create(this._playerDivId,this._emitter))),this.config.style.controls&&(this._controls=y.create(this._playerDivId,this._emitter,this.config))},v.postSetup=function(){this.config.style.view&&this._style.update(),this.config.style.interactive&&!this.config.style.audioPlayer?(this._interactive=m.create(this._playerDivId,this._emitter),this._interactive.update(this.state)):this.config.style.controls&&this._controls.show(),this.registerInternalEventHandler()},v.registerExternalEventHandler=function(){for(var e in l)l.hasOwnProperty(e)&&this._emitter.on(l[e],this._emit.bind(this,l[e]))},v.registerInternalEventHandler=function(){if(this._interactive&&(this._emitter.on(E.PLAYBUTTON_SINGLE_CLICK,function(e){this.state!==d.READY&&this.state!==d.PAUSED?this._emitter.emit(l.PAUSE):this._emitter.emit(l.PLAY)}.bind(this)),this._emitter.on(E.AUDIO_SINGLE_CLICK,function(e){this._muted?this._emitter.emit(l.UNMUTE):this._emitter.emit(l.MUTE)}.bind(this)),this._emitter.on(E.PLAYER_SINGLE_CLICK,function(e){this._controls&&this._controls.appear()}.bind(this))),this._controls){var e=[p.FULLSCREEN_ENTER,p.FULLSCREEN_EXIT];for(var t in p)p.hasOwnProperty(t)&&l.hasOwnProperty(t)&&(e.indexOf(p[t])===-1?this._emitter.on(p[t],this._emitter.emit.bind(this._emitter,l[t])):this._fullscreen&&this._emitter.on(p[t],function(e){this._fullscreen&&this._fullscreen.change()}.bind(this)))}if(this._fullscreen)for(var t in f)f.hasOwnProperty(t)&&(this._emitter.on(f[t],function(e){this.handleFullscreen(e&&e===f.FULLSCREEN_ENTER)}.bind(this).bind(this,f[t])),this._emitter.on(f[t],this._emitter.emit.bind(this._emitter,l[t])));this._resizeListener&&(this._emitter.on(l.PLAYER_RESIZE,this._onPlayerResize.bind(this)),this._onPlayerResize(null))},v.removeExternalEventHandler=function(){if(this._emitter)for(var e in l)l.hasOwnProperty(e)&&this._emitter.removeAllListeners(l[e])},v.removeInternalEventHandler=function(){if(this._emitter){if(this._interactive&&(this._emitter.removeAllListeners(E.PLAYER_SINGLE_CLICK),this._emitter.removeAllListeners(E.PLAYBUTTON_SINGLE_CLICK),this._emitter.removeAllListeners(E.AUDIO_SINGLE_CLICK)),this._controls)for(var e in p)p.hasOwnProperty(e)&&l.hasOwnProperty(e)&&this._emitter.removeAllListeners(p[e]);if(this._fullscreen)for(var e in f)f.hasOwnProperty(e)&&this._emitter.removeAllListeners(f[e]);this._resizeListener&&this._emitter.removeAllListeners(l.PLAYER_RESIZE)}},v.destroy=function(){this.removeExternalEventHandler(),this.removeInternalEventHandler(),this._emitter=null,this._resizeListener&&this._resizeListener.destroy(),this._resizeListener=null,this._style&&this._style.destroy(),this._style=null,this._interactive&&this._interactive.destroy(),this._interactive=null,this._scaling&&this._scaling.destroy(),this._scaling=null,this._middleView&&this._middleView.destroy(),this._middleView=null,this._controls&&this._controls.destroy(),this._controls=null,this._fullscreen&&this._fullscreen.destroy(),this._fullscreen=null},v.update=function(e){this.state=e.state,this._emitter.emit(a.STATE_CHANGE,e),this.handleView(e.state),this._interactive&&this._interactive.update(e.state)},v.handleView=function(e){switch(this._viewTimeout&&clearTimeout(this._viewTimeout),e){case d.UNINITIALIZED:this._middleView&&this._middleView.update(h.ERROR);break;case d.IDLE:this._middleView&&this._middleView.update(h.NONE);break;case d.READY:this._middleView&&this._middleView.update(h.PLAYBUTTON),this._controls&&this._controls.play();break;case d.LOADING:this._middleView&&this._middleView.update(h.LOADING),this._controls&&this._controls.pause();break;case d.PLAYING:this.handleAudio(),this._controls&&this._controls.pause();break;case d.PAUSED:this._isRestarting||(this._middleView&&this._middleView.update(h.PLAYBUTTON),this._controls&&this._controls.play()),this._isRestarting=!1;break;case d.BUFFERING:this._viewTimeout=setTimeout(function(){this._middleView&&this._middleView.update(h.LOADING),this._controls&&this._controls.pause()}.bind(this),1e3);break;case d.UNKNOWN:this._middleView&&this._middleView.update(h.NONE);break;case d.PLAYBACK_RESTARTING:this._isRestarting=!0,this._middleView&&this._middleView.update(h.NONE)}this.state=e},v.handleConfig=function(e){this._handleAutoplay=e.playback.autoplay},v.handleStreamInfo=function(e){this._emitter.emit(a.STREAM_INFO,e),this.progressStreamInfo(e)},v.handleStreamInfoUpdate=function(e){this._emitter.emit(a.STREAM_INFO_UPDATE,e),this.progressStreamInfo(e)},v.progressStreamInfo=function(e){this.streamInfo=e.data.streamInfo,this._scaling&&this._scaling.destroy()&&(this._scaling=null),this.streamInfo.haveVideo&&(this._scaling=S.create(this._playerDivId,this.streamInfo.videoInfo,this.config.style.scaling))},v.handleAudio=function(){var e=this.state===d.PLAYING,t=this.streamInfo&&this.streamInfo.haveAudio;e&&!this._muted&&t&&(this._handleAutoplay=!1);var n=this.config.style.displayMutedAutoplay&&this._muted&&this._handleAutoplay,i=this.config.style.displayAudioOnly&&this.streamInfo&&!this.streamInfo.haveVideo;e&&(t&&n||i?this._middleView&&this._middleView.update(h.AUDIO,this._muted):this._middleView&&this._middleView.update(h.NONE))},v.handleMute=function(e){this._controls&&(e?this._controls.mute():this._controls.unmute()),this._muted=e,this.handleAudio()},v.handleVolume=function(e){this._controls&&this._controls.volume(e)},v.handleFullscreen=function(e){this._controls&&this._controls.fullscreen(e)},v.handleStats=function(e){this._controls&&this._controls.time(e.currentTime)},v.handleMetaData=function(e){if("object"==typeof e.data.message&&e.data.message.hasOwnProperty("nanoStreamStatus")){var t="object"==typeof e.data.message.nanoStreamStatus&&e.data.message.nanoStreamStatus.hasOwnProperty("VideoRotation")?e.data.message.nanoStreamStatus.VideoRotation:0;this._scaling&&this._scaling.update(this.config.style.scaling,t)}},v.handleUpdateSourceSuccess=function(e){this._style&&this._style.update(),this._interactive&&this._interactive.update()},v.handleSwitchStreamSuccess=function(e){this._style&&this._style.update(),this._interactive&&this._interactive.update()},v._emit=function(e,t){var n={};t&&t.name&&t.data?n=t:t?(n.data=t,n.name=e||"unknown"):(n.data={},n.name=e||"unknown"),n.player=this._playerDivId,n.state=this.state,this.emit(n.name,n)},v._onPlayerResize=function(e){this.handleView(this.state),this._scaling&&this._scaling.update(),this._controls&&this._controls.size()},A.events=l,A.emptyConfig=o,A.validConfig=s,A}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({PAUSE:"ClickPause",PLAY:"ClickPlay",FULLSCREEN_ENTER:"ClickFullscreenEnter",FULLSCREEN_EXIT:"ClickFullscreenExit",PLAYER_RESIZE:"PlayerResize",MUTE:"ClickMute",UNMUTE:"ClickUnmute",VOLUME_CHANGE:"ClickVolumeChange"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";var e="Unknown",t="";if(screen.width){var n=screen.width?screen.width:"",i=screen.height?screen.height:"";t+=""+n+" x "+i}var r,a,o,s=navigator.appVersion,u=navigator.userAgent,d=navigator.appName,c=""+parseFloat(navigator.appVersion),l=parseInt(navigator.appVersion,10),f=e,E=navigator.plugins;if((a=u.indexOf("Opera"))!==-1&&(d="Opera",c=u.substring(a+6),(a=u.indexOf("Version"))!==-1&&(c=u.substring(a+8)),f="Chromium"),(a=u.indexOf("SamsungBrowser"))!==-1)d="Samsung Browser",c=u.substring(a+15),f="Chromium";else if((a=u.indexOf("Edg/"))!==-1)d="Microsoft Edge Chromium",c=u.substring(a+4),f="Chromium";else if((a=u.indexOf("UCBrowser"))!==-1)d="UC Browser",c=u.substring(a+10),f="Blink";else if((a=u.indexOf("YaBrowser"))!==-1)d="Yandex Browser",c=u.substring(a+10),f="Blink";else if((a=u.indexOf("QIHU 360EE"))!==-1||(a=u.indexOf("360Browser"))!==-1)d="Qihoo 360 Browser",c="0",f="Blink";else if((a=u.indexOf("Iron"))!==-1)d="Iron Browser",c=u.substring(a+5),f="Chromium";else if((a=u.indexOf("Vivaldi"))!==-1)d="Vivaldi Browser",c=u.substring(a+8),f="Chromium";else if((a=u.indexOf("OPR/"))!==-1)d="Opera",c=u.substring(a+4),f="Chromium";else if((a=u.indexOf("MSIE"))!==-1)d="Microsoft Internet Explorer",c=u.substring(a+5),f="Trident";else if("Netscape"===d&&(a=u.indexOf("Trident/"))!==-1)d="Microsoft Internet Explorer",c=u.substring(a+8),(a=u.indexOf("rv:"))!==-1&&(c=u.substring(a+3)),f="Trident";else if("Netscape"===d&&(a=u.indexOf("Edge/"))!==-1)d="Microsoft Edge Trident",c=u.substring(a+5),f="Trident";else if((a=u.indexOf("Chrome"))!==-1){var p=["Chromium PDF Viewer","Native Client","Chromium PDF Plugin"];d="Chrome";for(var h=0;h<E.length;h++){p.includes(E[h].name)&&(d="Chromium");break}c=u.substring(a+7),f="Chromium"}else(a=u.indexOf("PhantomJS"))!==-1?(d="PhantomJS",c=u.substring(a+10),f="Webkit"):(a=u.indexOf("Safari"))!==-1?(d="Safari",c=u.substring(a+7),(a=u.indexOf("Version"))!==-1&&(c=u.substring(a+8)),u.indexOf("CriOS")!==-1&&(d="Chrome"),f="Webkit"):(a=u.indexOf("Firefox"))!==-1?(d="Firefox",c=u.substring(a+8),f="Firefox"):(r=u.lastIndexOf(" ")+1)<(a=u.lastIndexOf("/"))&&(d=u.substring(r,a),c=u.substring(a+1),d.toLowerCase()===d.toUpperCase()&&(d=navigator.appName));(o=c.indexOf(";"))!==-1&&(c=c.substring(0,o)),(o=c.indexOf(" "))!==-1&&(c=c.substring(0,o)),(o=c.indexOf(")"))!==-1&&(c=c.substring(0,o)),l=parseInt(""+c,10),isNaN(l)&&(c=""+parseFloat(navigator.appVersion),l=parseInt(navigator.appVersion,10));var m=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(s),_=!!navigator.cookieEnabled;"undefined"!=typeof navigator.cookieEnabled||_||(document.cookie="testcookie",_=document.cookie.indexOf("testcookie")!==-1);var T=e,S=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 10",r:/(Windows 10|Windows NT 10.0)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var g in S){var y=S[g];if(y.r.test(u)){T=y.s;break}}var A=e;switch(/Windows/.test(T)&&(/Windows (.*)/.exec(T)&&(A=/Windows (.*)/.exec(T)[1]),T="Windows"),T){case"Mac OS X":/Mac OS X (10[._\d]+)/.exec(u)&&(A=/Mac OS X (10[._\d]+)/.exec(u)[1]);break;case"Android":/Android ([._\d]+)/.exec(u)&&(A=/Android ([._\d]+)/.exec(u)[1]);break;case"iOS":A=/OS (\d+)_(\d+)_?(\d+)?/.exec(s),A=A?A[1]+"."+A[2]+"."+(0|A[3]):e}var v={screen:t,browser:d,browserVersion:c,mobile:m,os:T,osVersion:A,cookies:_,browserEngine:f};return v}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e=function(){function e(){var e=isNaN(n("debug"))?0:+n("debug"),i=+t("nanoDebug");return Math.max(e,i)}function t(e){return document.cookie.indexOf(e+"=")!==-1?document.cookie.split(e+"=")[1].split(";")[0]:null}function n(e){if(!o){o=[];var t=document.location.search.substr(1,document.location.search.length);if(""===t&&document.location.href.indexOf("?")!==-1){var n=document.location.href.indexOf("?")+1;t=document.location.href.slice(n)}if(""!==t)for(var i=t.split("&"),r=0;r<i.length;++r){var a="",s=i[r].split("="),u=s[0];s.length>1&&(a=s[1]),o[decodeURIComponent(u)]=decodeURIComponent(a)}}try{return o[e]}catch(e){return}}function i(e){return a>=e}function r(){return(new Date).toISOString()}var a=e(),o=void 0;setInterval(function(){a=e()},5e3);var s=function(e,t){try{a>=t&&console.debug(r()+": "+e)}catch(e){}};return{log:s,getHTTPParam:n,enabled:i}}();return e}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var i=e.prototype;return i.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp){t={};for(n in i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n])}else t=i[e]||(i[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},i.addListener=function(e,n){var i,r=this.getListenersAsObject(e),a="object"==typeof n;for(i in r)r.hasOwnProperty(i)&&t(r[i],n)===-1&&r[i].push(a?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,n){var i,r,a=this.getListenersAsObject(e);for(r in a)a.hasOwnProperty(r)&&(i=t(a[r],n),i!==-1&&a[r].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var i,r,a=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)a.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?a.call(this,i,r):o.call(this,i,r));return this},i.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(e,t){var n,i,r,a,o,s=this.getListenersAsObject(e);for(a in s)if(s.hasOwnProperty(a))for(n=s[a].slice(0),r=n.length;r--;)i=n[r],i.once===!0&&this.removeListener(e,i.listener),o=i.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},i.trigger=n("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return t.length?t.length&&"object"!=typeof t[0]?t[0]={name:e,data:t[0]}:t.length&&!t[0].hasOwnProperty("data")?t[0]={name:e,data:t[0]}:t[0].name=e:t.push({name:e,data:{}}),this.emitEvent(e,t)},i.emitSimple=function(e,t,n){return this.emitEvent(e,[{name:e||"AnonymousEvent",target:n||this,data:t||{}}])},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},e}.apply(t,i),/*!
	 * EventEmitter v4.2.11 - git.io/ee
	 * Unlicense - http://unlicense.org/
	 * Oliver Caldwell - http://oli.me.uk/
	 * @preserve
	 */
!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(9),n(13)],r=function(e,t){var n=t.create("Conditions"),i=e.os,r=e.osVersion,a=e.browser,o=parseInt(e.browserVersion.split(".")[0],10),s=e.browserEngine,u="Microsoft Edge Trident"===a,d="Microsoft Internet Explorer"===a||u,c="Chromium"===s&&o>57,l="iOS"===i,f=l&&o>=11,E="Mac OS X"===i,p="Firefox"===a,h="Safari"===a,m=h&&12.1===parseFloat(e.browserVersion)&&"iOS"!==i,_=l&&parseInt(r)>=10,T=m,S="iOS"!==i&&!!window.MediaSource&&(p&&o>=48||u||window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),g=function(){var e=!1;try{("Chrome"===a||"Chromium"===a)&&o<54?e=!0:"Firefox"===a&&o<48?e=!0:"Microsoft Internet Explorer"===a&&(o<11||11===o&&7===parseInt(r))?e=!0:"Safari"===a&&o<10&&(e=!0)}catch(e){}return e}();!_&&!S&&E&&h&&o>=10&&(_=!0);var y={mustUseHLS:_,canUseHLS:T,isTridentBrowser:d,useFakeAudio:c,hasMediaSource:S,isIOS:l,isIOS11:f,isFirefox:p,isSafari:h,isSafari121MacOSX:m,isH5LiveKnownUnsupported:g};for(var A in y)y.hasOwnProperty(A)&&n.debug(A+": "+y[A]);return y}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(10)],r=function(e){function t(t,n,i){e.log("["+n+"] "+i,t)}function n(t){return e.enabled(t)}function i(e){return{debug:t.bind(this,s,e),info:t.bind(this,o,e),warn:t.bind(this,a,e),error:t.bind(this,r,e),detail:t.bind(this,u,e),debugEnabled:n.bind(this,s),infoEnabled:n.bind(this,o),warnEnabled:n.bind(this,a),errorEnabled:n.bind(this,r),detailEnabled:n.bind(this,u)}}var r=0,a=1,o=2,s=3,u=4;return{create:i}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({READY:"Ready",ERROR:"Error",PAUSE:"Pause",LOADING:"Loading",START_BUFFERING:"StartBuffering",STOP_BUFFERING:"StopBuffering",PLAY:"Play",METADATA:"MetaData",STATS:"Stats",PLAYBACK_FINISHED:"PlaybackFinished",MEDIA:"Media",STREAM_INFO:"StreamInfo",STREAM_INFO_UPDATE:"StreamInfoUpdate",MUTE:"Mute",UNMUTE:"Unmute",VOLUME_CHANGE:"VolumeChange",STATE_CHANGE:"StateChange",WARNING:"Warning",DESTROY:"Destroy",UPDATE_SOURCE_INIT:"UpdateSourceInit",UPDATE_SOURCE_SUCCESS:"UpdateSourceSuccess",UPDATE_SOURCE_FAIL:"UpdateSourceFail",UPDATE_SOURCE_ABORT:"UpdateSourceAbort",SWITCH_STREAM_INIT:"SwitchStreamInit",SWITCH_STREAM_SUCCESS:"SwitchStreamSuccess",SWITCH_STREAM_FAIL:"SwitchStreamFail",SWITCH_STREAM_ABORT:"SwitchStreamAbort"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){return{style:{width:void 0,height:void 0,aspectratio:void 0,controls:!0,interactive:!0,view:!0,scaling:"letterbox",keepFrame:!0,displayAudioOnly:!0,audioPlayer:!1,displayMutedAutoplay:!0,backgroundColor:"black",fullScreenControl:!0}}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){return{style:{width:"string",height:"string",aspectratio:"string",controls:"boolean",interactive:"boolean",view:"boolean",scaling:"string",keepFrame:"boolean",displayAudioOnly:"boolean",audioPlayer:"boolean",displayMutedAutoplay:"boolean",backgroundColor:"string",fullScreenControl:"boolean"}}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(8)],r=function(e){"use strict";function t(t,n){function i(){!a||a.clientWidth===o&&a.clientHeight===s||(o=a.clientWidth,s=a.clientHeight,d.emit(e.PLAYER_RESIZE,{width:o,height:s,aspectratio:o/s}))}function r(){return u&&clearInterval(u),u=0,a=null,null}var a=document.getElementById(t),o=a.clientWidth,s=a.clientHeight,u=0,d=n;return u=setInterval(i,100),{destroy:r}}return{create:t}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({UNINITIALIZED:1,IDLE:2,READY:3,LOADING:4,PLAYING:5,PAUSED:6,BUFFERING:7,UNKNOWN:8,PLAYBACK_NOT_STARTED:9,PLAYBACK_SUSPENDED:10,PAUSING:11,PLAYBACK_ERROR:12,RECONNECTION_IMMINENT:13,CONNECTION_ERROR:14,DESTROYING:15,PLAYBACK_RESTARTING:16})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({CLICK:"click",DOUBLE_CLICK:"dblclick",TOUCH_START:"touchstart",TOUCH_END:"touchend",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_MOVE:"mousemove"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({FULLSCREEN_ENTER:"FullscreenEnter",FULLSCREEN_EXIT:"FullscreenExit"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({PLAYER_SINGLE_CLICK:"PlayerSingleClick",PLAYER_DOUBLE_CLICK:"PlayerDoubleClick",PLAYBUTTON_SINGLE_CLICK:"PlaybuttonSingleClick",AUDIO_SINGLE_CLICK:"AudioSingleClick"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({PLAY:"ControlsPlay",PAUSE:"ControlsPause",MUTE:"ControlsMute",UNMUTE:"ControlsUnmute",VOLUME_CHANGE:"ControlsVolumeChange",FULLSCREEN_ENTER:"ControlsFullscreenEnter",FULLSCREEN_EXIT:"ControlsFullscreenExit"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({NONE:"none",LOADING:"loading",PLAYBUTTON:"playbutton",ERROR:"error",AUDIO:"audio"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(9),n(12),n(21),n(8),n(19),n(18)],r=function(e,t,n,i,r,a){"use strict";function o(e,i){function a(){if(f)if(f.addEventListener(r.CLICK,u),t.isIOS11||!t.isIOS&&t.mustUseHLS)for(var e,n,i=f.querySelectorAll("iframe"),n=0;n<i.length;n+=1)e=i[n].contentDocument.body.firstChild,e.addEventListener(r.CLICK,u),e.addEventListener("contextmenu",d);else for(var e,n,a=f.querySelectorAll("video"),n=0;n<a.length;n+=1)e=a[n],e.addEventListener(r.CLICK,u),e.addEventListener("contextmenu",d)}function o(){if(f)if(f.removeEventListener(r.CLICK,u),t.isIOS11||!t.isIOS&&t.mustUseHLS)for(var e,n,i=f.querySelectorAll("iframe"),n=0;n<i.length;n+=1)e=i[n].contentDocument.body.firstChild,e.removeEventListener(r.CLICK,u),e.removeEventListener("contextmenu",d);else for(var e,n,a=f.querySelectorAll("video"),n=0;n<a.length;n+=1)e=a[n],e.removeEventListener(r.CLICK,u),e.removeEventListener("contextmenu",d)}function s(t){t&&(l=t);var n=document.getElementById("middleView-"+e);n&&n.firstChild&&n.firstChild.addEventListener(r.CLICK,u),o(),setTimeout(a,200)}function u(e){e.preventDefault(),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.target.id&&e.target.id.indexOf("controls-")!==-1||e.button&&0!==e.button||E.touchInProgress||(E.touchInProgress=!0,e.target.id&&e.target.id.indexOf("playButton-")!==-1?i.emit(n.PLAYBUTTON_SINGLE_CLICK):e.target.id&&e.target.id.indexOf("audio-")!==-1?i.emit(n.AUDIO_SINGLE_CLICK):i.emit(n.PLAYER_SINGLE_CLICK),E.timeout=setTimeout(function(){E.touchInProgress=!1,clearTimeout(E.timeout),E.timeout=0},300))}function d(e){return e.preventDefault(),!1}function c(){return o(),E.timeout&&clearTimeout(E.timeout),E.timeout=0,f=null,null}var l,f=document.getElementById(e),E={timeout:0,touchInProgress:!1};return{update:s,destroy:c}}return{create:o}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(9),n(12),n(26),n(14),n(27),n(28)],r=function(e,t,n,i,r,a){"use strict";function o(o,s,u){function d(t){p=document.getElementById(s);var n,i,r,a,o,u=["width","height"],d=0;"auto"!==t.width&&"auto"!==t.height?t.audioPlayer?t.width&&t.height?(p.style.width=t.width,p.style.height=t.height):t.width?(p.style.width=t.width,p.style.height=Math.round(e.mobile?100/6:100/12)/100*p.clientWidth+"px"):p.clientWidth||p.clientHeight?p.clientWidth&&(p.style.height=Math.round(e.mobile?100/6:100/12)/100*p.clientWidth+"px"):(p.style.width="640px",p.style.height=Math.round(e.mobile?100/6:100/12)/100*p.clientWidth+"px"):t.width&&t.height?(p.style.width=t.width,p.style.height=t.height):(t.width||t.height)&&t.aspectratio?(d=+!!t.height,r=t[u[d]].indexOf("%")!==-1,a=t[u[d]].indexOf("px")!==-1,p.style[u[d]]=t[u[d]],o=t.aspectratio.split("/"),o[0]=parseInt(o[0]),o[1]=parseInt(o[1]),(r||a)&&(n=parseInt(t[u[d]].replace(r?"%":"px","")),i=Math.round(n*o[+!d]/o[d]).toString()+(r?"%":"px"),p.style[u[+!d]]=i)):(t.width||t.height)&&(t.width||t.aspectratio)&&(t.aspectratio||t.height)||p.clientWidth&&p.clientHeight||(p.style.width="640px",p.style.height="360px"):p.clientWidth||p.clientHeight?p.clientWidth||"auto"!==t.width?p.clientHeight||(t.aspectratio&&!t.audioPlayer?(o=t.aspectratio.split("/"),o[0]=parseInt(o[0]),o[1]=parseInt(o[1]),p.style.height=Math.round(p.clientWidth/o[0]*o[1]).toString()+"px"):p.style.height=t.audioPlayer?Math.round(e.mobile?100/6:100/12)/100*p.clientWidth+"px":Math.round(p.clientWidth/16*9).toString()+"px"):t.aspectratio?(o=t.aspectratio.split("/"),o[0]=parseInt(o[0]),o[1]=parseInt(o[1]),p.style.width=Math.round(p.clientHeight*o[0]/o[1]).toString()+"px"):p.style.width=Math.round(16*p.clientHeight/9).toString()+"px":(p.style.width="640px",p.style.height=t.audioPlayer?Math.round(e.mobile?100/6:100/12)/100*p.clientWidth+"px":"360px"),p.style.overflow="hidden",p.style.position="relative",p.style.backgroundColor=t.audioPlayer?"transparent":t.backgroundColor?t.backgroundColor:"black"}function c(){for(T||(a.add({target:o,listeners:_}),T=!0);m.length;)m.pop();if(t.isIOS11||!t.isIOS&&t.mustUseHLS)for(var e,i=p.querySelectorAll("iframe"),e=0;e<i.length;e+=1)m.push(i[e].contentDocument.body.firstChild);else for(var e,r=p.querySelectorAll("video"),e=0;e<r.length;e+=1)m.push(r[e]);for(var e=0;e<m.length;e+=1){var s=m[e];s.style.width="100%",s.style.height="100%",s.style.position="absolute",s.style.left="50%",s.style.top="50%",s.style.marginRight="-50%",s.style.backgroundColor=u.audioPlayer?"transparent":u.backgroundColor?u.backgroundColor:"black",n.normalize(s,"transform","translate(-50%, -50%)")}}function l(){for(a.remove({target:o,listeners:_}),p=null;m.length;)m.pop();return null}function f(e){h=e.state;for(var t=0;t<m.length;t+=1){var n=m[t];u.audioPlayer?n.style.visibility="hidden":h==r.READY?!u.keepFrame&&(n.style.visibility="hidden"):h==r.PAUSED?!u.keepFrame&&(n.style.visibility="hidden"):h==r.PLAYING&&!u.keepFrame&&(n.style.visibility="visible")}}function E(e){for(var t=0;t<m.length;t+=1){var n=m[t];u.audioPlayer&&(n.style.visibility="hidden")}}var p,h,m=[],_=[{type:i.STATE_CHANGE,listener:f},{type:i.STREAM_INFO,listener:E}],T=!1;return d(u),{update:c,destroy:l}}return{create:o}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e,n,i){for(var r=t(n),a="",o=0;o<r.length;o+=1)if(a=r[o],a in e.style){e.style[a]=i;break}}function t(e){var t=e.length-1,n=e.substr(0,1).toUpperCase()+e.substr(1,t);return["webkit"+n,"moz"+n,"ms"+n,e]}return{normalize:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({UNINITIALIZED:1,IDLE:2,READY:3,LOADING:4,PLAYING:5,PAUSED:6,BUFFERING:7,UNKNOWN:8,PLAYBACK_NOT_STARTED:9,PLAYBACK_SUSPENDED:10,PAUSING:11,PLAYBACK_ERROR:12,RECONNECTION_IMMINENT:13,CONNECTION_ERROR:14,DESTROYING:15,PLAYBACK_RESTARTING:16,VISIBILITY_HIDDEN:17,NOT_ENOUGH_DATA:18,SOURCE_STREAM_STOPPED:19})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(29)],r=function(e){"use strict";function t(t){if(!t.target)throw new Error(e.NO_TARGET);if(!t.listeners||!t.listeners.length)throw new Error(e.NO_LISTENERS);if(!n(t.target,a)||!n(t.target,o))throw new Error(e.NOT_DISPATCHER);for(var i=0;i<t.listeners.length;++i)if(!t.listeners[i].type&&"string"!=typeof t.listeners[i].type||0!==t.listeners[i].type.length){if(!t.listeners[i].type)throw new Error(e.MISSING_TYPE.replace("%index%",i));if("function"!=typeof t.listeners[i].listener)throw new Error(e.MISSING_LISTENER.replace("%index%",i))}else t.listeners.splice(i,1),i--}function n(e,t){for(var n=0;n<t.length;++n)if("function"==typeof e[t[n]])return e[t[n]];return null}function i(e,i){t(i),r(n(i.target,e),i.target,i.listeners)}function r(e,t,n){for(var i=0;i<n.length;++i)e.call(t,n[i].type,n[i].listener)}var a=["addEventListener","addListener","on"],o=["removeEventListener","removeListener","off"];return{add:i.bind(null,a),remove:i.bind(null,o)}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({NO_TARGET:"No target in config",NO_LISTENERS:"No listeners in config",NOT_DISPATCHER:"Target is not an event dispatcher",MISSING_TYPE:"Missing type in listener #%index%",MISSING_LISTENER:"Missing/invalid listener in listener #%index%"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(26),n(23),n(31),n(32),n(33),n(34)],r=function(e,t,n,i,r,a){"use strict";function o(o){function s(){if(!document.getElementById(h)){var t=d();m.id=h,m.style.width=t.width+"px",m.style.height=t.height+"px",m.style.position="absolute",m.style.left="50%",m.style.top="50%",m.style.marginRight="-50%",e.normalize(m,"transform","translate(-50%, -50%)"),m.style.zIndex=1e3,p.appendChild(m)}}function u(){m&&m.parentElement===p&&p.removeChild(m)}function d(){var e=document.getElementById(o),t=.2,n=Math.round(Math.min(e.clientWidth,e.clientHeight)*t);return{width:n,height:n}}function c(e,n){E&&E.destroy&&(E.destroy(),E=null),e&&e!==t.NONE?(s(),E=f[e].create(o,m,d,n)):u()}function l(){return E&&E.destroy&&(E.destroy(),E=null),u(),m=null,p=null,null}var f={loading:n,playbutton:i,error:r,audio:a},E=null,p=document.getElementById(o),h="middleView-"+o,m=document.createElement("div");return{update:c,destroy:l}}return{create:o}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";function e(e,t,n){function i(){var e=n();for((t.style.width=e.width+"px")&&(a.width=t.clientWidth),(t.style.height=e.height+"px")&&(a.height=t.clientHeight),o.xCenter=a.width/2,o.yCenter=a.height/2,o.radius=a.width/3,o.startSize=o.radius/3,o.num++,o.ctx.clearRect(0,0,2*o.xCenter,2*o.yCenter),o.i=0;o.i<9;o.i++)o.ctx.beginPath(),o.ctx.fillStyle="rgba(255,255,255,"+.1*o.i+")",o.angle=o.pi*o.i*.25,o.posX[o.i]=o.xCenter+o.radius*Math.cos(o.angle),o.posY[o.i]=o.yCenter+o.radius*Math.sin(o.angle),o.ctx.arc(o.posX[(o.i+o.num)%8],o.posY[(o.i+o.num)%8],o.startSize/9*o.i,0,2*o.pi,1),o.ctx.fill()}function r(){return o.interval&&clearInterval(o.interval),o.interval=0,o.ctx&&o.ctx.clearRect(0,0,a.width,a.height),a.parentElement===t&&t.removeChild(a),a=null,null}var a=document.createElement("canvas"),o={id:"loadingSign-"+e,interval:setInterval(i,100),ctx:a.getContext("2d"),pi:Math.PI,xCenter:void 0,yCenter:void 0,radius:void 0,startSize:void 0,num:5,posX:[],posY:[],angle:void 0,size:void 0,i:void 0};return a.id=o.id,a.style.zIndex=1001,t.appendChild(a),{destroy:r}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";function e(e,t,n){function i(){var e=n();(t.style.width=e.width+"px")&&(a.width=t.clientWidth),(t.style.height=e.height+"px")&&(a.height=t.clientHeight);var i=a.width;o.ctx.beginPath(),o.ctx.fillStyle="transparent",o.ctx.arc(.5*i,.5*i,.45*i,0,2*Math.PI),o.ctx.fill(),o.ctx.lineWidth=.05*i,o.ctx.strokeStyle="rgba(255,255,255,0.7)",o.ctx.stroke(),o.ctx.fillStyle="rgba(255,255,255,0.7)",o.ctx.beginPath(),o.ctx.moveTo(.35*i,.25*i),o.ctx.lineTo(.35*i,.75*i),o.ctx.lineTo(.75*i,.5*i),o.ctx.fill()}function r(){return o.ctx&&o.ctx.clearRect(0,0,a.width,a.height),a.parentElement===t&&t.removeChild(a),a=null,null}var a=document.createElement("canvas"),o={id:"playButton-"+e,ctx:a.getContext("2d")};return a.id=o.id,a.style.zIndex=1001,t.appendChild(a),i(),{destroy:r}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";function e(e,t,n){function i(){var e=n();(t.style.width=e.width+"px")&&(a.width=t.clientWidth),(t.style.height=e.height+"px")&&(a.height=t.clientHeight);var i=a.width,r=.8*i,s=.7*i,u=.1*i,d="#ffc821",c="#faf100",l="#dcaa09",f=.05*i;o.ctx.beginPath(),o.ctx.moveTo(u+r/2,u),o.ctx.lineTo(u+r,s+u),o.ctx.lineTo(u,s+u),o.ctx.closePath();var E=o.ctx.createLinearGradient(0,0,0,s);E.addColorStop(0,d),E.addColorStop(1,c),o.ctx.lineWidth=2*f,o.ctx.lineJoin="round",o.ctx.strokeStyle=E,o.ctx.stroke(),o.ctx.fillStyle=E,o.ctx.fill(),E=o.ctx.createLinearGradient(0,u,0,u+s),E.addColorStop(0,"transparent"),E.addColorStop(.5,"transparent"),E.addColorStop(.5,l),E.addColorStop(1,c),o.ctx.fillStyle=E,o.ctx.fill(),o.ctx.lineWidth=f,o.ctx.lineJoin="round",o.ctx.strokeStyle="#333",o.ctx.stroke(),o.ctx.textAlign="center",o.ctx.textBaseline="middle",o.ctx.font="bold "+Math.round(s/1.3)+'px "Times New Roman", Times, serif',o.ctx.fillStyle="#333";try{o.ctx.fillText("!",u+r/2,u+s/1.7)}catch(e){}}function r(){return o.ctx&&o.ctx.clearRect(0,0,a.width,a.height),a.parentElement===t&&t.removeChild(a),a=null,null}var a=document.createElement("canvas"),o={id:"exclamationSign-"+e,ctx:a.getContext("2d")};return a.id=o.id,a.style.zIndex=1001,t.appendChild(a),i(),{destroy:r}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";function e(e,t,n,i){function r(){var e=n();(t.style.width=e.width+"px")&&(f.width=t.clientWidth),(t.style.height=e.height+"px")&&(f.height=t.clientHeight);var r=p.ctx,o=f.width,h={l175:a(.175*o),l20:a(.2*o),l30:a(.3*o),l37:a(.37*o),l50:a(.5*o),l63:a(.63*o),l825:a(.825*o)};r.beginPath(),r.fillStyle="rgba(255,255,255,1)",r.strokeStyle="rgba(255,255,255,1)",r.lineJoin="round",r.moveTo(h.l20,h.l37),r.lineTo(h.l20,h.l63),r.lineTo(h.l30,h.l63),r.lineTo(h.l50,h.l825),r.lineTo(h.l50,h.l175),r.lineTo(h.l30,h.l37),r.fill(),r.lineWidth=a(.1*o),r.lineCap="round",i&&(r.strokeStyle="rgba(255,255,255,0.2)"),s=u=f.width/2,d=.3*o,c=1.6*Math.PI,l=.4*Math.PI,r.beginPath(),r.arc(s,u,d,c,l,E),r.stroke(),d=.15*o,c=1.7*Math.PI,l=.3*Math.PI,r.beginPath(),r.arc(s,u,d,c,l,E),r.stroke()}function a(e){return Math.round(e)}function o(){return p.ctx&&p.ctx.clearRect(0,0,f.width,f.height),f.parentElement===t&&t.removeChild(f),f=null,null}var s,u,d,c,l,f=document.createElement("canvas"),E=!1,p={id:"audio-"+e,ctx:f.getContext("2d")};return f.id=p.id,f.style.zIndex=1001,t.appendChild(f),r(),{destroy:o}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(26),n(12),n(36)],r=function(e,t,n){"use strict";function i(i,r,a){function o(){return c=document.getElementById(i),{width:c.clientWidth,height:c.clientHeight}}function s(n){n="undefined"==typeof n?0:n;var i=o(),s=["100%","100%"],u=i.width/i.height,d=(u-f).toFixed(2),E=1,p=1;switch(a){case"letterbox":n%180&&(E=(E/f).toFixed(2),p=(p/f).toFixed(2));break;case"crop":d<0?(p=(i.height/(i.width/f)).toFixed(2),E=p):d>=0&&(E=(i.width/(i.height*f)).toFixed(2),p=E),n%180&&(E=(E*d).toFixed(2),p=(p*d).toFixed(2));break;case"fill":d<0?p=(i.height/(i.width/f)).toFixed(2):d>=0&&(E=(i.width/(i.height*f)).toFixed(2));break;case"original":s[0]=r.width+"px",s[1]=r.height+"px";break;case"resize":"fixed"!==c.style.position&&(s[0]=r.width+"px",s[1]=r.height+"px",c.style.width=s[0],c.style.height=s[1])}for(;l.length;)l.pop();if(t.isIOS11||!t.isIOS&&t.mustUseHLS)for(var h,m=c.querySelectorAll("iframe"),h=0;h<m.length;h+=1)l.push(m[h].contentDocument.body.firstChild);else for(var h,_=c.querySelectorAll("video"),h=0;h<_.length;h+=1)l.push(_[h]);for(var h=0;h<l.length;h+=1){var T=l[h];e.normalize(T,"transform","translate(-50%, -50%) scaleX("+E+") scaleY("+p+") rotate("+n+"deg)"),T.style.width=s[0],T.style.height=s[1]}}function u(e,t){a=e||a,s(t)}function d(){for(;l.length;)l.pop();return c=null,null}a=a||n.LETTERBOX;var c=document.getElementById(i),l=[],f=r.width/r.height;return s(),{update:u,destroy:d}}return{create:i}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({NONE:"none",LETTERBOX:"letterbox",CROP:"crop",FILL:"fill"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(38),n(41)],r=function(e,t){"use strict";function n(n,r){return i()?e.create(n,r):t.create(n,r)}function i(){return document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen}return{create:n}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(39),n(40),n(20)],r=function(e,t,n){"use strict";function i(i,r){function a(){for(var e in t)t.hasOwnProperty(e)&&(document.addEventListener(t[e],s),document.addEventListener(t[e].toLowerCase(),s))}function o(){for(var e in t)t.hasOwnProperty(e)&&(document.removeEventListener(t[e],s),document.removeEventListener(t[e].toLowerCase(),s))}function s(t){u()?(E.style.width="100vw",E.style.height="100vh",p=e.ENTERED,r.emit(n.FULLSCREEN_ENTER)):(p=e.EXITED,r.emit(n.FULLSCREEN_EXIT),E.style.cssText=h)}function u(){var e=d();return e===E}function d(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}function c(){try{u()?document.exitFullScreen&&document.exitFullScreen():E.requestFullScreen&&E.requestFullScreen()}catch(e){}}function l(){c()}function f(){return o(),u()&&(document.exitFullScreen&&document.exitFullScreen(),p=e.EXITED,r.emit(n.FULLSCREEN_EXIT)),E=null,null}var E=document.getElementById(i),p=e.EXITED;E.requestFullScreen=E.requestFullscreen||E.mozRequestFullScreen||E.webkitRequestFullscreen||E.msRequestFullscreen,document.exitFullScreen=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen;var h=E.style.cssText;return a(),{change:l,destroy:f}}return{create:i}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({ENTERED:"entered",EXITED:"exited"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({FULLSCREEN_CHANGE:"fullscreenChange",WEBKIT_FULLSCREEN_CHANGE:"webkitfullscreenchange",MOZ_FULLSCREEN_CHANGE:"mozfullscreenchange",MS_FULLSCREEN_CHANGE:"MSFullscreenChange"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(26),n(39),n(20)],r=function(e,t,n){"use strict";function i(e,i){function r(){var e,t=document.querySelectorAll("meta");for(e=0;e<t.length;++e){var n=t[e].getAttribute("name");n&&"viewport"===n.toLowerCase()&&(h=!0)}}function a(){return p===t.ENTERED}function o(){try{if(a()){clearInterval(m);for(var e=0;e<_.length;e+=1)_[e].element.style.cssText=_[e].cssText,_[e].border&&(_[e].element.frameBorder=_[e].border);for(;_.length;)_.pop();g=y=null,p=t.EXITED,i.emit(n.FULLSCREEN_EXIT)}else{_.unshift({window:window,document:window.document,element:E,cssText:E.style.cssText,border:null}),l(window),m=setInterval(d,300);for(var e=0;e<_.length;e+=1)_[e].element.style.position="fixed",_[e].element.style.left=0,_[e].element.style.top=0,_[e].border&&(_[e].element.frameBorder="0");s(),p=t.ENTERED,i.emit(n.FULLSCREEN_ENTER)}}catch(e){}}function s(){_.forEach(u)}function u(e){!y&&(y=_[0]),T=y.document.documentElement.clientWidth/y.window.innerWidth,S=(0===y.window.orientation?y.window.screen.height:y.window.screen.width)-y.window.innerWidth*T,S=S>1&&!h?S:0,e.element.style.width=y.window.innerWidth*T+"px",e.element.style.height=y.window.innerHeight*T-S+"px"}function d(){try{a()&&s()}catch(e){}}function c(){o()}function l(e){if(e.parent!=e.self)for(var t=e.parent,n=t.frames,i=0;i<n.length;i++){var r=n[i];if(e.self===r&&r.frameElement&&r.frameElement.tagName&&"IFRAME"===r.frameElement.tagName){for(var a=r.frameElement.attributes,o=!1,s=0;s<a.length;s+=1)if(a[s].nodeName&&a[s].nodeName.indexOf("allowfullscreen")!==-1&&"false"!==a[s].nodeValue){o=!0;break}o&&(_.unshift({window:e.parent,document:e.parent.document,element:r.frameElement,cssText:r.frameElement.style.cssText,border:r.frameElement.frameBorder}),l(e.parent))}}}function f(){return a()&&o(),E=null,null}var E=document.getElementById(e),p=t.EXITED,h=!1,m=0,_=[],T=1,S=0,g=null,y=null;return r(),{change:c,destroy:f}}return{create:i}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(9),n(19),n(44),n(45),n(39),n(43),n(46),n(47),n(48),n(49)],r=function(e,t,n,i,r,a,o,s,u,d){"use strict";function c(c,l,f){function E(){U&&(U.style.visibility="visible")}function p(){U&&(U.style.visibility="hidden")}function h(){document.getElementById(C)||(U.id=C,U.style.width="100%",U.style.height=(w?"100":Math.round(e.mobile?100/6:100/12))+"%",U.style.maxHeight=N.clientWidth/8+"px",U.style.position="absolute",U.style.left="0",U.style.bottom="0",U.style.zIndex=2352346258378,U.style.backgroundColor=w?"white":"rgba(255,255,255,0.7)",!w&&p(),N.appendChild(U),L.playPauseControl=a.create(U,l),L.timeControl=d.create(U,l),!w&&D&&(L.fullscreenControl=u.create(U,l)),L.volumeControl=s.create(U,l,w),L.muteControl=o.create(U,l,w),!w&&N.addEventListener(t.MOUSE_MOVE,T,!0))}function m(){U.style.zIndex=2352346258378}function _(){U.style.width="100%";var t=Math.round(e.mobile?N.clientHeight/6:N.clientHeight/12),n=Math.round(e.mobile?U.clientWidth/8:U.clientWidth/12);U.style.height=(w?"100":Math.min(t,n))+"px",U.style.maxHeight=N.clientWidth/8+"px";for(var i in L)L[i].update&&L[i].update()}function T(e){e.button&&0!==e.button||e.target.id&&e.target.id.indexOf("playButton-")!==-1||S()}function S(){P&&clearTimeout(P),P=0,P=setTimeout(p,5e3),E()}function g(){L.playPauseControl.update(n.PLAY)}function y(){L.playPauseControl.update(n.PAUSE)}function A(e){!w&&D&&(m(),e?L.fullscreenControl.update(r.ENTERED):L.fullscreenControl.update(r.EXITED))}function v(){L.muteControl.update(i.MUTED)}function b(){L.muteControl.update(i.UNMUTED)}function I(e){L.volumeControl.update(e)}function R(e){L.timeControl.update(e)}function O(){P&&clearTimeout(P);for(var e in L)"undefined"!=typeof L[e]&&L[e].destroy(),delete L[e];return w&&N.removeEventListener(t.MOUSE_MOVE,T),U&&U.parentElement===N&&N.removeChild(U),U=null,N=null,null}var N=document.getElementById(c),C="controls-"+c,U=document.createElement("div"),P=0,w=f.style.audioPlayer,D=f.style.fullScreenControl,L={playPauseControl:void 0,muteControl:void 0,volumeControl:void 0,fullscreenControl:void 0,timeControl:void 0};return h(),{size:_,appear:S,show:E,hide:p,play:g,pause:y,fullscreen:A,mute:v,unmute:b,volume:I,time:R,destroy:O}}return{create:c}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(9),n(19),n(22),n(44)],r=function(e,t,n,i){"use strict";function r(r,a){function o(){E.ctx&&E.ctx.clearRect(0,0,l.width,l.height),l.width=l.height=r.clientHeight;var e=l.width,t={l20:s(.2*e),l30:s(.3*e),l45:s(.45*e),l50:s(.5*e),l55:s(.55*e),l70:s(.7*e),l75:s(.75*e),l80:s(.8*e)};f===i.PLAY?(E.ctx.beginPath(),E.ctx.fillStyle="rgba(0,0,0,1)",E.ctx.moveTo(t.l30,t.l20),E.ctx.lineTo(t.l30,t.l80),E.ctx.lineTo(t.l75,t.l50),E.ctx.fill()):f===i.PAUSE&&(E.ctx.beginPath(),E.ctx.fillStyle="rgba(0,0,0,1)",E.ctx.moveTo(t.l30,t.l20),E.ctx.lineTo(t.l30,t.l80),E.ctx.lineTo(t.l45,t.l80),E.ctx.lineTo(t.l45,t.l20),E.ctx.moveTo(t.l55,t.l20),E.ctx.lineTo(t.l55,t.l80),E.ctx.lineTo(t.l70,t.l80),E.ctx.lineTo(t.l70,t.l20),E.ctx.fill())}function s(e){return Math.floor(e)}function u(e){e&&(f=e),o()}function d(){E.ctx&&E.ctx.clearRect(0,0,l.width,l.height),l&&l.parentElement===r&&r.removeChild(l),l=null}function c(e){f===i.PLAY?a.emit(n.PLAY):f===i.PAUSE&&a.emit(n.PAUSE)}var l=document.createElement("canvas"),f=i.PLAY,E={id:"playpause-"+r.id,ctx:l.getContext("2d")};return l.id=E.id,l.style.float="left",l.style.display="inline-block",l.addEventListener(e.mobile?t.TOUCH_END:t.MOUSE_UP,c),r.appendChild(l),o(),{update:u,destroy:d}}return{create:r}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({PLAY:"play",PAUSE:"pause"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({MUTED:"muted",UNMUTED:"unmuted"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(9),n(19),n(22),n(45)],r=function(e,t,n,i){"use strict";function r(r,a,o){function s(){g.ctx&&g.ctx.clearRect(0,0,_.width,_.height),_.width=_.height=r.clientHeight;var e=_.width,t={l175:u(.175*e),l20:u(.2*e),l30:u(.3*e),l37:u(.37*e),l50:u(.5*e),l63:u(.63*e),l825:u(.825*e)};g.ctx.beginPath(),g.ctx.fillStyle="rgba(0,0,0,1)",g.ctx.strokeStyle="rgba(0,0,0,1)",g.ctx.lineJoin="round",g.ctx.moveTo(t.l20,t.l37),g.ctx.lineTo(t.l20,t.l63),g.ctx.lineTo(t.l30,t.l63),g.ctx.lineTo(t.l50,t.l825),g.ctx.lineTo(t.l50,t.l175),g.ctx.lineTo(t.l30,t.l37),g.ctx.fill(),g.ctx.lineWidth=u(.1*e),g.ctx.lineCap="round",T===i.MUTED&&(g.ctx.strokeStyle="rgba(0,0,0,0.2)"),f=E=_.width/2,p=.3*e,h=1.6*Math.PI,m=.4*Math.PI,g.ctx.beginPath(),g.ctx.arc(f,E,p,h,m,S),g.ctx.stroke(),p=.15*e,h=1.7*Math.PI,m=.3*Math.PI,g.ctx.beginPath(),g.ctx.arc(f,E,p,h,m,S),g.ctx.stroke()}function u(e){return Math.round(e)}function d(e){e&&(T=e),s()}function c(){g.ctx&&g.ctx.clearRect(0,0,_.width,_.height),_&&_.parentElement===r&&r.removeChild(_),_=null}function l(e){T===i.MUTED?a.emit(n.UNMUTE):T===i.UNMUTED&&a.emit(n.MUTE)}var f,E,p,h,m,_=document.createElement("canvas"),T=i.UNMUTED,S=!1,g={id:"mute-"+r.id,ctx:_.getContext("2d")};return _.id=g.id,_.style.float="right",_.style.display="inline-block",_.addEventListener(e.mobile?t.TOUCH_END:t.MOUSE_UP,l),r.appendChild(_),s(),{update:d,destroy:c}}return{create:r}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(9),n(19),n(22),n(45)],r=function(e,t,n,i){"use strict";function r(i,r,a){function o(){A.ctx&&A.ctx.clearRect(0,0,S.width,S.height),S.height=i.clientHeight,S.width=3*S.height,l=S.width,f=S.height,A.ctx.beginPath(),A.ctx.strokeStyle="rgba(0,0,0,1)",A.ctx.lineJoin="round",E=s(l*g),p=s(f*(1-y)),h=s(l*(1-g)),m=s(f*y),A.ctx.moveTo(E,p),A.ctx.lineTo(h,p),A.ctx.lineTo(h,m),A.ctx.fillStyle="rgba(0,0,0,0.2)",A.ctx.fill(),A.value&&(A.ctx.closePath(),A.ctx.beginPath(),_=s(E+A.value*(h-E)),T=s(p-A.value*(p-m)),A.ctx.moveTo(E,p),A.ctx.lineTo(_,p),A.ctx.lineTo(_,T),A.ctx.fillStyle="rgba(0,0,0,1)",A.ctx.fill())}function s(e){return Math.round(e)}function u(e){e&&(A.value=e),o()}function d(){A.ctx&&A.ctx.clearRect(0,0,S.width,S.height),S&&S.parentElement===i&&i.removeChild(S),S=null}function c(e){var t=e.target||e.srcElement,i=t.currentStyle||window.getComputedStyle(t,null),a=isNaN(parseInt(i.borderLeftWidth))?0:parseInt(i.borderLeftWidth,10),o=isNaN(parseInt(i.borderTopWidth))?0:parseInt(i.borderTopWidth,10),s=t.getBoundingClientRect(),u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e.touches&&e.touches.length?e.touches[0]:{clientX:s.left,clientY:s.top},d=(e.clientX?e.clientX:u.clientX)-a-s.left,c=((e.clientY?e.clientY:u.clientY)-o-s.top,0);d>E&&d<h?c=(d-E)/(h-E):d>h&&(c=1);var l=Math.round(100*c)/100;r.emit(n.VOLUME_CHANGE,{volume:l})}var l,f,E,p,h,m,_,T,S=document.createElement("canvas"),g=.1,y=.15,A={id:"volume-"+i.id,ctx:S.getContext("2d"),value:1};return S.id=A.id,S.style.float="right",S.style.display="inline-block",S.addEventListener(e.mobile?t.TOUCH_END:t.MOUSE_UP,c),i.appendChild(S),o(),{update:u,destroy:d}}return{create:r}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(9),n(19),n(22),n(39)],r=function(e,t,n,i){"use strict";function r(r,a){function o(){p.ctx&&p.ctx.clearRect(0,0,f.width,f.height),f.width=f.height=r.clientHeight;var e=f.width,t={l20:s(.2*e),l35:s(.35*e),l65:s(.65*e),l80:s(.8*e)};p.ctx.beginPath(),p.ctx.strokeStyle="rgba(0,0,0,1)",p.ctx.lineCap="round",p.ctx.lineWidth=u(.1*e),E===i.ENTERED?(p.ctx.beginPath(),p.ctx.moveTo(t.l20,t.l35),p.ctx.lineTo(t.l35,t.l35),p.ctx.lineTo(t.l35,t.l20),p.ctx.stroke(),p.ctx.beginPath(),p.ctx.moveTo(t.l65,t.l20),p.ctx.lineTo(t.l65,t.l35),p.ctx.lineTo(t.l80,t.l35),p.ctx.stroke(),p.ctx.beginPath(),p.ctx.moveTo(t.l80,t.l65),p.ctx.lineTo(t.l65,t.l65),p.ctx.lineTo(t.l65,t.l80),p.ctx.stroke(),p.ctx.beginPath(),p.ctx.moveTo(t.l35,t.l80),p.ctx.lineTo(t.l35,t.l65),p.ctx.lineTo(t.l20,t.l65),p.ctx.stroke()):E===i.EXITED&&(p.ctx.beginPath(),p.ctx.moveTo(t.l20,t.l35),p.ctx.lineTo(t.l20,t.l20),p.ctx.lineTo(t.l35,t.l20),p.ctx.stroke(),p.ctx.beginPath(),p.ctx.moveTo(t.l65,t.l20),p.ctx.lineTo(t.l80,t.l20),p.ctx.lineTo(t.l80,t.l35),p.ctx.stroke(),p.ctx.beginPath(),p.ctx.moveTo(t.l80,t.l65),p.ctx.lineTo(t.l80,t.l80),
p.ctx.lineTo(t.l65,t.l80),p.ctx.stroke(),p.ctx.beginPath(),p.ctx.moveTo(t.l35,t.l80),p.ctx.lineTo(t.l20,t.l80),p.ctx.lineTo(t.l20,t.l65),p.ctx.stroke(),p.ctx.stroke())}function s(e){return Math.floor(e)+.5}function u(e){return Math.round(e)}function d(e){e&&(E=e),o()}function c(){p.ctx&&p.ctx.clearRect(0,0,f.width,f.height),f&&f.parentElement===r&&r.removeChild(f),f=null}function l(e){E===i.EXITED?a.emit(n.FULLSCREEN_ENTER):E===i.ENTERED&&a.emit(n.FULLSCREEN_EXIT)}var f=document.createElement("canvas"),E=i.EXITED,p={id:"fullscreen-"+r.id,ctx:f.getContext("2d")};return f.id=p.id,f.style.float="right",f.style.display="inline-block",f.addEventListener(e.mobile?t.TOUCH_END:t.MOUSE_UP,l),r.appendChild(f),o(),{update:d,destroy:c}}return{create:r}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";function e(e,t){function n(){d.ctx&&d.ctx.clearRect(0,0,s.width,s.height);var t=s.height=e.clientHeight,n=s.width=3*s.height;d.ctx.textAlign="left",d.ctx.textBaseline="middle",d.ctx.font="bold "+i(.6*t)+'px "Arial"',d.ctx.fillStyle="rgba(0,0,0,1)";try{d.ctx.fillText(u,i(.1*n),i(.5*t))}catch(e){}}function i(e){return Math.round(e)}function r(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),e=Math.floor(e-3600*t-60*n),i="";return 0!=t&&(i=t+":"),n=n<10&&""!==i?"0"+n:String(n),i+=n+":",i+=e<10?"0"+e:String(e)}function a(e){e&&(u=r(e)),n()}function o(){d.ctx&&d.ctx.clearRect(0,0,s.width,s.height),s&&s.parentElement===e&&e.removeChild(s),s=null}var s=document.createElement("canvas"),u="0:00",d={id:"time-"+e.id,ctx:s.getContext("2d")};return s.id=d.id,s.style.float="left",s.style.display="inline-block",e.appendChild(s),n(),{update:a,destroy:o}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(9),n(3),n(13),n(53),n(14),n(54),n(55),n(56),n(57),n(58),n(51),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66)],r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,E,p,h,m,_,T){function S(){function u(e,t){console.log("NanoMetrics api version "+this.version);try{v(),V.debug("setup"),w=t,X=i.copy(e),!X.source.h5live||X.source.entries&&X.source.entries.length||(X.source.entries=[{h5live:i.copy(X.source.h5live)}],delete X.source.h5live);var n=X.metrics;if(!n)throw new K(o.METRICS_NO_OBJECT,a.SETUP.METRICS_NO_OBJECT);if("object"!=typeof n)throw new K(o.METRICS_NOT_OBJECT,a.SETUP.METRICS_NOT_OBJECT);if(!Object.getOwnPropertyNames(n).length)throw new K(o.METRICS_EMPTY_OBJECT,a.SETUP.METRICS_EMPTY_OBJECT);for(var s in n)if(!n.hasOwnProperty(s)||!H.hasOwnProperty(s)||(H[s]=n[s],0===s.indexOf("customField"))){var u,g=s.split("customField");if(!(g.length>1&&0===g[0].length))throw new K(o.METRICS_PROPERTY_INVALID.replace("$key$",s),a.SETUP.METRICS_PROPERTY_INVALID);if(u=parseInt(g[1]),isNaN(u))throw new K(o.METRICS_INDEX_INVALID.replace("$key$",s),a.SETUP.METRICS_INDEX_INVALID);if(u.toString()!=g[1])throw new K(o.METRICS_INDEX_INCORRECT.replace("$key$",s),a.SETUP.METRICS_INDEX_INCORRECT);if(u<1||u>10)throw new K(o.METRICS_INDEX_RANGE.replace("$key$",s),a.SETUP.METRICS_INDEX_RANGE);Y["application_custom_field_"+g[1]]=n[s]}if(!H.accountId||!H.accountKey)throw new K(o.METRICS_NO_CREDENTIALS,a.SETUP.METRICS_NO_CREDENTIALS);for(var s in n)V.debug("metrics config["+s+"]: "+JSON.stringify(n[s]));D=c.create(),L=l.create(),M=f.create(H.statsInterval),x=E.create(),F=p.create(),k=h.create(),G=m.create(),metricsSource=_.create(),B=T.create(),P=d.create({accountId:H.accountId,accountKey:H.accountKey});for(var y in r)r.hasOwnProperty(y)&&w.on(r[y],S)}catch(e){throw e}X.source&&!isNaN(X.source.startIndex)&&(Q=X.source.startIndex)}function S(e){try{var t=g(e);switch(e.name){case r.READY:y(G,"measure",e,t)&&A(t);break;case r.LOADING:x.reset(),M.reset(),A(t);break;case r.STREAM_INFO:j=e.data.streamInfo,y(D,"measure",e,t),A(t);break;case r.STREAM_INFO_UPDATE:j=e.data.streamInfo,y(D,"measure",e,t),A(t);break;case r.PLAY:$=performance.now(),z=e.data.stats,y(L,"measure",e,t),A(t),metricsSource.resetSwitchCount();break;case r.STATS:q=e.data.stats;var n=q.hasOwnProperty("adaptive");n&&B.setStats(e,t),y(M,"measure",e,t)&&(n&&b(t,B.getStatsFlat()),A(t));break;case r.START_BUFFERING:L.setTimePlayingStateEnd(),x.start();break;case r.STOP_BUFFERING:x.end(),L.setTimePlayingStateStart(),y(x,"measure",e,t)&&(t.message=t.player_event_name="BUFFERING",A(t));break;case r.PAUSE:Z=t.time_elapsed,ee+=Z,L.setTimePlayingStateEnd();var i=L.getTimePlayingStateTotal();y(F,"measure",e,t),y(x,"reset",e,t),b(t,D.getFlat()),b(t,{time_playing_state_total:i,time_elapsed_total_sum:ee,entries_length:X&&X.hasOwnProperty("source")&&X.source.hasOwnProperty("entries")?X.source.entries.length:1}),b(t,metricsSource.getSwitchCountFlat()),A(t),j={},q={},z={},J=0,L.resetTimePlayingStateSubtotal(),metricsSource.resetSwitchCount(),ee=0,$=0;break;case r.ERROR:y(k,"measure",e,t),A(t);break;case r.DESTROY:A(t);break;case r.METADATA:break;case r.PLAYBACK_FINISHED:break;case r.MEDIA:break;case r.MUTE:break;case r.UNMUTE:break;case r.VOLUME_CHANGE:break;case r.STATE_CHANGE:break;case r.WARNING:break;case r.SWITCH_STREAM_INIT:y(metricsSource,"handleEvent",e,t)&&(b(t,B.getStatsFlat()),A(t));break;case r.SWITCH_STREAM_SUCCESS:O(e,"entry")&&I(e.data.entry.index),Z=t.time_elapsed,ee+=Z,$=performance.now(),y(metricsSource,"handleEvent",e,t)&&(b(t,D.getFlat()),b(t,{time_elapsed_total:Z,time_elapsed_total_sum:ee}),A(t),D.reset());break;case r.SWITCH_STREAM_FAIL:y(metricsSource,"handleEvent",e,t)&&A(t);break;case r.SWITCH_STREAM_ABORT:y(metricsSource,"handleEvent",e,t)&&A(t);break;case r.UPDATE_SOURCE_INIT:y(metricsSource,"handleEvent",e,t)&&A(t);break;case r.UPDATE_SOURCE_SUCCESS:O(e,"source")&&(R(e.data.source),I(e.data.source.startIndex)),Z=t.time_elapsed,ee+=Z,$=performance.now(),y(metricsSource,"handleEvent",e,t)&&(b(t,D.getFlat()),b(t,{time_elapsed_total:Z,time_elapsed_total_sum:ee}),A(t),D.reset());break;case r.UPDATE_SOURCE_FAIL:y(metricsSource,"handleEvent",e,t)&&A(t);break;case r.UPDATE_SOURCE_ABORT:y(metricsSource,"handleEvent",e,t)&&A(t)}}catch(e){V.debug("metrics event error: "+(e.message?e.message:"exception"))}}function g(e){var t=X&&X.source&&X.source.entries&&X.source.entries[Q]&&X.source.entries[Q].h5live?X.source.entries[Q].h5live:{},n=t.server||{websocket:"",hls:"",progressive:""},i=t.rtmp&&t.rtmp.url?t.rtmp.url:"",r=U(t.rtmp&&t.rtmp.streamname?t.rtmp.streamname:""),a=r[0],o=r[1],s=N(i,a),u={application_name:"h5live-player",application_user_id:""+H.userId,application_event_id:""+H.eventId,application_account_id:""+H.accountId,application_account_key:""+H.accountKey,message:e.name.replace(/\b\w/g,function(e){return e.toLowerCase()}).replace(/([A-Z])/g,"_$1").toUpperCase(),severity:"info",client_ip:"",timestamp_client:(new Date).toISOString(),referrer:document.location.href,os:W.os,os_version:W.osVersion,browser:W.browser,browser_version:W.browserVersion,player_id:w.id,player_type:w.type,player_version:w.version,player_event_name:e.name.replace(/\b\w/g,function(e){return e.toLowerCase()}).replace(/([A-Z])/g,"_$1").toUpperCase(),server_domain:n.websocket&&n.websocket.length?n.websocket.split("//")[1].split("/")[0]:"",rtmp_url:i,rtmp_streamname:a,rtmp_streamparameter:o,connection_id:j&&j.url&&j.url.length?j.url.split("&cid=")[1].split("&pid=")[0]:"",time_played:q.currentTime?Math.round(1e3*q.currentTime)/1e3:0,time_elapsed:$>0?Math.round(performance.now()-$)/1e3:0,bintu_orga_hash:s};for(var d in Y)Y.hasOwnProperty(d)&&(u[d]=""+Y[d]);return u}function y(e,t,n,i){var r=e[t](n,i);if(r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);return!0}return!1}function A(e){V.debug("send "+e.player_event_name),P.send(e.player_event_name,e)}function v(){if("object"==typeof w&&"function"==typeof w.off)for(var e in r)r.hasOwnProperty(e)&&w.off(r[e],S);P&&(P.destroy(),P=null),D=null,L=null,M=null,x=null,F=null,k=null,G=null,metricsSource=null,B=null}function b(e,t){for(key in t)e.hasOwnProperty(key)||(e[key]=t[key])}function I(e){Q=isNaN(e)?0:e}function R(e){e&&(X.source=e)}function O(e,t){var n=e&&e.hasOwnProperty("data");return t?n&&e.data.hasOwnProperty(t):n}function N(e,t){var n="";return e&&t&&(e.indexOf("bintu")!==-1||server.websocket&&server.websocket.length&&server.websocket.indexOf("bintu")!==-1&&e.indexOf("localhost")!==-1)&&C(t.split("-")[0])&&(n=t.split("-")[0]),n}function C(e){var t=/^[A-Za-z0-9 ]+$/;return e.length>te&&e.length<=ne&&t.test(e)}function U(e){var t=e.split(/\?(.+)/);return 1===t.length?t.push(""):t.pop(),t}var P,w,D,L,M,x,F,k,G,G,B,H=s.create().metrics,Y={},V=n.create("NanoMetrics"),W=e,K=t,j={},q={},z={},X={},J=0,Q=0,$=0,Z=0,ee=0,te=4,ne=6;return{setup:u,destroy:v}}return S.emptyConfig=s,S.validConfig=u,S}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(52),n(53)],r=function(e,t){function n(){function t(e,t){return streamInfo=e.data.streamInfo,{stream_info_has_audio:streamInfo.haveAudio,stream_info_has_video:streamInfo.haveVideo,stream_info_width:streamInfo.videoInfo?streamInfo.videoInfo.width:0,stream_info_height:streamInfo.videoInfo?streamInfo.videoInfo.height:0,stream_info_frame_rate:streamInfo.videoInfo?streamInfo.videoInfo.frameRate:0,stream_info_sample_rate:streamInfo.audioInfo?streamInfo.audioInfo.sampleRate:0,stream_info_channels:streamInfo.audioInfo?streamInfo.audioInfo.channels:0,stream_info_bits_per_sample:streamInfo.audioInfo?streamInfo.audioInfo.bitsPerSample:0,connection_id:streamInfo.url.split("&cid=")[1].split("&pid=")[0]}}function n(){return o.get(streamInfo,"streamInfo",5)}function i(){streamInfo={}}function r(e){e&&e.hasOwnProperty("rtmp")&&e.rtmp.hasOwnProperty("streamname")}function a(){return r(streamInfo)?streamInfo.rtmp.streamname:""}var o=e.create();return streamInfo={},{measure:t,getFlat:n,reset:i,getStreamname:a}}return{create:n}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){function e(e,n,i,s){return r(),e&&"object"==typeof e?(n=n?n.toLowerCase():"",a=i,o=s,t(e,n)):{}}function t(e,n){var r;for(var o in e)if(r=i(o,n),a&&Array.isArray(e[o])){var s=e[o].slice(Math.max(e[o].length-a,0));t(s,r)}else"object"==typeof e[o]?t(e[o],r):u[r]=e[o];return u}function n(e){return isNaN(e)&&e===e.toUpperCase()}function i(e,t){var i,r=t+s;o&&d.hasOwnProperty(e)&&(e=d[e]);for(var a=0;a<e.length;a++)i=e.charAt(a),n(i)&&(r+=s),r+=i.toLowerCase();return r}function r(){u={}}var a,o,s="_",u={},d={source:"src",options:"opt",config:"cfg",playback:"pb",entries:"entr"};return{get:e,reset:r}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(t){var i;switch(typeof t){case"object":if(null===t)i=null;else switch(n.call(t)){case"[object Array]":i=t.map(e);break;case"[object Date]":i=new Date(t);break;case"[object RegExp]":i=new RegExp(t);break;default:i=Object.keys(t).reduce(function(n,i){return n[i]=e(t[i]),n},{})}break;case"undefined":i=t;break;default:i=t.valueOf()}return i}function t(e,t){if("object"==typeof e)for(var n in e)if(e[n]===t)return n;return!1}var n=Object.prototype.toString;return{copy:e,findPropertyByValue:t}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({SETUP:{METRICS_NO_OBJECT:5201,METRICS_NOT_OBJECT:5202,METRICS_EMPTY_OBJECT:5203,METRICS_INDEX_INVALID:5204,METRICS_INDEX_INCORRECT:5205,METRICS_INDEX_RANGE:5206,METRICS_PROPERTY_INVALID:5207,METRICS_NO_CREDENTIALS:5208}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({METRICS_NO_OBJECT:"Metrics configuration error. No metrics config object passed.",METRICS_NOT_OBJECT:"Metrics configuration error. Metrics config is not from type 'object'.",METRICS_EMPTY_OBJECT:"Metrics configuration error. Metrics config is empty.",METRICS_INDEX_INVALID:"Metrics configuration error. The custom property '$key$' has no valid index number, the range is 1 to 10 e.g. 'customField1'.",METRICS_INDEX_INCORRECT:"Metrics configuration error. The custom property '$key$' is not indexed correctly, the range is 1 to 10 e.g. 'customField1'.",METRICS_INDEX_RANGE:"Metrics configuration error. The custom property '$key$' has an index out of range, the range is 1 to 10 e.g. 'customField1'.",METRICS_PROPERTY_INVALID:"Metrics configuration error. The property '$key$' is not valid.",METRICS_NO_CREDENTIALS:"Metrics configuration error. No credentials passed."})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){return{metrics:{accountId:void 0,accountKey:void 0,userId:"",eventId:"",statsInterval:10,customField1:void 0,customField2:void 0,customField3:void 0,customField4:void 0,customField5:void 0,customField6:void 0,customField7:void 0,customField8:void 0,customField9:void 0,customField10:void 0}}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){return{metrics:{accountId:"string",accountKey:"string",userId:"string",eventId:"string",statsInterval:"number",customField1:"*",customField2:"*",customField3:"*",customField4:"*",customField5:"*",customField6:"*",customField7:"*",customField8:"*",customField9:"*",customField10:"*"}}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13)],r=function(e){function t(t){function n(e,t){try{s+=1;var n=new XMLHttpRequest;u[s]=n;var r=u[s];if(r.open("POST",c,f),r.onreadystatechange=function(e,t){if(this&&4===this.readyState){var n=this.status>=400?"fail":this.status>=200?"success":"unknown";i.call(null,e,t,n)}}.bind(r,s,e),["abort","error","timeout"].forEach(function(t){r.addEventListener(t,i.bind(null,s,e,t))}),"undefined"!=typeof t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t=null}if("object"==typeof t)try{t=JSON.stringify(t),l.debug("#"+s+" "+e+" send "+t),setTimeout(i.bind(null,s,e,"suspend"),5e3),r.send(t)}catch(e){i.call(null,s,"catch "+e.message)}}else r.send()}catch(e){i.call(null,s,"catch "+e.message)}}function i(e,t,n){"undefined"!=typeof u[e]&&(l.debug("#"+e+" "+t+" "+n+" "+u[e].status),delete u[e])}function r(){for(var e in u)u.hasOwnProperty(e)&&delete u[e]}var a={accountId:void 0,accountKey:void 0};for(var o in a)a.hasOwnProperty(o)&&t&&t.hasOwnProperty(o)&&void 0!==t[o]&&(a[o]=t[o]);var s=0,u={},d="https://glog1.nanocosmos.de/gelf/",c=d+a.accountKey,l=e.create("MetricsLogger"),f=!0;return window.addEventListener("unload",function(){f=!1}),{send:n,destroy:r}}return{create:t}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){function e(e,n){t();var i,r={connecting:0,connected:0,firstFragmentReceived:0,firstFrameRendered:0,playable:0,playing:0};try{if(e.data&&e.data.stats&&"object"==typeof e.data.stats){var a=e.data.stats;for(i in r)a.hasOwnProperty(i)&&"number"==typeof a[i]&&(r[i]=a[i])}}catch(e){}var o={},s=[{start:"connecting",end:"connecting",measurement:"play_connecting",value:0},{start:"connecting",end:"connected",measurement:"play_connected",value:0},{start:"connected",end:"firstFragmentReceived",measurement:"play_first_fragment_received",value:0},{start:"firstFragmentReceived",end:"firstFrameRendered",measurement:"play_first_frame_rendered",value:0},{start:"firstFrameRendered",end:"playable",measurement:"play_playable",value:0},{start:"playable",end:"playing",measurement:"play_playing",value:0}];return s.forEach(function(e,t){var n=r[e.start],i=r[e.end];i-n>=0&&(e.value=Math.floor(i-n)),o[e.measurement+"_relative"]=e.value,o[e.measurement+"_absolute"]=r[e.end]}),o.play_start_time_total=o.play_playing_absolute,o}function t(){o=performance.now()}function n(){s=performance.now(),u+=Math.abs(s-o),i()}function i(){o=0,s=0}function r(){u=0}function a(){return o&&!s&&n(),Math.round(u/1e3*100)/100}var o=0,s=0,u=0;return{measure:e,setTimePlayingStateStart:t,setTimePlayingStateEnd:n,getTimePlayingStateTotal:a,resetTimePlayingStateSubtotal:r}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e){function t(e,t){var n={currentTime:0,playout:{start:0,end:0},buffer:{start:0,end:0,delay:{before:0,current:0,avg:0,min:0,max:0},update:{current:0,avg:0,min:0,max:0}},quality:{droppedVideoFrames:0,droppedVideoFramesCurrent:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0},bitrate:{current:0,avg:0,min:0,max:0},framerate:{current:0,avg:0,min:0,max:0}};e.data.stats&&"object"==typeof e.data.stats&&(n=e.data.stats);try{for(o+=1,s.push(n.buffer.delay.current),u.push(n.bitrate.current),d.push(n.framerate.current);s.length>a;)s.shift();for(;u.length>a;)u.shift();for(;d.length>a;)d.shift();if(o%a===0){var i=JSON.parse(JSON.stringify(s)).sort(function(e,t){return e-t},0),r=JSON.parse(JSON.stringify(u)).sort(function(e,t){return e-t},0),l=JSON.parse(JSON.stringify(d)).sort(function(e,t){return e-t},0);return c.stats_buffer_average=Math.round(i.reduce(function(e,t){return e+t},0)/i.length*1e3)/1e3,c.stats_buffer_min=Math.round(1e3*i[0])/1e3,c.stats_buffer_max=Math.round(1e3*i[i.length-1])/1e3,c.stats_bitrate_average=Math.round(r.reduce(function(e,t){return e+t},0)/r.length/1e3),c.stats_bitrate_min=Math.round(r[0]/1e3),c.stats_bitrate_max=Math.round(r[i.length-1]/1e3),c.stats_frame_rate_average=Math.round(l.reduce(function(e,t){return e+t},0)/l.length*1e3)/1e3,c.stats_frame_rate_min=l[0],c.stats_frame_rate_max=l[l.length-1],c.stats_measure_count+=1,c.stats_quality_dropped_video_frames=n.quality.droppedVideoFrames,c.stats_quality_dropped_video_frames_current=n.quality.droppedVideoFramesCurrent,c.stats_quality_corrupted_video_frames=n.quality.corruptedVideoFrames,c.stats_quality_corrupted_video_frames_current=n.quality.corruptedVideoFramesCurrent,c.stats_quality_creation_time=n.quality.creationTime,c.stats_quality_total_video_frames=n.quality.totalVideoFrames,c}return!1}catch(e){return!1}}function n(){for(o=0;s.length;)s.shift();for(;u.length;)u.shift();for(;d.length;)d.shift();for(var e in c)"stats_measure_samples"!==e&&(c[e]=0)}var i=10;e&&!isNaN(e)&&e>=1&&(i=e);var r=10,a=r*i,o=0,s=[],u=[],d=[],c={stats_buffer_average:0,stats_buffer_min:0,stats_buffer_max:0,stats_bitrate_average:0,stats_bitrate_min:0,stats_bitrate_max:0,stats_frame_rate_average:0,stats_frame_rate_min:0,stats_frame_rate_max:0,stats_quality_dropped_video_frames:0,stats_quality_dropped_video_frames_current:0,stats_quality_corrupted_video_frames:0,stats_quality_corrupted_video_frames_current:0,stats_quality_creation_time:0,stats_quality_total_video_frames:0,stats_measure_count:0,stats_measure_samples:a};return{measure:t,reset:n}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){function e(){a=performance.now()}function t(){o=performance.now()}function n(e,t){if(o){var n=Math.round(Math.abs(o-a))/1e3;if(o=a=0,n>=r){s.push(n),u.buffering_duration_current=n,u.buffering_duration_total+=n,u.buffering_count+=1,u.buffering_duration_average=Math.round(u.buffering_duration_total/u.buffering_count*1e3)/1e3;for(var i in u)!/buffering_count/.test(i)&&u[i];return u}}return!1}function i(e,t){if(e&&t){for(o=a=0;s.length;)s.pop();var n={};for(var i in u)!/buffering_duration_current/.test(i)&&(n[i]=u[i]),u[i]=0;return n.time_played_total=t.time_played,n.time_elapsed_total=t.time_elapsed,n.time_buffering_total=n.buffering_duration_total,n}}var r=1,a=0,o=0,s=[],u={buffering_duration_current:0,buffering_duration_average:0,buffering_duration_total:0,buffering_count:0};return{start:e,end:t,measure:n,reset:i}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){function e(e,t){return{pause_reason:e.data.reason}}return{measure:e}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){function e(e,t){return{error_code:e.data.code,error_message:e.data.message}}return{measure:e}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(52)],r=function(e){function t(){function t(e,t){return n.get(e.data,"ready",10,!0)}var n=e.create();return{measure:t}}return{create:t}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(52),n(53)],r=function(e,t){function n(){function n(e){var n,o,s="e";return!!i(e)&&(n=e.name,o=t.copy(e.data),d.hasOwnProperty(n)&&d[n].hasOwnProperty("removeKeys")&&d[n].removeKeys.length&&r(o,d[n].removeKeys),d.hasOwnProperty(n)&&d[n].hasOwnProperty("evaluateSwitch")&&d[n].evaluateSwitch&&a(o),u.get(o,s,5,!0))}function i(e){return e&&e.data&&e.name}function r(e,t){for(var n=0;n<t.length;n++)e.hasOwnProperty(t[n])&&delete e[t[n]]}function a(e){e&&e.type&&Object.keys(c).includes(e.type)&&(c[e.type]+=1)}function o(){var e=0,t={};return Object.keys(c).forEach(function(n){e+=c[n],t[n]=c[n]}),t.total=e,u.get(t,"switches",2,!0)}function s(){Object.keys(c).forEach(function(e){c[e]=0})}var u=e.create(),d={SwitchStreamInit:{removeKeys:["source"]},SwitchStreamSuccess:{removeKeys:["source"],evaluateSwitch:!0},SwitchStreamAbort:{removeKeys:["source"]},SwitchStreamFail:{removeKeys:["source"]},UpdateSourceInit:{removeKeys:["source"]},UpdateSourcAbort:{removeKeys:["source"]},UpdateSourceFail:{removeKeys:["source"]}},c={up:0,down:0,direct:0};return{handleEvent:n,getSwitchCountFlat:o,resetSwitchCount:s}}return{create:n}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(52)],r=function(e){function t(){function t(e){e&&e.data&&e.data.stats&&e.data.stats.adaptive&&(a=e.data.stats.adaptive)}function n(e){if(Array.isArray(e)&&e.length){for(var t,n=e.length,i=e[0],r=e[0],a=e[0],o=1;o<n;o++)e[o]<i&&(i=e[o]),e[o]>r&&(r=e[o]),a+=e[o];return t=a/n,{min:isNaN(i)?i:i.toFixed(3),max:isNaN(r)?r:r.toFixed(3),avg:isNaN(t)?t:t.toFixed(3),count:n}}return{}}function i(e,t){for(var r in t){if(!e[r])return;t[r].hasOwnProperty("calcArrayStats")?u[r]=t[r].calcArrayStats?n(e[r]):e[r]:i(e[r],t[r])}}function r(){var e=Object.keys(a)[0];return d.hasOwnProperty(e)?(i(a[e],d[e]),o.get(u,s.prefix,s.maxArrayLength)):o.get(a,s.prefix,s.maxArrayLength)}var a,o=e.create(),s={prefix:"statsAdaptive",maxArrayLength:5},u={},d={deviationOfMean:{buffer:{delay:{bufferDelaysArithmeticMeans:{calcArrayStats:!0},bufferDelaysStandardDeviations:{calcArrayStats:!0}}}}};return{setStats:t,getStatsFlat:r}}return{create:t}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(3),n(53),n(68),n(69),n(70),n(71),n(72),n(73)],r=function(e,t,n,i,r,a,o,s){"use strict";function u(r){var a=!1;return new Promise(function(s,u){function d(t,o){try{var d=JSON.parse(o.responseText),f=d.id,E=(d.state,d.playout),p=E.rtmp,h=E.hls,m=E.h5live;if(p&&!p.length&&!m||m&&!m.length)u(new e(i.SETUP.BINTU_STREAM_NOT_LIVE.replace("$streamid$",f),n.SETUP.BINTU_STREAM_NOT_LIVE));else{if(h&&h.length){var _=h[0].url;l[t].hls=_}if(m&&m.length){if(l[t].h5live=l[t].h5live||{},!l[t].h5live.server&&(l[t].h5live.server={}))for(var T in m[0].server)m[0].server.hasOwnProperty(T)&&(l[t].h5live.server[T]=m[0].server[T].replace("bintu-stream","bintu-h5live"));l[t].h5live.rtmp={},l[t].h5live.rtmp.url=m[0].rtmp.url,l[t].h5live.rtmp.streamname=m[0].rtmp.streamname}else p&&p.length&&(l[t].h5live=r.source.h5live||{},l[t].h5live.rtmp={},l[t].h5live.rtmp.url=p[0].url,l[t].h5live.rtmp.streamname=p[0].streamname)}a[f]=!1;var S=!0;for(var T in a)if(a.hasOwnProperty(T)&&a[T]!==!1){S=!1;break}S&&s(r)}catch(e){c(e)}}function c(t){"onstatuserror"===t.error?u(new e(i.SETUP.BINTU_STATUS_ERROR.replace("$status$",t.request.status),n.SETUP.BINTU_STATUS_ERROR)):t.error?u(new e(t.error)):t.message&&u(new e(t.message))}if(!r.source.bintu||r.source.entries&&r.source.entries.length||(r.source.entries=[{index:0,bintu:t.copy(r.source.bintu)}],r.source.h5live&&(r.source.entries[0].h5live=t.copy(r.source.h5live),delete r.source.h5live),r.source.hls&&(r.source.entries[0].hls=t.copy(r.source.hls),delete r.source.hls)),r.source.entries&&r.source.entries.length){for(var l=r.source.entries,f=0;f<l.length;f+=1){var E=l[f];if("object"==typeof E.bintu){if(!E.bintu.streamid){if(E.h5live&&(!E.h5live||E.h5live.rtmp))continue;u(new e(i.SETUP.BINTU_NO_STREAM_ID,n.SETUP.BINTU_NO_STREAM_ID))}E.bintu.apiurl||(E.bintu.apiurl="https://bintu.nanocosmos.de"),a=a||{},a[E.bintu.streamid]=new o(E.bintu.apiurl,null,null,"player"),a[E.bintu.streamid].getStream(E.bintu.streamid,d.bind(this,f),c)}}a||s(r)}else s(r)})}function d(e){return u({source:e})}return{setup:u,updateSource:d,emptyConfig:r,validConfig:a}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({SETUP:{BINTU_STREAM_NOT_LIVE:5101,BINTU_NO_STREAM_ID:5102,BINTU_STATUS_ERROR:5103}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({SETUP:{BINTU_STREAM_NOT_LIVE:"Could not find bintu stream with id $streamid$. The stream is not live.",BINTU_NO_STREAM_ID:"No bintu stream id passed.",BINTU_STATUS_ERROR:"The bintu service rejected with http status $status$."}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){return{source:{bintu:{apiurl:"",streamid:""}}}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){return{source:{bintu:{apiurl:"string",streamid:"string"}}}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";var e=function(e,t,n,i){if(!(e.length>0&&("string"==typeof e||e instanceof String)))throw new Error("The param 'apiUrl' must be of type 'string' and also may not be empty string.");if(this.apiUrl=e,t&&("string"==typeof t||t instanceof String)&&(this.apiKey=t),n&&("string"==typeof n||n instanceof String)&&(this.playerKey=n),i&&("string"==typeof i||i instanceof String)){if("api"!==i&&"player"!==i)throw new Error("The param 'keyMode' must be 'api', 'player' or undefined");this.keyMode=i}},t=e.prototype,n=function(e,t,n,i,r,a){var o=this;o.method=e||"GET",o.url=t||"http://localhost:8088",o.header=n||{},o.async=i||!0,o.onSuccess=r||function(e){},o.onError=a||function(e){},o.Send=function(e){var t=new XMLHttpRequest;t.open(o.method,o.url,o.async);for(var n in o.header)t.setRequestHeader(n,o.header[n]);if(t.onreadystatechange=function(){4===t.readyState&&200===t.status?"function"==typeof o.onSuccess&&o.onSuccess(t):4===t.readyState&&200!==t.status&&"function"==typeof o.onError&&o.onError({error:"onstatuserror",request:t})},t.onabort=function(){"function"==typeof o.onError&&o.onError({error:"onabort",request:t})},t.onerror=function(){"function"==typeof o.onError&&o.onError({error:"onerror",request:t})},t.ontimeout=function(){"function"==typeof o.onError&&o.onError({error:"ontimeout",request:t})},"undefined"!=typeof e){if("string"==typeof e)try{e=JSON.parse(e)}catch(n){e=null,"function"==typeof o.onError&&o.onError({error:"invalid json string",request:t})}if("object"==typeof e)try{e=JSON.stringify(e),t.send(e)}catch(e){"function"==typeof o.onError&&o.onError({error:"invalid json object",request:t})}}else t.send()}};return t.apiKey=null,t.apiUrl=null,t.playerKey=null,t.keyMode="api",t.createStream=function(e,t,i){if(!this.apiUrl)return"function"==typeof i&&i({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey)return"function"==typeof i&&i({error:"no api key set",request:{responseText:"no response error"}});if("api"!==this.keyMode)return"function"==typeof i&&i({error:"wrong key mode set",request:{responseText:"no response error"}});var r=new n("POST",this.apiUrl+"/stream");r.header={Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey},r.onSuccess=t,r.onError=i,"object"==typeof e&&"function"==typeof e.push&&e.length>0&&("string"==typeof e[0]||e[0]instanceof String)?r.Send({tags:e}):r.Send()},t.getStream=function(e,t,i){if(!this.apiUrl)return"function"==typeof i&&i({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey&&"api"===this.keyMode)return"function"==typeof i&&i({error:"no api key set",request:{responseText:"no response error"}});var r=new n("GET",this.apiUrl+"/stream/"+e);r.header="api"===this.keyMode&&this.apiKey?{Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey}:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},r.onSuccess=t,r.onError=i,r.Send()},t.getStreams=function(e,t,i){if(!this.apiUrl)return"function"==typeof i&&i({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey&&"api"===this.keyMode)return"function"==typeof i&&i({error:"no api key set",request:{responseText:"no response error"}});if(!this.playerKey&&"player"===this.keyMode)return"function"==typeof i&&i({error:"no player key set",request:{responseText:"no response error"}});var r=new n("GET",this.apiUrl+"/stream/"+streamId),a=this.apiUrl+"/stream";if(e instanceof BintuStreamFilter){if(0===e.tags.length&&"player"===this.keyMode)return"function"==typeof i&&i({error:"no tags set",request:{responseText:"no response error"}});a+=e.getQueryString()}var r=new n("GET",a);r.header="api"===this.keyMode?{Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey}:{Accept:"application/json","Content-Type":"application/json","X-BINTU-PLAYERKEY":this.playerKey},r.onSuccess=t,r.onError=i,r.Send()},t.tagStream=function(e,t,i,r){if(!this.apiUrl)return"function"==typeof r&&r({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey)return"function"==typeof r&&r({error:"no api key set",request:{responseText:"no response error"}});if("api"!==this.keyMode)return"function"==typeof r&&r({error:"wrong key mode set",request:{responseText:"no response error"}});if(!e)return"function"==typeof r&&r({error:"no stream id set"});var a=new n("PUT",this.apiUrl+"/stream/"+e+"/tag");a.header={Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey},a.onSuccess=i,a.onError=r,"object"==typeof t&&"function"==typeof t.push&&t.length>0&&("string"==typeof t[0]||t[0]instanceof String)?a.Send({tags:t}):a.Send()},e}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";function e(){this.state=this.setState(e.STATE.ALL),this.tags=[]}var t=e.prototype;return e.STATE=Object.create({LIVE:"live",CREATED:"created",ENDED:"ended",ALL:null}),t.setState=function(t){var n=void 0;for(var i in e.STATE)e.STATE[i]===t&&(n=e.STATE[i]);if("undefined"==typeof n)throw new Error("The param 'state' must be of type 'BintuStreamFilter.STATE'");return this.state=n,this},t.addTag=function(e){if(!(e.length>0&&("string"==typeof e||e instanceof String)))throw new Error("The param 'tag' must be of type 'string' and also may not be empty string.");return this.tags.push(e),this.tags=this._reduceDuplicates(this.tags),this},t.addTags=function(e){if("object"!=typeof e||"function"!=typeof e.push||!(0===e.length||e.length>0&&("string"==typeof e[0]||e[0]instanceof String)))throw new Error("The param 'tags' must be of type 'string array'");return this.tags=this.tags.concat(e),this.tags=this._reduceDuplicates(this.tags),this},t.getQueryString=function(){var e="";if("object"==typeof this.tags&&"function"==typeof this.tags.push&&this.tags.length>0)for(var t=0;t<this.tags.length;t+=1)"string"==typeof this.tags[t]&&(e+=0===t?"?":"&",e+="tags[]="+this.tags[t]);return"string"==typeof this.state&&this.state.length>0&&(e+=e.indexOf("?")===-1?"?":"&",e+="state="+this.state),e},t._reduceDuplicates=function(e){if("object"!=typeof e||"function"!=typeof e.push||!(0===e.length||e.length>0&&("string"==typeof e[0]||e[0]instanceof String)))throw new Error("The param 'tags' must be of type 'string array'");return e.reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[])},e}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e,t,n){function i(){for(var n in t)t.hasOwnProperty(n)&&e.on(t[n],a)}function r(){for(var n in t)t.hasOwnProperty(n)&&e.off(t[n],a)}function a(e){n.emit(e.name,e);
}return i(),{destroy:r}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(77),n(80),n(78),n(79),n(14),n(27),n(76),n(84),n(5),n(74),n(85),n(184)],r=function(e,t,n,i,r,a,o,s,u,d,c,l){"use strict";function f(t){c.validatePlayerDivId(t),this.version=s.CORE,console.debug("NanoCore api version: "+this.version),this.type="default",this.id=Math.round(1e11*Math.random()).toString(),this._playerDivId=t,this._dummyPlayer=new e(this._playerDivId),this._realPlayer=this._dummyPlayer}var E=f.prototype=Object.create(e.prototype);return E.setup=function(e){return new l(function(n,i){var o=e&&e.events&&e.events.onError?e.events.onError:null,s=function(e){e.code||(e.code=u.SETUP.EXCEPTION),e.message||(e.message="An unknown error occured during setup.");var t={name:"Error",data:{code:e.code,message:e.message},player:this._playerDivId,id:this.id,version:this.version,state:a.IDLE};o&&this.on(t.name,o),this.emit(t.name,t),i(e)}.bind(this),c=function(e){n(e)};try{this._realPlayer&&this._realPlayer!==this._dummyPlayer&&(this._realPlayer.destroy(),this._realPlayer=this._dummyPlayer),t.create(this._playerDivId,e).then(function(t){this.version=t.version,this.type=t.type,this._realPlayer=t,this._realPlayer.id=this.id,this._propagator=d.create(t,r,this),this._realPlayer.setup(e).then(function(e){window.onunload=function(e){this._realPlayer.destroy()}.bind(this),c(e)}.bind(this),s)}.bind(this),function(e){s(e)})}catch(e){s(e)}}.bind(this))},E.destroy=function(){this._realPlayer.destroy()},E.play=function(){this._realPlayer.play()},E.pause=function(){this._realPlayer.pause()},E.mute=function(){this._realPlayer.mute()},E.unmute=function(){this._realPlayer.unmute()},E.setVolume=function(e){this._realPlayer.setVolume(e)},E.updateSource=function(e,t){return this._realPlayer.updateSource(e,t)},E.switchStream=function(e){return this._realPlayer.switchStream(e)},E.setAdaption=function(e){this._realPlayer.setAdaption(e)},f.events=r,f.states=a,f.emptyConfig=n,f.validConfig=i,f.pauseReasons=o,f.errorCodes=u,f.version=s.CORE,f.capabilities=t.capabilities,f}.apply(t,i),/**
	 * @license
	 * nanoStream H5Live Player Core 4.4.3
	 * Build from Wed May 20 2020 14:27:43 GMT+0200 (GMT+02:00)
	 * Copyright (c) 2020 nanocosmos IT GmbH. All rights reserved.
	 * http://www.nanocosmos.de
	 * sales@nanocosmos.de
	 *
	 * LEGAL NOTICE:
	 * This material is subject to the terms and conditions defined in
	 * separate license conditions ('LICENSE.txt')
	 * All information contained herein is, and remains the property
	 * of nanocosmos GmbH and its suppliers if any. The intellectual and technical concepts
	 * contained herein are proprietary to nanocosmos GmbH, and are protected by trade secret
	 * or copyright law. Dissemination of this information or reproduction of this material
	 * is strictly forbidden unless prior written permission is obtained from nanocosmos.
	 * All modifications will remain property of nanocosmos.
	 */
!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({NORMAL:"normal",BUFFER:"buffer",CONNECTION_CLOSE:"connectionclose",SERVER_NOT_FOUND:"servernotfound",STREAM_NOT_FOUND:"streamnotfound",INTERACTION_REQUIRED:"interactionrequired",PLAYBACK_SUSPENDED:"playbacksuspended",PLAYBACK_ERROR:"playbackerror",RECONNECTION_IMMINENT:"reconnectionimminent",DESTROY:"destroy",PLAYBACK_RESTART:"playbackrestart",VISIBILITY_HIDDEN:"visibilityhidden",NOT_ENOUGH_DATA:"notenoughdata",SOURCE_STREAM_STOPPED:"sourcestreamstopped"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(11)],r=function(e){"use strict";function t(){this.version=void 0,this.type=void 0}var n=t.prototype=Object.create(e.prototype);return n.setup=function(){throw new Error('"setup" must be implemented or player not initialized')},n.destroy=function(){throw new Error('"destroy" must be implemented or player not initialized')},n.play=function(){throw new Error('"play" must be implemented or player not initialized by call setup')},n.pause=function(){throw new Error('"pause" must be implemented or player not initialized by call setup')},n.mute=function(){throw new Error('"mute" must be implemented or player not initialized by call setup')},n.unmute=function(){throw new Error('"unmute" must be implemented or player not initialized by call setup')},n.setVolume=function(){throw new Error('"setVolume" must be implemented or player not initialized by call setup')},n.updateSource=function(){throw new Error('"updateSource" must be implemented or player not initialized by call setup')},n.switchStream=function(){throw new Error('"switchStream" must be implemented or player not initialized by call setup')},n.setAdaption=function(){throw new Error('"setAdaption" must be implemented or player not initialized by call setup')},t.isSupported=function(){return!1},t.supportedTechniques=[],t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){return{playback:{autoplay:!0,automute:!1,muted:!1,metadata:!1,forceTech:"",flashplayer:"",videoId:"",keepConnection:!1,allowSafariHlsFallback:!1,reconnect:{minDelay:2,maxDelay:10,delaySteps:10,maxRetries:10},timeouts:{loading:20,buffering:20,connecting:5}},source:{hls:"",h5live:{server:{websocket:"",progressive:"",hls:""},token:"",rtmp:{url:"",streamname:""},security:{token:"",expires:"",options:"",tag:""},params:{}},bintu:{},startIndex:0,options:{switch:{},adaption:{}},entries:[]},events:{onReady:void 0,onPlay:void 0,onPause:void 0,onLoading:void 0,onStartBuffering:void 0,onStopBuffering:void 0,onError:void 0,onMetaData:void 0,onStats:void 0,onMute:void 0,onUnmute:void 0,onVolumeChange:void 0,onStreamInfo:void 0,onStreamInfoUpdate:void 0,onWarning:void 0,onDestroy:void 0,onUpdateSourceInit:void 0,onUpdateSourceSuccess:void 0,onUpdateSourceFail:void 0,onUpdateSourceAbort:void 0,onSwitchStreamInit:void 0,onSwitchStreamSuccess:void 0,onSwitchStreamFail:void 0,onSwitchStreamAbort:void 0},tweaks:{buffer:{min:void 0,start:void 0,max:void 0,target:void 0,limit:void 0},bufferDynamic:{offsetThreshold:void 0,offsetStep:void 0,cooldownTime:void 0}}}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){return{source:{hls:"string",h5live:{server:{websocket:"string",progressive:"string",hls:"string"},token:"string",rtmp:{url:"string",streamname:"string"},params:"object",security:{token:"string",expires:"string",options:"string",tag:"string"}},bintu:"object",startIndex:"number",options:"object",entries:"object"},playback:{autoplay:"boolean",automute:"boolean",muted:"boolean",forceTech:"string",metadata:"boolean",flashplayer:"string",videoId:"*",keepConnection:"boolean",allowSafariHlsFallback:"boolean",reconnect:{minDelay:"number",maxDelay:"number",delaySteps:"number",maxRetries:"number"},timeouts:{loading:"number",buffering:"number",connecting:"number"}},events:{onReady:"function",onPlay:"function",onPause:"function",onLoading:"function",onStartBuffering:"function",onStopBuffering:"function",onError:"function",onMetaData:"function",onStats:"function",onMute:"function",onUnmute:"function",onVolumeChange:"function",onStreamInfo:"function",onStreamInfoUpdate:"function",onWarning:"function",onDestroy:"function",onUpdateSourceInit:"function",onUpdateSourceSuccess:"function",onUpdateSourceFail:"function",onUpdateSourceAbort:"function",onSwitchStreamInit:"function",onSwitchStreamSuccess:"function",onSwitchStreamFail:"function",onSwitchStreamAbort:"function"},tweaks:{buffer:{max:"number",min:"number",start:"number",target:"number",limit:"number"},bufferDynamic:{offsetThreshold:"number",offsetStep:"number",cooldownTime:"number"}}}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(9),n(3),n(81),n(183),n(86),n(5)],r=function(e,t,n,i,r,a){function o(e){var n=e.filter(function(e){return e.isSupported()});if(!n.length)throw new t(i.CLIENT_NOT_SUPPORTED,a.SETUP.CLIENT_NOT_SUPPORTED);return n}function s(e,n){var o={};o[r.H5LIVE_WSS]="h5live",o[r.H5LIVE_HLS]="h5live",o[r.FLASH]="h5live",o[r.NATIVE]="hls";var s=[],u=e.filter(function(e){var t=!1;return e.supportedTechniques.forEach(function(e){s.push(o[e]),t===!1&&(t=n.hasOwnProperty("source")&&n.source.hasOwnProperty(o[e]))}),t});if(!u.length)throw new t(i.SOURCE_NOT_SUPPORTED,a.SETUP.SOURCE_NOT_SUPPORTED);return u}function u(e,n){var r=[],o=function(e,t){return e.indexOf(t)!==-1||t.indexOf(e)!==-1},s=e.filter(function(e){r=r.concat(e.supportedTechniques);var t=!1;return e.supportedTechniques.forEach(function(e){t===!1&&(t=!n.playback.forceTech||o(e,n.playback.forceTech))}),t});if(!s.length)throw new t(i.FORCE_NOT_SUPPORTED.replace("$tech$",n.playback.forceTech),a.SETUP.FORCE_NOT_SUPPORTED);return s}function d(e,t){var n=e[0];return new n(t)}function c(e,t){return new Promise(function(i,r){var a=n;try{a=o(a),a=s(a,t),a=u(a,t),i(d(a,e))}catch(e){r(e)}})}function l(){var e=[];return n.filter(function(e){return e.isSupported()}).forEach(function(t){e=e.concat(t.supportedTechniques)}),e}return{create:c,capabilities:l()}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(82),n(82),n(178),n(179)],r=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(77),n(28),n(83),n(84),n(9),n(10),n(2),n(11),n(53),n(85),n(12),n(3),n(78),n(79),n(87),n(88),n(27),n(89),n(14),n(5),n(90),n(86),n(76),n(91),n(96),n(97),n(99),n(100),n(133),n(147),n(92),n(94),n(93),n(95),n(102),n(103)],r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,E,p,h,m,_,T,S,g,y,A,v,b,I,R,O,N,C,U,P,w,D,L,M){"use strict";function x(e){d.validatePlayerDivId(e),this._setBaseValues(e)}var F=a.log;x.getSupportedTechniques=function(){var e=[];return c.isH5LiveKnownUnsupported||(c.hasMediaSource&&e.push(y.H5LIVE_WSS),(c.mustUseHLS||c.canUseHLS)&&e.push(y.H5LIVE_HLS)),e},x.supportedTechniques=x.getSupportedTechniques(),x.isSupported=function(){return x.supportedTechniques.length>0};var k=x.prototype=Object.create(e.prototype);return k._setBaseValues=function(e){this.version=i.CORE,this.type="h5live",this.networkState=this.NETWORK_STATE.UNINITIALIZED,this._info=r,this.config=f.create(),this._playerDivId="",this._playing=!1,this._updating=!1,this._serverInfo=null,this._pauseReason="",this._playerDivId=e,this._mediaElementIds=[],this._componentEmitter=new s,this._componentListeners={logic:[{type:P.SERVER_INFO,listener:this._onServerInfo.bind(this)},{type:P.NO_KEEP_CONNECTION,listener:this._onNoKeepConnection.bind(this)},{type:P.MIME_TYPE_UNSUPPORTED,listener:this._onMimeTypeUnsupported.bind(this)},{type:P.ERROR,listener:this._onLogicError.bind(this)}],network:[{type:D.CONNECTING,listener:this._onConnectionConnecting.bind(this)},{type:D.CONNECTED,listener:this._onConnectionOpen.bind(this)},{type:D.DISCONNECTED,listener:this._onConnectionClosed.bind(this)},{type:D.RECONNECTING,listener:this._onConnectionReconnecting.bind(this)},{type:D.RECONNECTION_IMMINENT,listener:this._onConnectionReconnectionImminent.bind(this)},{type:D.DESTROYED,listener:this._onConnectionDestroyed.bind(this)},{type:D.INITIALIZATION_ERROR,listener:this._onConnectionInitializationError.bind(this)},{type:D.CONNECTION_ERROR,listener:this._onConnectionError.bind(this)},{type:D.ERROR,listener:this._onConnectionError.bind(this)},{type:D.WARNING,listener:this._onConnectionWarning.bind(this)},{type:D.STATE_CHANGE,listener:this._onConnectionStateChange.bind(this)}],media:[{type:w.ERROR,listener:this._onError.bind(this)},{type:w.PLAYBACK_ERROR,listener:this._onMediaError.bind(this)},{type:w.PLAYBACK_STARTED,listener:this._onMediaPlaying.bind(this)},{type:w.PLAYBACK_SUSPENDED,listener:this._onMediaSuspended.bind(this)},{type:w.BUFFERING,listener:this._onMediaBuffering.bind(this)},{type:w.PLAY_START_ERROR,listener:this._onPlayStartError.bind(this)},{type:w.UPDATE_SOURCE_TIMEOUT,listener:this._onUpdateSourceTimeout.bind(this)}]},this._setState(this.STATE.IDLE)},k._baseSetup=function(e,i){var r=this._checkSource(i.source);i.source=r;var a=o.check(i,E.create());o.merge(i,this.config),o.clean(this.config);var s;if(s=d.validateConfig(e,this.config))return s;this._setListeners(this.config.events,this),a.forEach(function(e){this._emitWarning(e)}.bind(this));var u=document.getElementById(this._playerDivId);this._metaDataEnabled=this.config.playback.metadata;var c=this.config.source.entries[this.config.source.startIndex].h5live.params,l=this.config.source.entries[this.config.source.startIndex].h5live.rtmp,f=c&&c.url?c.url:l&&l.url?l.url:null,p=c&&c.stream?c.stream:l&&l.streamname?l.streamname:null;f&&p?this.config.url=f+"/"+p:this.config.url="",this.config.type=this.type,this.config.id=this.id,this._components={network:N.create(this._componentEmitter),media:C.create(this._componentEmitter),logic:O.create(this._componentEmitter),performance:I.create(this._componentEmitter,this._playerDivId),propagator:b.create(this._componentEmitter),error:R.create(this._componentEmitter),state:v.create(this._componentEmitter)};for(var h in this._components)this._componentListeners.hasOwnProperty(h)&&this._componentListeners[h].length&&t.add({target:this._componentEmitter,listeners:this._componentListeners[h]});for(var m in T)(this._outwardEvents||(this._outwardEvents=[]))&&this._outwardEvents.push({from:T[m],to:T[m]}),(this._inwardEvents||(this._inwardEvents=[]))&&this._inwardEvents.push({from:T[m],to:M[m]});return this._outwardTranslator=n.create(this._componentEmitter,this,this._outwardEvents),this._inwardTranslator=n.create(this,this._componentEmitter,this._inwardEvents),this._emitConfig(),this._setupVideoElement(u),s},k.setup=function(e){return new Promise(function(t,n){try{var i=this._baseSetup(x.supportedTechniques[0],e);i?n(i):(setTimeout(function(){this._setState(this.STATE.READY),this.emit(T.READY,{config:this.config}),this.config.playback.autoplay&&this.play()}.bind(this),20),t(this.config))}catch(e){n(e)}}.bind(this))},k._destroy=function(){this._setState(this.STATE.DESTROYING),this._playing&&this.pause(this.state),this.emit(T.DESTROY),this._outwardTranslator&&this._outwardTranslator.destroy(),this._outwardTranslator=null,this._inwardTranslator&&this._inwardTranslator.destroy(),this._inwardTranslator=null;for(var e in this._components)this._components.hasOwnProperty(e)&&(this._components[e].destroy(),delete this._components[e]);for(var n in this._componentListeners)this._componentListeners.hasOwnProperty(n)&&this._componentListeners[n].length&&t.remove({target:this._componentEmitter,listeners:this._componentListeners[n]});this.removeAllListeners()},k.destroy=k._destroy,k._emitConfig=function(){this._componentEmitter.emit(U.CONFIG,{config:u.copy(this.config)})},k._setState=function(e){var t=arguments.length>1?arguments[1]:{};this.state=e,t.state=e,this._componentEmitter.emit(P.STATE_CHANGE,t)},k._debug=function(e,t){F("nanoplayer ("+this._playerDivId+"): "+e,t)},k._setListeners=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&"function"==typeof e[n]){var i=n.replace("on",""),r=e[n];t.on(i,r)}},k._setupVideoElement=function(e){var t="h5live-"+this._playerDivId;if(this.config.playback.videoId){if("string"==typeof this.config.playback.videoId)this._mediaElementIds.push(this.config.playback.videoId);else if(Array.isArray(this.config.playback.videoId))for(var n=0;n<this.config.playback.videoId.length&&(this._mediaElementIds.push("string"==typeof this.config.playback.videoId[n]?this.config.playback.videoId[n]:t+(n?"-"+n:"")),1!==this.config.source.entries.length&&(c.mustUseHLS||c.canUseHLS&&this.config.playback.allowSafariHlsFallback));n+=1);else this._mediaElementIds.push(t);this.config.source.entries.length>1&&(c.mustUseHLS||c.canUseHLS&&this.config.playback.allowSafariHlsFallback)&&2!==this._mediaElementIds.length&&(this._mediaElementIds.push(t+"-1"),this._emitWarning("Two external video elements should be used for hls playback with multi stream configuration. Please pass two element ids within a string array."))}else this._mediaElementIds.push(t),this.config.source.entries.length>1&&(c.mustUseHLS||c.canUseHLS&&this.config.playback.allowSafariHlsFallback)&&this._mediaElementIds.push(t+"-1");this._componentEmitter.emit(U.CREATE_VIDEO,{elementIds:this._mediaElementIds,container:e})},k._onLogicError=function(e){switch(e.data.code){case S.PLAYER.VISIBILITY_HIDDEN:this._setState(m.VISIBILITY_HIDDEN);break;case S.STREAM.NOT_ENOUGH_DATA:this._setState(m.NOT_ENOUGH_DATA);break;case S.STREAM.SOURCE_STOPPED:this._setState(m.SOURCE_STREAM_STOPPED);break;case S.MEDIA.SOURCE_ENDED:this._setState(m.PLAYBACK_ERROR)}this.emit(T.ERROR,e.data),this.pause(this.state)},k._maybePlayOnUpdateOrSwitch=function(e){!(c.mustUseHLS||c.canUseHLS&&this.config.playback.allowSafariHlsFallback)||this.state!==this.STATE.PLAYING&&this.state!==this.STATE.LOADING&&this.state!==this.STATE.BUFFERING?e.data.options.forcePlay&&[this.STATE.READY,this.STATE.PAUSED].indexOf(this.state)!==-1&&setTimeout(this.play.bind(this),200):(this._setState(m.PLAYBACK_RESTARTING),this.pause(this.state),setTimeout(this.play.bind(this),200))},k._onPlayStartError=function(e){switch(this._debug(e.data.error.name+": "+e.data.error.message,1),e.data.error.name){case"NotAllowedError":e.data.automuted?this._emitWarning("Unmuted autoplay failed by autoplay policy, but 'automute' is enabled. Try to play muted."):(this._setState(this.STATE.PLAYBACK_NOT_STARTED),this._emitError(S.PLAYER.INTERACTION_REQUIRED,"Playback must be initialized by user gesture."))}},k._onError=function(e){if(this.state!==this.STATE.PAUSING&&this.state!==this.STATE.PAUSED){var t="",n=e.data.code;switch(n){case MediaError.MEDIA_ERR_ABORTED:t="A fetching process of the media aborted by user";break;case MediaError.MEDIA_ERR_NETWORK:t="An error occurred when downloading media";break;case MediaError.MEDIA_ERR_DECODE:t="An error occurred when decoding media";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:t="The received audio/video is not supported";break;default:t="An unknown media error occurred"}this._debug('error media with state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',3),this._debug("error message: "+t,3),n===MediaError.MEDIA_ERR_DECODE&&this.state!==this.STATE.LOADING&&setTimeout(this.play.bind(this),1e3),this._setState(this.STATE.PLAYBACK_ERROR),this._emitError(n+3e3,t)}},k._preparePlay=function(e){this._setState(this.STATE.LOADING,{connectDelay:e}),this.emit(T.LOADING,{connectDelay:e}),setTimeout(function(){this.state===this.STATE.LOADING&&(this._componentEmitter.emit(L.PLAY),this._componentEmitter.emit(U.PLAY,{external:!0}))}.bind(this),e)},k.play=function(){var e=arguments.length?arguments[0]:0;F("nanoplayer ("+this._playerDivId+"): play in state "+this.state,1),this.state<this.STATE.READY?this._emitError(S.PLAYER.NOT_CONFIGURED,"Could not play because player has not been configured."):this.state===this.STATE.READY||this.state===this.STATE.PAUSED?(this._playing=!0,this._preparePlay(e)):this.state===this.STATE.PAUSING&&(F("nanoplayer ("+this._playerDivId+"play in PAUSING state, setting flag to resume"),this._resumeOnPause=!0)},k._onConnectionInitializationError=function(e){this._debug('error init connection with state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',2),this._setState(this.STATE.CONNECTION_ERROR),this._emitError(e.data.code,e.data.message)},k._onConnectionError=function(e){this._debug('error connection with state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',2),this._setState(this.STATE.CONNECTION_ERROR),this._emitError(e.data.code,e.data.message)},k._onConnectionConnecting=function(e){this._debug("connecting",1)},k._onConnectionStateChange=function(e){this.networkState=e.data.connectionState},k._onConnectionWarning=function(e){var t="Connection warning!",n=e?e.data:void 0;n&&n.message&&(t+=" "+n.message),n&&n.code&&(t+=" (code:"+n.code+")"),this._emitWarning(t)},k._onConnectionOpen=function(e){e.data.count?this._debug("connection open after "+e.data.count+" reconnect tries",1):this._debug("connection open",1)},k._onConnectionClosed=function(e){this._debug("connection closed",1),this._debug('closed connection with state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',2),this._emitError(e.data.code,e.data.message)},k._onConnectionDestroyed=function(e){this._debug("connection destroyed"+(e.data.silent?", but silent":""),1),this.state===this.STATE.READY||e.data.silent||this.pause(this.state)},k._onConnectionReconnecting=function(e){this._debug("reconnect attempt "+e.data.count+" started",1)},k._onConnectionReconnectionImminent=function(e){var t=e.data.code;this._debug("connection "+e.data.count+(e.data.count>1?" times":" time")+" unexpectedly closed with code "+t+", but a reconnect will be prepared",1),this._debug("reconnect attempt "+e.data.count+" starts in "+Math.round(e.data.delay)+" ms",1),("iOS"!==r.os||"iOS"===r.os&&e.data.count>1)&&this._emitWarning("Connection error: closed "+e.data.count+(e.data.count>1?" times":" time")+" unexpectedly with code "+t+", but a reconnect will be prepared in "+(e.data.delay/1e3).toFixed(3)+" s"),this._playing&&"iOS"!==r.os&&(this._setState(this.STATE.RECONNECTION_IMMINENT),this.pause(this.state),this.play(e.data.delay))},k._onServerInfo=function(e){this._debug("onServerInfo",2);try{this._serverInfo=e.data.onServerInfo;var t=JSON.stringify(e.data);this._debug(""+t,3)}catch(e){}},k._onNoKeepConnection=function(e){this._debug("onNoKeepConnection",2),this._emitWarning(e.data.message)},k._onMimeTypeUnsupported=function(){this._setState(this.STATE.PLAYBACK_ERROR),this._emitError(S.MEDIA.NOT_SUPPORTED,"The received audio/video is not supported")},k._onMediaError=function(e){this._setState(this.STATE.PLAYBACK_ERROR),this._emitError(S.PLAYER.PLAYBACK_ERROR,e.data)},k._onMediaSuspended=function(){r.mobile?(this._setState(this.STATE.PLAYBACK_SUSPENDED),this._emitError(S.PLAYER.PLAYBACK_SUSPENDED,"Playback suspended by external reason.")):(this._setState(m.PLAYBACK_RESTARTING),this.pause(this.state),setTimeout(this.play.bind(this),0))},k._emit=k.emit,k.emit=function(e,t){var n={};t&&t.name&&t.data?n=t:t?(n.data=t,n.name=e||"unknown"):(n.data={},n.name=e||"unknown"),n.player=this._playerDivId,n.id=this.id,n.version=this.version,n.state=this.state,"Error"===e&&n.data.code&&n.data.message&&this._debug("error "+n.data.code+" "+n.data.message,1);var i=u.copy(n);i.name="public."+i.name.substr(0,1).toLowerCase()+i.name.substr(1),this._componentEmitter.emit(i.name,i),this._emit(n.name,n)},k._emitError=function(e,t){this.emit(T.ERROR,{code:e,message:t}),this.pause(this.state)},k._emitWarning=function(e){this.emit(T.WARNING,{message:e})},k._getPauseReason=function(e){var t="";if(e){var n=this.networkState!==this.NETWORK_STATE.OPEN&&this.networkState!==this.NETWORK_STATE.UNINITIALIZED;switch(e){case this.STATE.READY:t=A.SERVER_NOT_FOUND;break;case this.STATE.LOADING:t=n?A.CONNECTION_CLOSE:A.STREAM_NOT_FOUND;break;case this.STATE.BUFFERING:t=n?A.CONNECTION_CLOSE:A.BUFFER;break;case this.STATE.UNKNOWN:t=n?A.CONNECTION_CLOSE:A.UNKNOWN;break;case this.STATE.PLAYING:t=n?A.CONNECTION_CLOSE:A.NORMAL;break;case this.STATE.PLAYBACK_NOT_STARTED:t=A.INTERACTION_REQUIRED;break;case this.STATE.PLAYBACK_SUSPENDED:t=A.PLAYBACK_SUSPENDED;break;case this.STATE.PLAYBACK_ERROR:t=A.PLAYBACK_ERROR;break;case this.STATE.RECONNECTION_IMMINENT:t=A.RECONNECTION_IMMINENT;break;case this.STATE.CONNECTION_ERROR:t=A.CONNECTION_CLOSE;break;case this.STATE.DESTROYING:t=A.DESTROY;break;case this.STATE.PLAYBACK_RESTARTING:t=A.PLAYBACK_RESTART;break;case this.STATE.VISIBILITY_HIDDEN:t=A.VISIBILITY_HIDDEN;break;case this.STATE.NOT_ENOUGH_DATA:t=A.NOT_ENOUGH_DATA;break;case this.STATE.SOURCE_STREAM_STOPPED:t=A.SOURCE_STREAM_STOPPED;break;default:t=A.NORMAL}}else t=A.NORMAL;return t},k._triggerPause=function(){return this.state===this.STATE.PAUSED?void F("nanoplayer ("+this._playerDivId+"): trigger pause but already in state paused"):(F("nanoplayer ("+this._playerDivId+'): trigger pause with reason "'+this._pauseReason+'", state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',3),this._setState(this.STATE.PAUSED,{reason:this._pauseReason}),this.emit(T.PAUSE,{reason:this._pauseReason}),void(this._resumeOnPause&&(this._resumeOnPause=!1,this.play())))},k.pause=function(){var e=arguments.length?arguments[0]:0;F("nanoplayer ("+this._playerDivId+"): pause in state "+this.state,2),this.state<this.STATE.READY?this._emitError(S.PLAYER.NOT_PLAYING,"Could not pause because player was not in playing state before."):this.state!==this.STATE.PAUSED&&this.state!==this.STATE.PAUSING&&(this._pauseReason=this._getPauseReason(e),this._setState(this.STATE.PAUSING),this._playing=!1,this._resumeOnPause=!1,this._componentEmitter.emit(L.PAUSE),this._componentEmitter.emit(U.PAUSE),this._triggerPause())},k.mute=function(){this._componentEmitter.emit(U.MUTE)},k.unmute=function(){this._componentEmitter.emit(U.UNMUTE)},k.setVolume=function(e){this._componentEmitter.emit(U.SET_VOLUME,{volume:e})},k.updateSource=function(e,t){return new Promise(function(t,n){if(this._updating)n(new l("Another 'updateSource' call is pending."));else{this._updating=!0;var i=function(e,t){this._updating=!1,e.apply(null,t)}.bind(this);try{var r,a=this._checkSource(e);if(this.config.source=a,o.clean(this.config.source),r=d.validateConfig(x.supportedTechniques[0],this.config))r.message.replace("create","update"),this._emitError(r.code,r.message),i(n,[r]);else{var s=this.config.source.entries[this.config.source.startIndex].h5live.params,c=this.config.source.entries[this.config.source.startIndex].h5live.rtmp,f=s&&s.url?s.url:c&&c.url?c.url:null,E=s&&s.stream?s.stream:c&&c.streamname?c.streamname:null;f&&E?this.config.url=f+"/"+E:this.config.url="",delete this.config.source.h5live,this._componentEmitter.emit(U.UPDATE_SOURCE,{source:u.copy(this.config.source),options:u.copy(this.config.source.options.switch)}),i(t,[this.config])}}catch(e){i(n,[new l(e.message,e.code)])}}}.bind(this))},k.switchStream=function(e){return new Promise(function(t,n){if(isNaN(e)||e<0||e>=this.config.source.entries.length){var i=new l(g.PLAYER.INVALID_ENTRY_INDEX,S.PLAYER.INVALID_ENTRY_INDEX);this.config.source.options.switch.pauseOnError&&this._emitError(i.code,i.message),n(i)}else this._componentEmitter.emit(U.SWITCH_STREAM,{index:e}),t(u.copy(this.config))}.bind(this))},k.setAdaption=function(e){var t=!0;e&&e.rule||(t=!1,this._emitWarning("The adaption object is invalid. The adaption will not be updated.")),["deviationOfMean","simpleTimeInterval"].indexOf(e.rule)!==-1?this.config.source.entries.length<2&&(t=!1,this._emitWarning("Only one entry. The adaption will not be updated.")):["none"].indexOf(e.rule)===-1&&(t=!1,this._emitWarning("The adaption rule is not valid. Valid rules are 'deviationOfMean', 'simpleTimeInterval' (test) and 'none' (disable). The adaption will not be updated.")),t&&this._componentEmitter.emit(U.SET_ADAPTION,{adaption:e})},k._parseUrl=function(e){var t={url:"",streamname:""},n=e.lastIndexOf("/"),i=e.substr(0,n),r=e.substr(n,e-n);return t.url=i,t.streamname=r,t},k._getState=function(){return u.findPropertyByValue(this.STATE,this.state)},k._getNetworkState=function(){return u.findPropertyByValue(this.NETWORK_STATE,this.networkState)},k._onMediaPlaying=function(e){var t=this.state;this._setState(m.PLAYING),this.emit(t===m.BUFFERING?T.STOP_BUFFERING:T.PLAY,e.data),this._debug("state is PLAYING")},k._onMediaBuffering=function(){this._setState(m.BUFFERING),this.emit(T.START_BUFFERING)},k._checkSource=function(e){var t,n={method:"server",pauseOnError:!1,forcePlay:!0,fastStart:!1,timeout:20,tag:""},i={incTiming:!1,timestampReset:!1},r={rule:"none"};if(e&&e.entries&&e.entries.length>0)for(var a=0;a<e.entries.length;a+=1){var s=e.entries[a];if(t=o.check(s,h.create()),s.index!==a){t.push("Configuration warning. The config entries property 'index' is not configured properly.");break}}else{var s=p.create();o.merge(e,s),e.entries=[s],e.startIndex=0,e.options&&(e.options.adaption=r)}if((void 0===e.startIndex||isNaN(e.startIndex)||e.startIndex<0||e.startIndex>e.entries.length-1)&&(t.push("Configuration warning. The config property 'startIndex' is not configured properly."),e.startIndex=f.create().source.startIndex),e.options){if(e.options.switch){for(var u in n)if(e.options.switch.hasOwnProperty(u)&&typeof e.options.switch[u]==typeof n[u])switch(u){case"method":["server","client"].indexOf(e.options.switch[u])!==-1?n[u]=e.options.switch[u]:this._emitWarning("The switch method is not valid. Valid methods are 'server' and 'client'. The default method 'server' will be set.");break;case"timeout":e.options.switch[u]>=5&&e.options.switch[u]<=30?n[u]=e.options.switch[u]:this._emitWarning("The switch timeout value is not in the valid range. the valid range is between 5 and 30. The default value 10 will be set.");break;default:n[u]=e.options.switch[u]}e.options.switch=n;for(var u in i)e.options.switch[u]=i[u]}else e.options.switch=n;if(e.options.adaption){for(var u in r)if(e.options.adaption.hasOwnProperty(u)&&typeof e.options.adaption[u]==typeof r[u])switch(u){case"rule":["deviationOfMean","simpleTimeInterval","none"].indexOf(e.options.adaption[u])!==-1?e.entries.length>1&&(r[u]=e.options.adaption[u]):this._emitWarning("The adaption rule is not valid. Valid rules are 'deviationOfMean', 'simpleTimeInterval' (test) and 'none' (disable). The default rule 'none' will be set.");break;default:r[u]=e.options.adaption[u]}e.options.adaption=r}else e.options.adaption=r}else e.options={switch:n,adaption:r};return e.bintu&&1===e.entries.length&&(e.h5live=e.entries[0].h5live),t&&t.length&&t.forEach(function(e){this._emitWarning(e+"  playback with multiple entries can't be used.")}.bind(this)),e},k._onUpdateSourceTimeout=function(e){this._debug("updateSource timeout",1),this._emitError(e.data.code,e.data.message)},k.STATE=m,k.NETWORK_STATE=_,k.PAUSE_REASON=A,x}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(28)],r=function(e){function t(t,n,i){function r(){s=[],i.forEach(function(e){s.push({type:e.from,listener:o}),u[e.from]||(u[e.from]=[]),u[e.from].push(e.to)}),e.add({target:t,listeners:s})}function a(){e.remove({target:t,listeners:s}),s=null,u=null}function o(e){u[e.name]&&u[e.name].forEach(function(t){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);n.emit(t,i)})}var s,u={};return r(),{destroy:a}}return{create:t}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return{CORE:"4.4.3"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(3),n(4),n(86),n(5)],r=function(e,t,n,i){function r(r,a){for(var o,s=!1,u=a.source.entries,d=0;d<u.length;d+=1){if(o=u[d],!o||!o.h5live){s=new e(t.CONFIG_SOURCE,i.SETUP.SOURCE_NOT_SUPPORTED);break}if(!(o.h5live.rtmp&&o.h5live.rtmp.url&&o.h5live.rtmp.streamname||o.h5live.params)){s=new e(t.CONFIG_RTMP,i.SETUP.CONFIG_RTMP);break}if(r===n.H5LIVE_WSS&&(!o.h5live.server||o.h5live.server&&!o.h5live.server.websocket)){s=new e(t.CONFIG_WSS,i.SETUP.CONFIG_WSS);break}if(r===n.H5LIVE_HLS){if(!o.h5live.server||o.h5live.server&&!o.h5live.server.hls){s=new e(t.CONFIG_HLS,i.SETUP.CONFIG_HLS);break}if(a.playback&&a.playback.metadata&&!o.h5live.server.websocket){s=new e(t.CONFIG_METADATA,i.SETUP.CONFIG_METADATA);break}}if(!(o.h5live.server&&(o.h5live.server.websocket||o.h5live.server.hls)||o.h5live.token)){s=new e(t.CONFIG_TOKEN,i.SETUP.CONFIG_TOKEN);break}}return s}function a(t){if(!("string"==typeof t||t instanceof String))throw new e('The param "playerDivId" must be of type "String".');var n=document.getElementById(t);if(!n)throw new e('The param "playerDivId" must be the id of an existing "div" element.');if("DIV"!==n.tagName)throw new e('The element with the id "'+t+'" is not a "div" element.');return!0}return{validateConfig:r,validatePlayerDivId:a}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({FLASH:"flash",NATIVE:"hls.native",H5LIVE_WSS:"h5live",H5LIVE_HLS:"h5live.hls"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){return{index:0,label:"high",tag:"high res",info:{bitrate:0,width:0,height:0,framerate:0},hls:"",h5live:{server:{websocket:"",progressive:"",hls:""},token:"",rtmp:{url:"",streamname:""},security:{token:"",expires:"",options:"",tag:""}},bintu:{}}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){return{index:"number",label:"string",tag:"string",info:{bitrate:"number",width:"number",height:"number",framerate:"number"},hls:"string",h5live:{server:{websocket:"string",progressive:"string",hls:"string"},token:"string",rtmp:{url:"string",streamname:"string"},params:"object",security:{token:"string",expires:"string",options:"string",tag:"string"}},bintu:"object"}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({UNINITIALIZED:1,CONNECTING:2,OPEN:3,CLOSING:4,CLOSED:5})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({PLAYER:{VISIBILITY_HIDDEN:"Playback failed because the player was in visibility state 'hidden' at load start.",INVALID_ENTRY_INDEX:"The given stream entry index is not valid."},STREAM:{NOT_FOUND:"The requested stream can not be found.",MEDIA_NOT_AVAILABLE:"No media available.",NOT_ENOUGH_DATA:"Not enough media data received.",SOURCE_STOPPED:"The source stream has been stopped."},MEDIA:{MEDIA_SOURCE_ENDED:"The media source extension changed the state to 'ended'."},NETWORK:{SOURCE_STREAM_STOPPED:"The requested source stream has been stopped.",SOURCE_TIMEOUT:"The source request was aborted by timeout."}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(28),n(14),n(92),n(93),n(94),n(95),n(13)],r=function(e,t,n,i,r,a,o){function s(n){function i(){e.add({target:n,listeners:c})}function a(){e.remove({target:n,listeners:c})}function s(e,t){n.emit(e,t)}function u(e){d=e.data.state,s(t.STATE_CHANGE,e.data)}var d,c=(o.create("StateMachine"),[{type:r.STATE_CHANGE,listener:u}]);return i(),{destroy:a}}return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="control.";return{BASE:e,CONNECT:e+"connect",DISCONNECT:e+"disconnect",NETWORK_PLAY:e+"networkPlay",NETWORK_PAUSE:e+"networkPause",PLAY:e+"play",PAUSE:e+"pause",MUTE:e+"mute",UNMUTE:e+"unmute",SET_VOLUME:e+"setVolume",SEEK:e+"seek",SET_RATE:e+"playbackRate",CONFIG:e+"config",CREATE_VIDEO:e+"createVideo",DESTROY_VIDEO:e+"destroyVideo",VIDEO_SOURCE:e+"videoSource",UPDATE_SOURCE:e+"updateSource",NETWORK_UPDATE_SOURCE:e+"networkUpdateSource",SWITCH_STREAM:e+"switchStream",SET_ADAPTION:e+"setAdaption"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="media.";return{BASE:e,LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",
ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",ERROR:e+"error",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange",ELEMENT_CREATED:e+"elementCreated",QUALITY_STATS:e+"qualitystats",PLAY_STATS:e+"playStats",FRAME_DROP:e+"framedrop",PLAYBACK_FINISHED:e+"playbackFinished",PLAYBACK_ERROR:e+"playbackError",PLAYBACK_STARTED:e+"playbackStarted",PLAYBACK_SUSPENDED:e+"playbackSuspended",BUFFERING:e+"buffering",PLAY_START_SUCCESS:e+"playStartSuccess",PLAY_START_ERROR:e+"playStartError",BUFFER_TWEAKS_CREATED:e+"bufferTweaksCreated",BUFFER_TWEAKS_ERROR:e+"bufferTweaksError",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden",ELEMENTS_UPDATED:e+"elementsUpdated",TIME_OFFSET:e+"timeOffset",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_TIMEOUT:e+"updateSourceTimeout"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="logic.";return{BASE:e,STATE_CHANGE:e+"stateChange",LOADING_TIMEOUT:e+"loadingTimeout",BUFFERING_TIMEOUT:e+"bufferingTimeout",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",SERVER_INFO:e+"serverInfo",STREAM_URL:e+"streamUrl",NO_KEEP_CONNECTION:e+"noKeepConnection",MIME_TYPE_UNSUPPORTED:e+"mimeTypeUnsupported",META_DATA_RECEIVED:e+"metaDataReceived",META_DATA_ERROR:e+"metaDataError",NO_SERVER_ERROR:e+"noServerError",MISSING_RTMP_ERROR:e+"missingRtmpError",STARTUP_STATS:e+"startupStats",DOCUMENT_VISIBLE:e+"documentVisible",DOCUMENT_HIDDEN:e+"documentHidden",ERROR:e+"error",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_FAIL:e+"switchStreamFail",SWITCH_STREAM_ABORT:e+"switchStreamAbort",ADAPTIVE_STATS:e+"adaptiveStats",STREAM_SWITCH:e+"streamSwitch"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="network.";return{BASE:e,CONNECTING:e+"connecting",CONNECTED:e+"connected",DISCONNECTED:e+"disconnected",RESUMING:e+"resuming",RECONNECTION_IMMINENT:e+"reconnectionImminent",RECONNECTING:e+"reconnecting",RECONNECTION_CONFIG_INVALID:e+"reconnectionConfigInvalid",CONNECTION_ERROR:e+"connectionError",INITIALIZATION_ERROR:e+"initializationError",ERROR:e+"error",WARNING:e+"warning",DESTROYED:e+"destroyed",STATE_CHANGE:e+"stateChange",META_DATA:e+"metaData",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",RAW_PACKET:e+"raw",STREAM_STATUS:e+"streamStatus",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",STREAM_QUALITY:e+"streamQuality"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(28),n(5),n(14),n(92),n(93),n(94),n(95),n(13),n(53)],r=function(e,t,n,i,r,a,o,s,u){function d(i){function d(){e.add({target:i,listeners:D}),L.forEach(function(e){i.addListener(e.event,f)})}function c(){e.remove({target:i,listeners:D}),L.forEach(function(e){i.removeListener(e.event,f)})}function l(e,t){i.emit(e,u.copy(t))}function f(e){var t,n;L.forEach(function(i){i.event===e.name&&(t=i.code?i.code:e.data.code,n=i.message?i.message:e.data.reason,i.defer?setTimeout(E.bind(this,t,n),0):E(t,n))})}function E(e,t){l(n.ERROR,{code:e,message:t})}function p(e){var t,i;U&&U.quality&&(t=U.quality),i&&U.adaptive&&(i=U.adaptive),U=e.data.stats,t&&!U.quality&&(U.quality=t),i&&!U.adaptive&&(U.adaptive=i);var r,a="stats error";try{a=JSON.stringify(U),r=JSON.parse(a),delete r.buffer.update,delete r.buffer.delay.before}catch(e){}l(n.STATS,{stats:r})}function h(e){U||(U={}),U.quality=e.data}function m(e){U||(U={}),U.adaptive=e.data}function _(e){l(n.PLAYBACK_FINISHED)}function T(e){e.data.muted!==w?(w=e.data.muted,l(w?n.MUTE:n.UNMUTE,{volume:P})):e.data.volume!==P&&(P=e.data.volume,l(n.VOLUME_CHANGE,{volume:P}))}function S(e){setTimeout(l.bind(this,n.METADATA,e.data),0)}function g(e){setTimeout(l.bind(this,n.UPDATE_SOURCE_INIT,e.data),0)}function y(e){setTimeout(l.bind(this,n.UPDATE_SOURCE_SUCCESS,e.data),0)}function A(e){setTimeout(l.bind(this,n.UPDATE_SOURCE_FAIL,e.data),0)}function v(e){setTimeout(l.bind(this,n.UPDATE_SOURCE_ABORT,e.data),0)}function b(e){var t=u.copy(e.data);delete t.streamInfo.mimeType,setTimeout(l.bind(this,n.STREAM_INFO,t),0)}function I(e){var t=u.copy(e.data);delete t.streamInfo.mimeType,setTimeout(l.bind(this,n.STREAM_INFO_UPDATE,t),0)}function R(e){setTimeout(l.bind(this,n.SWITCH_STREAM_INIT,e.data),0)}function O(e){setTimeout(l.bind(this,n.SWITCH_STREAM_SUCCESS,e.data),0)}function N(e){setTimeout(l.bind(this,n.SWITCH_STREAM_FAIL,e.data),0)}function C(e){setTimeout(l.bind(this,n.SWITCH_STREAM_ABORT,e.data),0)}var U,P=(s.create("FacadePropagator"),1),w=!1,D=[{type:r.VOLUME_CHANGE,listener:T},{type:r.QUALITY_STATS,listener:h},{type:r.PLAY_STATS,listener:p},{type:r.PLAYBACK_FINISHED,listener:_},{type:a.META_DATA_RECEIVED,listener:S},{type:a.UPDATE_SOURCE_INIT,listener:g},{type:a.UPDATE_SOURCE_SUCCESS,listener:y},{type:a.UPDATE_SOURCE_FAIL,listener:A},{type:a.UPDATE_SOURCE_ABORT,listener:v},{type:a.STREAM_INFO,listener:b},{type:a.STREAM_INFO_UPDATE,listener:I},{type:a.SWITCH_STREAM_INIT,listener:R},{type:a.SWITCH_STREAM_SUCCESS,listener:O},{type:a.SWITCH_STREAM_FAIL,listener:N},{type:a.SWITCH_STREAM_ABORT,listener:C},{type:a.ADAPTIVE_STATS,listener:m}],L=[{event:a.META_DATA_ERROR,code:null,message:null,defer:!0},{event:a.MISSING_RTMP_ERROR,code:t.PLAYER.NO_RTMP_URL_SET,message:"No rtmp url set.",defer:!1},{event:a.NO_SERVER_ERROR,code:t.PLAYER.NO_SERVER_SET,message:"No server set.",defer:!1},{event:o.RECONNECTION_CONFIG_INVALID,code:t.NETWORK.RECONNECTION_CONFIG_INVALID,message:null,defer:!0},{event:r.BUFFER_TWEAKS_ERROR,code:t.PLAYER.BUFFER_CONFIG_INVALID,message:null,defer:!1}];return d(),{destroy:c}}return{create:d}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(98),n(13),n(12),n(28),n(27),n(92),n(93),n(95),n(94)],r=function(e,t,n,i,r,a,o,s,u){function d(t,d){function g(){i.add({target:t,listeners:F})}function y(){i.remove({target:t,listeners:F}),i.remove({target:t,listeners:w?G:k})}function A(e){w=n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS,i.add({target:t,listeners:w?G:k})}function v(e){switch(D=e.data.state){case r.PAUSED:M={},x=null}}function b(t){var n=[c,d,t].join(l);e&&"function"==typeof e.mark&&L.indexOf(n)===-1&&(e.mark(n),L.push(n)),M[t]||t===T&&(t!==T||[h,m,_].indexOf(x)===-1)||(x=t,M[t]=e.now(),S.debug(t+": "+M[t]),t===T&&I())}function I(){if(f.forEach(function(e,t){if(void 0===M[e]){M[e]=0;for(var n=t+1,i=f.length;n<i;n+=1)if(void 0!==M[f[n]]){M[e]=M[f[n]];break}}}),f.filter(function(e){return void 0!==M[e]}).length){var e=M[E];for(var n in M)M.hasOwnProperty(n)&&(M[n]=Math.round(M[n]-e));t.emit(u.STARTUP_STATS,{stats:M}),S.debugEnabled()&&S.debug("startup stats: "+JSON.stringify(M))}}function R(){b(E)}function O(){b(p)}function N(){b(_)}function C(){b(T)}function U(){b(h)}function P(){b(m)}var w,D,L=[],M={},x=null,F=[{type:u.STATE_CHANGE,listener:v},{type:a.CONFIG,listener:A}],k=[{type:s.CONNECTING,listener:R},{type:s.CONNECTED,listener:O},{type:s.STREAM_FRAGMENT,listener:U},{type:o.LOADED_DATA,listener:P},{type:o.CAN_PLAY_THROUGH,listener:N},{type:o.PLAYING,listener:C}],G=[{type:o.PLAY,listener:R},{type:o.DURATION_CHANGE,listener:O},{type:o.LOADED_META_DATA,listener:U},{type:o.LOADED_DATA,listener:P},{type:o.CAN_PLAY_THROUGH,listener:N},{type:o.PLAYING,listener:C}];return g(),{destroy:y}}var c="nano",l=".",f=[],E=f[0]="connecting",p=f[1]="connected",h=f[2]="firstFragmentReceived",m=f[3]="firstFrameRendered",_=f[4]="playable",T=f[5]="playing",S=t.create("Performance");return{create:d}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e=Date.now?Date.now():+new Date,t=window.performance||{},n=[],i={},r=function(e,t){for(var i=0,r=n.length,a=[];i<r;i++)n[i][e]===t&&a.push(n[i]);return a},a=function(e,t){for(var i,r=n.length;r--;)i=n[r],i.entryType!==e||void 0!==t&&i.name!==t||n.splice(r,1)};return t.now||(t.now=t.webkitNow||t.mozNow||t.msNow||function(){return(Date.now?Date.now():+new Date)-e}),t.mark||(t.mark=t.webkitMark||function(e){var r={name:e,entryType:"mark",startTime:t.now(),duration:0};n.push(r),i[e]=r}),t.measure||(t.measure=t.webkitMeasure||function(e,t,r){t=i[t].startTime,r=i[r].startTime,n.push({name:e,entryType:"measure",startTime:t,duration:r-t})}),t.getEntriesByType||(t.getEntriesByType=t.webkitGetEntriesByType||function(e){return r("entryType",e)}),t.getEntriesByName||(t.getEntriesByName=t.webkitGetEntriesByName||function(e){return r("name",e)}),t.clearMarks||(t.clearMarks=t.webkitClearMarks||function(e){a("mark",e)}),t.clearMeasures||(t.clearMeasures=t.webkitClearMeasures||function(e){a("measure",e)}),void 0===window.performance&&(window.performance=t),window.performance}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(28),n(5),n(90),n(14),n(27),n(92),n(93),n(94),n(95),n(13),n(9)],r=function(e,t,n,i,r,a,o,s,u,d,c){function l(i){function a(){e.add({target:i,listeners:I})}function c(){e.remove({target:i,listeners:I})}function l(e,t){i.emit(e,t)}function f(e,i){l(s.ERROR,{code:t[e][i],message:n[e][i]})}function E(e){g=e.data.state,g===r.LOADING&&(A=!1,y=null)}function p(e){A?f("STREAM","NOT_ENOUGH_DATA"):y&&"stopped"===y?f("STREAM","SOURCE_STOPPED"):f("STREAM","NOT_FOUND")}function h(e){y&&"stopped"===y?f("STREAM","SOURCE_STOPPED"):f("STREAM","MEDIA_NOT_AVAILABLE")}function m(e){A=!0}function _(e){e.name===s.DOCUMENT_HIDDEN?v=!0:(v&&(b=!0),v=!1,setTimeout(function(e){b=!1},1e3))}function T(e){v||b?f("PLAYER","VISIBILITY_HIDDEN"):f("MEDIA","MEDIA_SOURCE_ENDED")}function S(e){y=e.data.onStreamStatus.status}var g,y,A,v,b,I=(d.create("ErrorSelector"),[{type:s.STATE_CHANGE,listener:E},{type:s.LOADING_TIMEOUT,listener:p},{type:s.BUFFERING_TIMEOUT,listener:h},{type:s.STREAM_INFO,listener:m},{type:s.DOCUMENT_VISIBLE,listener:_},{type:s.DOCUMENT_HIDDEN,listener:_},{type:o.PLAYBACK_FINISHED,listener:T},{type:u.STREAM_STATUS,listener:S}]);return a(),{destroy:c}}return{create:l}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(11),n(12),n(53),n(28),n(83),n(102),n(92),n(94),n(93),n(95),n(103),n(104),n(105),n(101),n(106),n(107),n(108),n(109),n(110),n(111),n(113),n(114),n(115),n(117),n(118),n(119),n(120)],r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,E,p,h,m,_,T,S,g,y,A,v,b,I,R,O){"use strict";function N(N){function C(){x.debugEnabled()&&x.debug("init");for(var e in l)l.hasOwnProperty(e)&&l.STATS.indexOf(l[e])===-1&&H.push({type:l[e],listener:w});D=a.create(N,M,G),L=a.create(M,N,k),r.add({target:M,listeners:B}),r.add({target:N,listeners:H}),F.push(O.create(M)),F.push(g.create(M)),F.push(b.create(M)),F.push(v.create(M)),F.push(R.create(M))}function U(){for(D.destroy(),D=null,L.destroy(),L=null;F.length;)F.pop().destroy();r.remove({target:M,listeners:B}),r.remove({target:N,listeners:H})}function P(e){F.push(n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS?A.create(M):y.create(M)),e.data.config.playback.metadata&&F.push(I.create(M))}function w(e){M.emit(p.PUBLIC_EVENT,{event:i.copy(e)})}var D,L,M=new t,x=e.create("LogicManager"),F=[],k=[{from:f.SEEK,to:s.SEEK},{from:f.RATE,to:s.SET_RATE},{from:E.CONNECT,to:s.CONNECT},{from:E.DISCONNECT,to:s.DISCONNECT},{from:E.VIDEO_SOURCE,to:s.VIDEO_SOURCE},{from:E.NETWORK_PLAY,to:s.NETWORK_PLAY},{from:E.NETWORK_UPDATE_SOURCE,to:s.NETWORK_UPDATE_SOURCE},{from:E.NO_SERVER_ERROR,to:u.NO_SERVER_ERROR},{from:E.MISSING_RTMP_ERROR,to:u.MISSING_RTMP_ERROR},{from:E.NO_KEEP_CONNECTION,to:u.NO_KEEP_CONNECTION},{from:E.SERVER_INFO,to:u.SERVER_INFO},{from:E.URL,to:u.STREAM_URL},{from:E.UPDATE_SOURCE_INIT,to:u.UPDATE_SOURCE_INIT},{from:E.UPDATE_SOURCE_SUCCESS,to:u.UPDATE_SOURCE_SUCCESS},{from:E.UPDATE_SOURCE_FAIL,to:u.UPDATE_SOURCE_FAIL},{from:E.UPDATE_SOURCE_ABORT,to:u.UPDATE_SOURCE_ABORT},{from:E.SWITCH_STREAM_INIT,to:u.SWITCH_STREAM_INIT},{from:E.SWITCH_STREAM_SUCCESS,to:u.SWITCH_STREAM_SUCCESS},{from:E.SWITCH_STREAM_FAIL,to:u.SWITCH_STREAM_FAIL},{from:E.SWITCH_STREAM_ABORT,to:u.SWITCH_STREAM_ABORT},{from:h.LOADING_TIMEOUT,to:u.LOADING_TIMEOUT},{from:h.BUFFERING_TIMEOUT,to:u.BUFFERING_TIMEOUT},{from:m.CREATED,to:u.STREAM_INFO},{from:m.UPDATED,to:u.STREAM_INFO_UPDATE},{from:m.MIME_TYPE_UNSUPPORTED,to:u.MIME_TYPE_UNSUPPORTED},{from:_.RECEIVED,to:u.META_DATA_RECEIVED},{from:_.ERROR,to:u.META_DATA_ERROR},{from:T.VISIBLE,to:u.DOCUMENT_VISIBLE},{from:T.HIDDEN,to:u.DOCUMENT_HIDDEN},{from:S.STATS,to:u.ADAPTIVE_STATS},{from:S.STREAM_SWITCH,to:u.STREAM_SWITCH}],G=[{from:o.PLAY,to:p.API_PLAY},{from:o.PAUSE,to:p.API_PAUSE},{from:d.BUFFER_TWEAKS_CREATED,to:p.BUFFER_TWEAKS_CREATED},{from:d.PLAY_STATS,to:p.PLAY_STATS},{from:d.PLAYBACK_STARTED,to:p.PLAYING},{from:d.BUFFERING,to:p.BUFFERING},{from:d.CAN_PLAY,to:p.CAN_PLAY},{from:d.CAN_PLAY_THROUGH,to:p.CAN_PLAY_THROUGH},{from:d.PLAYING,to:p.MEDIA_PLAYING},{from:d.FRAME_DROP,to:p.FRAME_DROP},{from:d.VIEWPORT_VISIBLE,to:p.VIEWPORT_VISIBLE},{from:d.VIEWPORT_HIDDEN,to:p.VIEWPORT_HIDDEN},{from:d.TIME_OFFSET,to:p.TIME_OFFSET},{from:d.LOADED_DATA,to:p.LOADED_DATA},{from:d.UPDATE_SOURCE_ABORT,to:p.UPDATE_SOURCE_ABORT},{from:d.UPDATE_SOURCE_FAIL,to:p.UPDATE_SOURCE_FAIL},{from:c.CONNECTING,to:p.NETWORK_CONNECTING},{from:c.CONNECTED,to:p.NETWORK_CONNECTED},{from:c.DISCONNECTED,to:p.NETWORK_DISCONNECTED},{from:c.DESTROYED,to:p.NETWORK_DISCONNECTED},{from:c.RECONNECTING,to:p.NETWORK_RECONNECTING},{from:c.RECONNECTION_IMMINENT,to:p.NETWORK_RECONNECTION_IMMINENT},{from:c.INITIALIZATION_ERROR,to:p.NETWORK_INITIALIZATION_ERROR},{from:c.ERROR,to:p.NETWORK_ERROR},{from:c.STATE_CHANGE,to:p.NETWORK_STATE_CHANGE},{from:c.RANDOM_ACCESS_POINT,to:p.RANDOM_ACCESS_POINT},{from:c.SERVER_INFO,to:p.SERVER_INFO},{from:c.STREAM_INFO,to:p.STREAM_INFO},{from:c.STREAM_INFO_UPDATE,to:p.STREAM_INFO_UPDATE},{from:c.STREAM_QUALITY,to:p.STREAM_QUALITY},{from:c.META_DATA,to:p.META_DATA},{from:c.UPDATE_SOURCE_SUCCESS,to:p.UPDATE_SOURCE_SUCCESS},{from:c.UPDATE_SOURCE_FAIL,to:p.UPDATE_SOURCE_FAIL},{from:c.UPDATE_SOURCE_ABORT,to:p.UPDATE_SOURCE_ABORT},{from:u.UPDATE_SOURCE_INIT,to:p.UPDATE_SOURCE_INIT},{from:u.STATE_CHANGE,to:p.APPLICATION_STATE_CHANGE},{from:u.STREAM_URL,to:p.STREAM_URL},{from:u.STREAM_SWITCH,to:p.STREAM_SWITCH},{from:s.CONFIG,to:p.CONFIG},{from:s.UPDATE_SOURCE,to:p.UPDATE_SOURCE},{from:s.SWITCH_STREAM,to:p.SWITCH_STREAM},{from:s.SET_ADAPTION,to:p.SET_ADAPTION}],B=[{type:p.CONFIG,listener:P}],H=[];return C(),{destroy:U}}return{create:N}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="logicManager.";return{BASE:e,API_PLAY:e+"apiPlay",API_PAUSE:e+"apiPause",NETWORK_CONNECTING:e+"networkConnecting",NETWORK_CONNECTED:e+"networkConnected",NETWORK_DISCONNECTED:e+"networkDisconnected",NETWORK_RECONNECTION_IMMINENT:e+"networkReconnectionImminent",NETWORK_RECONNECTING:e+"networkReconnecting",NETWORK_CONNECTION_ERROR:e+"networkConnectionError",NETWORK_INITIALIZATION_ERROR:e+"networkInitializationError",NETWORK_MAX_RETRY_REACHED:e+"networkMaxRetryReached",NETWORK_ERROR:e+"networkError",NETWORK_STATE_CHANGE:e+"networkStateChange",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_QUALITY:e+"streamQuality",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",STREAM_URL:e+"streamUrl",CONFIG:e+"config",BUFFER_TWEAKS_CREATED:e+"tweaksCreated",PLAYING:e+"playing",BUFFERING:e+"buffering",PLAY_STATS:e+"playStats",APPLICATION_STATE_CHANGE:e+"applicationStateChange",CAN_PLAY:e+"canPlay",CAN_PLAY_THROUGH:e+"canPlayThrough",META_DATA:e+"metaData",UPDATE_SOURCE:e+"updateSource",STREAM_SWITCH:e+"streamSwitch",FRAME_DROP:e+"frameDrop",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM:e+"switchStream",MEDIA_PLAYING:e+"mediaPlaying",TIME_OFFSET:e+"timeOffset",SET_ADAPTION:e+"setAdaption",LOADED_DATA:e+"loadedData",PUBLIC_EVENT:e+"publicEvent"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="api.";return{PLAY:e+"play",PAUSE:e+"pause"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="public.";return{BASE:e,READY:e+"ready",ERROR:e+"error",PAUSE:e+"pause",LOADING:e+"loading",START_BUFFERING:e+"startBuffering",STOP_BUFFERING:e+"stopBuffering",PLAY:e+"play",METADATA:e+"metaData",STATS:e+"stats",PLAYBACK_FINISHED:e+"playbackFinished",MEDIA:e+"media",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",MUTE:e+"mute",UNMUTE:e+"unmute",VOLUME_CHANGE:e+"volumeChange",STATE_CHANGE:e+"stateChange",WARNING:e+"warning",DESTROY:e+"destroy",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_FAIL:e+"switchStreamFail",SWITCH_STREAM_ABORT:e+"switchStreamAbort"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="liveBufferControl.";return{BASE:e,SEEK:e+"seek",RATE:e+"rate"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="connection.";return{BASE:e,CONNECT:e+"connect",DISCONNECT:e+"disconnect",VIDEO_SOURCE:e+"videoSource",NETWORK_PLAY:e+"networkPlay",NO_SERVER_ERROR:e+"noServerError",MISSING_RTMP_ERROR:e+"missingRtmpError",SERVER_INFO:e+"serverInfo",NO_KEEP_CONNECTION:e+"noKeepConnection",URL:e+"url",NETWORK_UPDATE_SOURCE:e+"networkUpdateSource",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_FAIL:e+"switchStreamFail",SWITCH_STREAM_ABORT:e+"switchStreamAbort"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="timeout.";return{BASE:e,LOADING_TIMEOUT:e+"loadingTimeout",BUFFERING_TIMEOUT:e+"bufferingTimeout"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="streamInfo.";return{BASE:e,CREATED:e+"created",UPDATED:e+"updated",MIME_TYPE_UNSUPPORTED:e+"mimetypeUnsupported"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="metaData.";return{BASE:e,RECEIVED:e+"received",ERROR:e+"error"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="visibility.";return{BASE:e,HIDDEN:e+"hidden",VISIBLE:e+"visible"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="source.";return{BASE:e,STATS:e+"stats",STREAM_SWITCH:e+"streamSwitch"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(12),n(3),n(53),n(28),n(105),n(107),n(101),n(89),n(27),n(76),n(112),n(5),n(90)],r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,E){function p(n){function i(){F.debugEnabled()&&F.debug("init"),r.add({target:n,listeners:X})}function o(){r.remove({target:n,listeners:X})}function f(e){F.debug(e.name+": network state change from "+U(B)+" to "+U(e.data.connectionState)),B=e.data.connectionState}function E(e){}function p(e){if(M=e.data.onServerInfo,V){var t=M.capabilities,i=M.serverVersion,r=parseFloat(i);t.indexOf("onPlay")===-1&&t.indexOf("onPause")===-1&&(V=!1,n.emit(a.NO_KEEP_CONNECTION,{message:r<1.8?"The keepConnection feature is enabled by the players config, but is not supported by this server version ("+i+"). Use at least server version 1.8.0.0. The feature will be disabled.":"The keepConnection feature is enabled by the players config, but is not enabled by this server ("+i+"). The feature will be disabled."}),K||I())}n.emit(a.SERVER_INFO,e.data)}function h(e){L=e.data.config,D=L.id,Y=L.playback.metadata,V=L.playback.keepConnection,K=L.playback.autoplay,W=t.mustUseHLS||L.playback.allowSafariHlsFallback&&t.canUseHLS}function m(e){var t=e.data.entry,i=e.data.options;if("init"===e.data.type){for(;k.length;)k.pop();return R(t.h5live),void(V&&b())}return z+=1,i.tag=i.tag||"",i.count=z,"update"===e.data.type?n.emit(a.UPDATE_SOURCE_INIT,{source:e.data.source,entry:t,rule:e.data.rule,options:i,tag:i.tag,count:i.count,type:e.data.type,id:e.data.id}):n.emit(a.SWITCH_STREAM_INIT,{source:e.data.source,entry:t,rule:e.data.rule,options:i,tag:i.tag,count:i.count,type:e.data.type,id:e.data.id}),q?void("update"===e.data.type?n.emit(a.UPDATE_SOURCE_ABORT,{source:e.data.source,entry:t,rule:e.data.rule,reason:"frequency",tag:i.tag,count:i.count,type:e.data.type,id:e.data.id}):n.emit(a.SWITCH_STREAM_ABORT,{source:e.data.source,entry:t,rule:e.data.rule,reason:"frequency",tag:i.tag,count:i.count,type:e.data.type,id:e.data.id})):W&&j&&"update"===j.type&&"update"!==e.data.type?void n.emit(a.SWITCH_STREAM_ABORT,{source:e.data.source,entry:t,rule:e.data.rule,reason:"updateProgress",tag:i.tag,count:i.count,type:e.data.type,id:e.data.id}):(q=!0,setTimeout(function(){q=!1},500),j=e.data,"update"===e.data.type?F.debugEnabled()&&F.debug("update source: "+JSON.stringify(e.data.source)):F.debugEnabled()&&F.debug("switch stream: "+JSON.stringify(t)),k.length>1&&k.pop(),R(t.h5live),void(V&&!K?(F.debugEnabled()&&F.debug("connect to new source with terminating the old one"),I(!0),k.shift(),b()):K?(F.debugEnabled()&&F.debug("connect to new source without terminating the old one"),b(e.data)):(k.shift(),F.debugEnabled()&&F.debug("replaced source"))))}function _(e){k.length>1&&k.shift(),"update"===e.data.type?n.emit(a.UPDATE_SOURCE_SUCCESS,{source:j.source,entry:j.entry,rule:j.rule,tag:e.data.tag,count:e.data.count,type:e.data.type,id:e.data.id}):n.emit(a.SWITCH_STREAM_SUCCESS,{source:j.source,entry:j.entry,rule:j.rule,tag:e.data.tag,count:e.data.count,type:e.data.type,id:e.data.id}),j=!1,clearTimeout(x)}function T(e){k.length>1&&("update"===e.data.type?k.shift():k.pop()),"update"===e.data.type?n.emit(a.UPDATE_SOURCE_FAIL,{source:j.source,entry:j.entry,rule:j.rule,tag:e.data.tag,count:e.data.count,code:e.data.code,message:e.data.message,type:e.data.type,id:e.data.id}):n.emit(a.SWITCH_STREAM_FAIL,{source:j.source,entry:j.entry,rule:j.rule,tag:e.data.tag,count:e.data.count,code:e.data.code,message:e.data.message,type:e.data.type,id:e.data.id}),j=!1}function S(e){k.length>1&&("update"===e.data.type?k.shift():k.pop()),"update"===e.data.type?"equalsource"===e.data.reason?n.emit(a.UPDATE_SOURCE_SUCCESS,{source:j.source,entry:j.entry,rule:j.rule,tag:e.data.tag,count:e.data.count,type:e.data.type,id:e.data.id}):n.emit(a.UPDATE_SOURCE_ABORT,{source:j.source,entry:j.entry,rule:j.rule,tag:e.data.tag,count:e.data.count,reason:e.data.reason,type:e.data.type,id:e.data.id}):n.emit(a.SWITCH_STREAM_ABORT,{source:W?e.data.source:j.source,entry:W?e.data.entry:j.entry,rule:W?e.data.rule:j.rule,tag:e.data.tag,count:e.data.count,reason:"equalsource"===e.data.reason?"equal":e.data.reason,type:e.data.type,id:e.data.id}),j=!1}function g(){if(F.debugEnabled()&&F.debug("api play"),K=!0,V?(F.debugEnabled()&&F.debug("send network play"),n.emit(a.NETWORK_PLAY)):H||b(j&&j.options.forcePlay?j:void 0),W){var e=O("hls");n.emit(a.VIDEO_SOURCE,{src:e,type:l.HLS})}}function y(){F.debugEnabled()&&F.debug("api pause"),K=!1,V&&!j||I(),W&&n.emit(a.VIDEO_SOURCE,{src:"",type:l.HLS})}function A(e){switch(w=e.data.state){case d.PAUSED:j&&W&&[c.NORMAL,c.PLAYBACK_RESTART].indexOf(e.data.reason)===-1&&T({data:{tag:j.options.tag,count:j.options.count,type:j.type,id:j.id}})}}function v(){j&&W&&(clearTimeout(x),_({data:{tag:j.options.tag,count:j.options.count,type:j.type,id:j.id}}))}function b(e){var t=e?k.length-1:0;if(Y||k[t].security||!W){K?C("paused"):N("paused"),Y&&W?N("metastreamonly"):C("metastreamonly"),!Y&&k[t].security&&W?N("checkandclose"):C("checkandclose");var i=O("websocket",t),r=e?a.NETWORK_UPDATE_SOURCE:a.CONNECT;F.debugEnabled()&&F.debug("connect to: "+i,1),n.emit(r,{url:i,config:k[t],update:!!e&&e,reconnect:L.playback.reconnect,timeouts:L.playback.timeouts}),W||n.emit(a.URL,{url:i})}if(W){var i=O("hls");n.emit(a.URL,{url:i}),e&&n.emit(a.VIDEO_SOURCE,{src:i,type:l.HLS})}}function I(e){F.debugEnabled()&&F.debug("disconnecting"),n.emit(a.DISCONNECT,{silent:!!e})}function R(e){F.debugEnabled()&&F.debug("set connection config",3);var t,i=new P,r=e.server,o=e.rtmp,s=e.params,u=e.token,d=e.security;if("object"==typeof r){for(var c=["websocket","hls","progressive"],l=0;l<c.length;l++)r[c[l]]&&"string"==typeof r[c[l]]&&0!==r[c[l]].length&&(i.server[c[l]]=r[c[l]]);F.debugEnabled()&&F.debug("set connection server: "+JSON.stringify(i.server),3)}if(i.server.websocket.length||i.server.hls.length||n.emit(a.NO_SERVER_ERROR),"object"==typeof o&&o.url&&o.url.length&&o.streamname&&o.streamname.length||s){for(t in o)if(o.hasOwnProperty(t)){var f=t.replace("name","");i.query.hasOwnProperty(f)&&(i.query[f]=o[t],F.debugEnabled()&&F.debug("set connection config rtmp: "+f+":"+i.query[f]))}}else n.emit(a.MISSING_RTMP_ERROR);if(u&&i.query.hasOwnProperty("token")&&(i.query.token=u,F.debugEnabled()&&F.debug("set connection config token: "+i.query.token)),"object"==typeof s)for(t in s)s.hasOwnProperty(t)&&(i.query[t]=s[t],F.debugEnabled()&&F.debug("set connection param: "+t+":"+i.query[t]));if(d){i.security={},F.debugEnabled()&&F.debug("set security config",3);for(var t in d)d.hasOwnProperty(t)&&d[t].length&&(i.security[t]=d[t],F.debugEnabled()&&F.debug("set security config "+t+": "+i.security[t]))}k.push(i)}function O(e,t){var n,i="?",r=void 0!==typeof t&&t>-1&&void 0!==typeof k[t]?t:k.length-1,a=k[r].server,o=k[r].query,s=k[r].security;n=a[e];for(var u in o)o.hasOwnProperty(u)&&("cid"===u&&(o[u]=Math.round(1e6*Math.random()).toString()),"pid"!==u||o[u].length||(o[u]=D),o[u].length&&(i+=u+"="+encodeURIComponent(o[u])+"&"));for(var u in s)s.hasOwnProperty(u)&&s[u].length&&(i+=u+"="+encodeURIComponent(s[u])+"&");for(var d="",r=0,c=G.length;r<c;r+=1)d+=G[r],r===c-1?i+="&flags="+encodeURIComponent(d):d+=",";return o.flags=d,i.lastIndexOf("&")===i.length-1&&(i=i.substr(0,i.length-1)),n+i}function N(e){G.indexOf(e)===-1&&G.push(e)}function C(e){G=G.filter(function(t){return t!==e})}function U(e){for(var t in u)if(u.hasOwnProperty(t)&&u[t]===e)return t}function P(){return{server:{websocket:"",hls:"",progressive:""},query:{url:"",stream:"",cid:"",pid:"",token:"",flags:""},security:null}}var w,D,L,M,x,F=e.create("Connection"),k=[],G=[],B=u.UNITIALIZED,H=!1,Y=!1,V=!1,W=!1,K=!0,j=!1,q=!1,z=0,X=[{type:s.NETWORK_STATE_CHANGE,listener:f},{type:s.SERVER_INFO,listener:p},{type:s.STREAM_INFO,listener:E},{type:s.UPDATE_SOURCE_SUCCESS,listener:_},{type:s.UPDATE_SOURCE_FAIL,listener:T},{type:s.UPDATE_SOURCE_ABORT,listener:S},{type:s.CONFIG,listener:h},{type:s.STREAM_SWITCH,listener:m},{type:s.API_PLAY,listener:g},{type:s.API_PAUSE,listener:y},{type:s.APPLICATION_STATE_CHANGE,listener:A},{type:s.CAN_PLAY,listener:v}];return i(),{destroy:o}}return{create:p}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({MP4:"video/mp4",MP4_MS:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',HLS:"application/vnd.apple.mpegURL"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(12),n(28),n(104),n(101),n(27)],r=function(e,t,n,i,r,a){function o(o){function s(){A.debugEnabled()&&A.debug("init"),n.add({target:o,listeners:U}),t.isTridentBrowser&&n.add({target:o,listeners:P})}function u(){n.remove({target:o,listeners:U}),t.isTridentBrowser&&n.remove({target:o,listeners:P})}function d(e){v.buffer=e.data.tweaks.buffer}function c(e){for(I.push(e.data.onRandomAccessPoint.streamTime/1e3+O/1e3);I.length>10;)I.shift()}function l(e){t.isTridentBrowser&&"extreme"===e.data.type&&!C&&g===a.PLAYING&&(A.debugEnabled()&&A.debug("visible and extreme frame drop detected (edge)"),A.debugEnabled()&&A.debug("try seeking to last RAP to get stable playback"),T(I.length?I[I.length-1]:0))}function f(e){O=e.data.offset}function E(e){C=e.name!==r.VIEWPORT_VISIBLE,A.debugEnabled()&&A.debug("viewport changed to "+(C?"hidden":"visible"))}function p(e){switch(n.remove({target:o,listeners:w}),g=e.data.state){case a.PLAYING:n.add({target:o,listeners:w})}}function h(e){y=e.data.stats,N=e.data.playbackRate,b=e.data.currentTime,e.data.buffered&&e.data.buffered.length&&(R=y.buffer.end>R+.1?y.buffer.end:R,v.buffer.max<y.buffer.delay.current&&y.buffer.start<b&&y.buffer.end-y.buffer.start>v.buffer.target?(A.debug("tweaks.buffer.max ("+v.buffer.max+") < stats.buffer.delay.current ("+y.buffer.delay.current+") && stats.buffer.start ("+y.buffer.start+") < currentTime ("+b+") && stats.buffer.end ("+y.buffer.end+") > tweaks.buffer.target ("+v.buffer.target+")"),_(v.buffer.target)):v.buffer.limit<y.buffer.delay.current?t.isTridentBrowser?_(v.buffer.target):m(1.1):v.buffer.target>y.buffer.delay.current&&m(1))}function m(e){N!==e&&(A.debugEnabled()&&A.debug("set rate to "+e),o.emit(i.RATE,{rate:e}))}function _(e){var n=R-e;t.isTridentBrowser&&(n=S(b,n),n<0)||T(n)}function T(e){A.debugEnabled()&&A.debug("seeking to "+e),o.emit(i.SEEK,{position:e})}function S(e,t){for(var n=0;n<I.length;++n)if(I[n]>e&&I[n]<=t)return I[n];return-1}var g,y,A=e.create("WSSLiveController"),v={},b=0,I=[],R=0,O=0,N=1,C=!1,U=[{type:r.APPLICATION_STATE_CHANGE,listener:p},{type:r.BUFFER_TWEAKS_CREATED,listener:d},{type:r.RANDOM_ACCESS_POINT,listener:c},{type:r.FRAME_DROP,listener:l},{type:r.TIME_OFFSET,listener:f}],P=[{type:r.VIEWPORT_VISIBLE,listener:E},{type:r.VIEWPORT_HIDDEN,listener:E}],w=[{type:r.PLAY_STATS,listener:h}];return s(),{destroy:u}}return{create:o}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(12),n(28),n(104),n(101),n(27)],r=function(e,t,n,i,r,a){function o(t){function o(){p.debugEnabled()&&p.debug("init"),n.add({target:t,listeners:T})}function s(){n.remove({target:t,listeners:T})}function u(e){for(var t in e.data.tweaks.buffer)e.data.tweaks.buffer[t]!==m.buffer[t]&&(h=!1);h||(m.buffer=e.data.tweaks.buffer)}function d(e){switch(n.remove({target:t,listeners:S}),f=e.data.state){case a.PLAYING:n.add({target:t,listeners:S})}}function c(e){E=e.data.stats,_=e.data.playbackRate,e.data.buffered&&e.data.buffered.length&&(h?E.buffer.update.avg>0&&E.buffer.update.avg+m.buffer.limit-.7<E.buffer.delay.avg?l(1.1):E.buffer.update.avg>0&&E.buffer.update.avg+m.buffer.min<E.buffer.delay.avg<=E.buffer.update.avg+m.buffer.target-.7?l(1):E.buffer.update.avg>=0&&E.buffer.update.avg>=E.buffer.delay.avg&&l(.9):m.buffer.limit<E.buffer.delay.avg?l(1.1):m.buffer.start<E.buffer.delay.avg<=m.buffer.target?l(1):m.buffer.min>=E.buffer.delay.avg&&l(.9))}function l(e){_!==e&&(p.debugEnabled()&&p.debug("set rate to: "+e),t.emit(i.RATE,{rate:e}))}var f,E,p=e.create("HLSLiveController"),h=!0,m={buffer:{max:8,min:.2,start:.5,target:1.2,limit:1.7}},_=1,T=[{type:r.APPLICATION_STATE_CHANGE,listener:d},{type:r.BUFFER_TWEAKS_CREATED,listener:u}],S=[{type:r.PLAY_STATS,listener:c}];return o(),{destroy:s}}return{create:o}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(12),n(28),n(101),n(107),n(27),n(116),n(112)],r=function(e,t,n,i,r,a,o,s){function u(u){function d(){I.debugEnabled()&&I.debug("init"),n.add({target:u,listeners:R})}function c(){n.remove({target:u,listeners:R})}function l(e,t){A=t.data.onStreamInfo,I.debug(JSON.stringify(A));var n=A&&A.mimeType?A.mimeType:s.MP4_MS;
if(window.MediaSource.isTypeSupported(n)){var i={},a=[o.PREROLL_DURATION];for(var d in o)if(o.hasOwnProperty(d)){var c=o[d];o.hasOwnProperty(d)&&A.hasOwnProperty(c)&&a.indexOf(c)===-1&&(i[c]=A[c])}A=i,A.url=v,A.rtmp=S(),u.emit(e,{streamInfo:A})}else u.emit(r.MIME_TYPE_UNSUPPORTED)}function f(e){g=e.data.state}function E(e){y=t.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&t.canUseHLS}function p(e){v=e.data.url,b=T(v)}function h(e){g!==a.READY&&l(r.CREATED,e)}function m(e){g!==a.BUFFERING&&g!==a.PLAYING||l(r.UPDATED,e)}function _(e){y&&(A={haveAudio:e.data.haveAudio,haveVideo:e.data.haveVideo,audioInfo:e.data.haveAudio?{bitsPerSample:null,channels:null,sampleRate:null}:null,videoInfo:e.data.haveVideo?{width:e.data.videoWidth,height:e.data.videoHeight,frameRate:null}:null},A.url=v,A.rtmp=S(),setTimeout(function(){u.emit(r.CREATED,{streamInfo:A})},0))}function T(e){for(var t={},n=e.indexOf("?")+1,i=("&"+e.substring(n)).split("&"),r=0;r<i.length;r+=1){var a=i[r].split("=");2===a.length&&(t[a[0]]=decodeURIComponent(a[1]))}return t}function S(){return{streamname:b.stream?b.stream:"",url:b.url?b.url:""}}var g,y,A,v,b,I=e.create("StreamInfo"),R=[{type:i.APPLICATION_STATE_CHANGE,listener:f},{type:i.CONFIG,listener:E},{type:i.STREAM_INFO,listener:h},{type:i.STREAM_INFO_UPDATE,listener:m},{type:i.STREAM_URL,listener:p},{type:i.CAN_PLAY,listener:_}];return d(),{destroy:c}}return{create:u}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({HAVE_VIDEO:"haveVideo",HAVE_AUDIO:"haveAudio",VIDEO_INFO:"videoInfo",AUDIO_INFO:"audioInfo",PREROLL_DURATION:"prerollDuration",MIME_TYPE:"mimeType"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(12),n(28),n(104),n(101),n(106),n(27)],r=function(e,t,n,i,r,a,o){function s(t){function i(){y.debugEnabled()&&y.debug("init"),n.add({target:t,listeners:A})}function s(){clearTimeout(S),clearTimeout(g),n.remove({target:t,listeners:A})}function p(e){switch(T=e.data.state){case o.READY:case o.PLAYING:case o.PAUSED:clearTimeout(S),clearTimeout(g)}T===o.BUFFERING?m():clearTimeout(g),T===o.LOADING&&_(e.data.connectDelay)}function h(e){var t=e.data.config,n=1e3*t.playback.timeouts.loading,i=1e3*t.playback.timeouts.buffering;u=Math.max(Math.min(n,c),d),l=Math.max(Math.min(i,E),f)}function m(){clearTimeout(g),g=setTimeout(function(){t.emit(a.BUFFERING_TIMEOUT,{delay:l})},l)}function _(e){clearTimeout(S),S=setTimeout(function(){t.emit(a.LOADING_TIMEOUT,{delay:u+e})},u+e)}var T,S,g,y=e.create("Timeout"),A=[{type:r.APPLICATION_STATE_CHANGE,listener:p},{type:r.CONFIG,listener:h}];return i(),{destroy:s}}var u=2e4,d=1e4,c=6e4,l=2e4,f=1e4,E=6e4;return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(12),n(28),n(5),n(27),n(101),n(108)],r=function(e,t,n,i,r,a,o){function s(s){function u(){I.debugEnabled()&&I.debug("init"),n.add({target:s,listeners:O})}function d(){n.remove({target:s,listeners:O})}function c(){b=0,S=!0,g={handlerName:"",streamTime:0,message:[]},y=[],A=[],v=0}function l(e){switch(_=e.data.state){case r.LOADING:c(),n.add({target:s,listeners:N});break;case r.PAUSING:n.remove({target:s,listeners:N})}}function f(e){T=t.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&t.canUseHLS}function E(e){R=e.data.offset}function p(e){I.debugEnabled()&&I.debug("onMetaData");var t=e.data[e.data.eventType];if(1===t.chunkIndex)"function"==typeof g.message.push&&0!==g.message.length&&s.emit(o.ERROR,{code:i.STREAM.METADATA_STILL_PROCESSING,message:"Received metadata with start index but currently process another. Discard old one."}),S=!0,g={handlerName:t.handlerName,streamTime:t.streamTime+R/1e3,message:[]};else{if(0===g.message.length||"function"!=typeof g.message.push)return void(S&&(s.emit(o.ERROR,{code:i.STREAM.METADATA_NO_START_INDEX,message:"Received metadata but no start index. Discard."}),S=!1,g.message=[]));if(!S)return}if(g.message.push(t.message),g.message.length!==t.chunkIndex)S&&(s.emit(o.ERROR,{code:i.STREAM.METADATA_WRONG_INDEX,message:"Received metadata with wrong index. Discard."}),S=!1,g.message=[]);else if(t.chunkCount-t.chunkIndex===0)try{var n=g.message.join(""),r=g.handlerName;I.debugEnabled()&&I.debug("handlerName="+r+", metaData="+n),n=JSON.parse(n),g.message=n;var a={handlerName:g.handlerName,streamTime:g.streamTime,message:g.message};y.push(a)}catch(e){s.emit(o.ERROR,{code:i.STREAM.METADATA_INVALID_JSON,message:"Received metadata with invalid json string."})}}function h(e){for(b=e.data.currentTime;y.length;){var t=y.shift(),n=T&&e.data.stats.buffer.delay.avg?e.data.stats.buffer.delay.avg:0;t.streamTime+v+n<=b?(t.streamTime+=v+n,s.emit(o.RECEIVED,t)):A.push(t)}for(;A.length;)y.push(A.shift())}function m(){v=_===r.PLAYING&&T?b:0}var _,T,S,g,y,A,v,b,I=e.create("MetaData"),R=0,O=[{type:a.APPLICATION_STATE_CHANGE,listener:l},{type:a.CONFIG,listener:f},{type:a.TIME_OFFSET,listener:E}],N=[{type:a.META_DATA,listener:p},{type:a.PLAY_STATS,listener:h},{type:a.NETWORK_CONNECTED,listener:m}];return u(),{destroy:d}}return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(28),n(13),n(101),n(109)],r=function(e,t,n,i){function r(r){function a(){f.debugEnabled()&&f.debug("initialize"),e.add({target:r,listeners:p}),"undefined"!=typeof document.hidden?(d="hidden",c="visibilitychange"):"undefined"!=typeof document.msHidden?(d="msHidden",c="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(d="webkitHidden",c="webkitvisibilitychange"),document.addEventListener(c,s)}function o(){e.remove({target:r,listeners:p}),document.removeEventListener(c,s)}function s(){E=document[d],f.debug(E?"hidden":"visible"),r.emit(E?i.HIDDEN:i.VISIBLE)}function u(e){l||(f.debugEnabled()&&f.debug("initial player state"),s()),l=e.data.state}var d,c,l,f=t.create("VisibilityProxy"),E=!1,p=[{type:n.APPLICATION_STATE_CHANGE,listener:u}];return a(),{destroy:o}}return{create:r}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(11),n(12),n(53),n(28),n(83),n(110),n(101),n(107),n(105),n(121),n(122),n(123),n(124),n(125),n(128),n(132)],r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,E,p,h,m){"use strict";function _(n){function i(){S.debugEnabled()&&S.debug("init"),l=a.create(n,T,A),_=a.create(T,n,y),g.push(m.create(T)),g.push(p.create(T)),g.push(h.create(T))}function r(){for(l.destroy(),l=null,_.destroy(),_=null;g.length;)g.pop().destroy()}var l,_,T=new t,S=e.create("SourceManager"),g=[],y=[{from:f.STATS,to:o.STATS},{from:E.STREAM_SWITCH,to:o.STREAM_SWITCH}],A=[{from:s.CONFIG,to:c.CONFIG},{from:s.PLAY_STATS,to:c.PLAY_STATS},{from:s.FRAME_DROP,to:c.FRAME_DROP},{from:s.RANDOM_ACCESS_POINT,to:c.RANDOM_ACCESS_POINT},{from:s.STREAM_QUALITY,to:c.STREAM_QUALITY},{from:s.APPLICATION_STATE_CHANGE,to:c.APPLICATION_STATE_CHANGE},{from:s.UPDATE_SOURCE,to:c.UPDATE_SOURCE},{from:s.SWITCH_STREAM,to:c.SWITCH_STREAM},{from:s.PUBLIC_EVENT,to:c.PUBLIC_EVENT},{from:s.BUFFERING,to:c.BUFFERING},{from:s.SET_ADAPTION,to:c.SET_ADAPTION},{from:d.SERVER_INFO,to:c.SERVER_INFO},{from:d.UPDATE_SOURCE_INIT,to:c.UPDATE_SOURCE_INIT},{from:d.UPDATE_SOURCE_SUCCESS,to:c.UPDATE_SOURCE_SUCCESS},{from:d.UPDATE_SOURCE_FAIL,to:c.UPDATE_SOURCE_FAIL},{from:d.UPDATE_SOURCE_ABORT,to:c.UPDATE_SOURCE_ABORT},{from:d.SWITCH_STREAM_INIT,to:c.SWITCH_STREAM_INIT},{from:d.SWITCH_STREAM_SUCCESS,to:c.SWITCH_STREAM_SUCCESS},{from:d.SWITCH_STREAM_FAIL,to:c.SWITCH_STREAM_FAIL},{from:d.SWITCH_STREAM_ABORT,to:c.SWITCH_STREAM_ABORT},{from:u.CREATED,to:c.STREAM_INFO},{from:u.UPDATED,to:c.STREAM_INFO_UPDATE}];return i(),{destroy:r}}return{create:_}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="sourceManager.";return{BASE:e,SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_QUALITY:e+"streamQuality",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",STREAM_URL:e+"streamUrl",CONFIG:e+"config",PLAYING:e+"playing",BUFFERING:e+"buffering",PLAY_STATS:e+"playStats",APPLICATION_STATE_CHANGE:e+"applicationStateChange",UPDATE_SOURCE:e+"updateSource",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM:e+"switchStream",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_FAIL:e+"switchStreamFail",SWITCH_STREAM_ABORT:e+"switchStreamAbort",SET_ADAPTION:e+"setAdaption",PUBLIC_EVENT:e+"publicEvent"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="adaptionController.";return{BASE:e,SWITCH_SUGGESTION:e+"switchSuggestion"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="ressourceController.";return{BASE:e,STATS:e+"stats",BUFFERING:e+"buffering",INITIAL_SWITCH_UP:e+"initialSwitchUp",STREAM_INFO:e+"streamInfo",STREAM_QUALITY:e+"streamQuality",PAUSED:e+"paused",BUFFERING_LONG:e+"longBuffering"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="switchController.";return{BASE:e,STREAM_SWITCH:e+"streamSwitch",SUGGESTION_ABORT:e+"suggestionAbort"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(28),n(13),n(121),n(122),n(126),n(127),n(12)],r=function(e,t,n,i,r,a,o){function s(i){function s(){p.debugEnabled()&&p.debug("initialize"),e.add({target:i,listeners:_})}function u(){for(;m.length;)m.pop().destroy();e.remove({target:i,listeners:_})}function d(e){var t=e.data.config.source.options.adaption.rule,n=e.data.config.source.options.adaption;h=o.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&o.canUseHLS,n.useHLS=h,E(t,n)}function c(e){var t=e.data.source.options.adaption.rule,n=e.data.source.options.adaption;n.useHLS=h,E(t,n)}function l(e){E("none")}function f(e){var t=e.data.adaption.rule,n=e.data.adaption;n.useHLS=h,E(t,n)}function E(e,t){for(;m.length;)m.pop().destroy();T.hasOwnProperty(e)&&m.push(T[e].create(i,t))}var p=t.create("Adaptive.AdaptionController"),h=!1,m=[],_=[{type:n.CONFIG,listener:d},{type:n.UPDATE_SOURCE,listener:c},{type:n.SWITCH_STREAM,listener:l},{type:n.SET_ADAPTION,listener:f}],T={deviationOfMean:r,simpleTimeInterval:a};return s(),{destroy:u}}return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(28),n(13),n(121),n(122),n(123),n(124)],r=function(e,t,n,i,r,a){function o(o,s){function u(){k.debugEnabled()&&k.debug("initialize"),e.add({target:o,listeners:Z})}function d(){P(),e.remove({target:o,listeners:Z})}function c(e,t){return e<t}function l(e,t){return e>t}function f(e,t){k.debugEnabled()&&k.debug("bufferDevationBelowValue with limit "+t);for(var n=!0,i=0;i<=e.length-1;i++)if(!c(e[i],t)){n=!1;break}return n}function E(e,t){k.debugEnabled()&&k.debug("bufferDevationAboveValue with limit "+t);for(var n=!0,i=0;i<=e.length-1;i++)if(!l(e[i],t)){n=!1;break}return n}function p(e,t){k.debugEnabled()&&k.debug("bufferCurrentHasMinimumValue with limit "+t);for(var n=!1,i=0;i<=e.length-1;i++)if(c(e[i],t)){n=!0;break}return n}function h(e,t,n){return(t-e)/1e3<n}function m(e,t){k.debugEnabled()&&k.debug("isCriticalEventHistory with allowedTimeDifferenceSeconds "+t);var n=e.length;return h(e[0].timestamp,e[n-1].timestamp,t)}function _(e,t){var n=e.length;return n>0?e.slice(Math.max(n-t,0),n):[]}function T(e){k.debug((e?"allow":"deny")+" prediction"),e?(k.debugEnabled()&&k.debug("deny prediction"),clearTimeout(F),F=0,G=!0):F?k.debugEnabled()&&k.debug("allow prediction already in timeout"):(k.debugEnabled()&&k.debug("allow prediction in "+z+" seconds"),F=setTimeout(function(){k.debugEnabled()&&k.debug("allow prediction after timeout"),G=!1,F=0},1e3*z))}function S(e){if(k.debugEnabled()&&k.debug("make switch suggestion ?"),!G){k.debugEnabled()&&k.debug("making switch suggestion allowed");var t,n,r=e.buffer.delay.bufferDelaysStandardDeviations.length;k.debugEnabled()&&k.debug("bufferDelaysStandardDeviationsLength >= 5 && !wasAbortedHighest ?"),r>=B&&!w()&&(k.debugEnabled()&&k.debug("bufferDelaysStandardDeviationsLength >= 5 && !wasAbortedHighest !"),t=_(e.buffer.delay.bufferDelaysStandardDeviations,B),n=_(e.buffer.delay.bufferDelaysArithmeticMeans,B),k.debugEnabled()&&k.debug("bufferDevationAboveValue && bufferCurrentHasMinimumValue ?"),E(t,H)&&p(n,Y)&&(k.debugEnabled()&&k.debug("bufferDevationAboveValue && bufferCurrentHasMinimumValue !"),k.debugEnabled()&&k.debug("make suggestion to switch down"),T(!0),g(i.SWITCH_SUGGESTION,{suggestion:"down"}))),k.debugEnabled()&&k.debug("bufferDelaysStandardDeviationsLength >= 8 && !wasAbortedLowest ?"),r>=V&&!D()&&(k.debugEnabled()&&k.debug("bufferDelaysStandardDeviationsLength >= 8 && !wasAbortedLowest !"),t=_(e.buffer.delay.bufferDelaysStandardDeviations,V),k.debugEnabled()&&k.debug("bufferDevationBelowValue ?"),f(t,W)&&(k.debugEnabled()&&k.debug("bufferDevationBelowValue !"),k.debugEnabled()&&k.debug("make suggestion to switch up"),T(!0),g(i.SWITCH_SUGGESTION,{suggestion:"up"})))}}function g(e,t){k.debugEnabled()&&k.debug("make suggestion to switch "+t.suggestion+(t.priority?" with priority "+t.priority:" without priority")),o.emit(e,t)}function y(e){var t,n=e.data.startBufferings.length;k.debugEnabled()&&k.debug("evaluate buffering events ?"),G||w()||(k.debugEnabled()&&k.debug("evaluating buffering events allowed"),n>=K&&(k.debugEnabled()&&k.debug("startBufferingsLength "+n),t=_(e.data.startBufferings,3),k.debugEnabled()&&k.debug("startBufferingsCutOffLength >= 3 && isCriticalEventHistory ?"),t.length>=3&&m(t,j)?(k.debugEnabled()&&k.debug("startBufferingsCutOffLength >= 3 && isCriticalEventHistory !"),T(!0),g(i.SWITCH_SUGGESTION,{suggestion:"down",priority:1})):t.length>=2&&(t=_(e.data.startBufferings,2),k.debugEnabled()&&k.debug("startBufferingsCutOffLength >= 2 && isCriticalEventHistory ?"),m(t,j)&&(k.debugEnabled()&&k.debug("startBufferingsCutOffLength >= 2 && isCriticalEventHistory !"),T(!0),g(i.SWITCH_SUGGESTION,{suggestion:"down",priority:0})))))}function A(e){$||b(),S(e.data.deviationOfMean)}function v(e){y(e),P()}function b(e){k.debugEnabled()&&k.debug("success"),X||U(),L(),T(!1)}function I(e){k.debugEnabled()&&k.debug("error"),T(!1),P()}function R(e){b(e)}function O(e){Q=e.data.streamQuality.timestamp.standardDeviation,k.debugEnabled()&&k.debug("serverStandardDeviation "+Q)}function N(e){L(e.data.reason),I(e)}function C(e){L(),P()}function U(){$=!0,x&&clearTimeout(x),x=setTimeout(function(){T(!0),g(i.SWITCH_SUGGESTION,{suggestion:"up"})},1e3*q)}function P(){k.debugEnabled()&&k.debug("destroy initial switch up"),clearTimeout(x),X=!0}function w(){return"highest"===J}function D(){return"lowest"===J}function L(e){J=!!e&&e,J?k.debugEnabled()&&k.debug("aborted with reason: "+J):k.debugEnabled()&&k.debug("reset abort reason"),D()&&P()}function M(){k.debugEnabled()&&k.debug("onBufferingLong"),T(!0),g(i.SWITCH_SUGGESTION,{suggestion:"down",priority:1})}var x,F,k=t.create("Adaptive.DeviationOfMean.Adaption"),G=!0,B=5,H=.075,Y=.5,V=8,W=s&&s.useHLS?.035:.02,K=2,j=10,q=5,z=3,X=!1,J=!1,Q=0,$=!1,Z=[{type:n.UPDATE_SOURCE_SUCCESS,listener:b},{type:n.UPDATE_SOURCE_FAIL,listener:I},{type:n.UPDATE_SOURCE_ABORT,listener:I},{type:n.SWITCH_STREAM_SUCCESS,listener:b},{type:n.SWITCH_STREAM_FAIL,listener:I},{type:n.SWITCH_STREAM_ABORT,listener:I},{type:r.STATS,listener:A},{type:r.BUFFERING,listener:v},{type:r.STREAM_INFO,listener:R},{type:r.STREAM_QUALITY,listener:O},{type:r.PAUSED,listener:C},{type:r.BUFFERING_LONG,listener:M},{type:a.SUGGESTION_ABORT,listener:N}];return u(),{destroy:d}}return{create:o}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(28),n(13),n(121),n(122),n(123)],r=function(e,t,n,i,r){function a(n,a){function o(){d.debugEnabled()&&d.debug("initialize"),e.add({target:n,listeners:l})}function s(){clearTimeout(c),e.remove({target:n,listeners:l})}function u(e){d.debugEnabled()&&d.debug("stats"),c&&(clearTimeout(c),c=0),c=setTimeout(function(){n.emit(i.SWITCH_SUGGESTION,{suggestion:"auto"})},1e4)}var d=t.create("Adaptive.SimpleTimeInterval.Adaption"),c=0,l=[{type:r.STATS,listener:u}];return o(),{destroy:s}}return{create:a}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(28),n(13),n(53),n(121),n(123),n(129),n(131)],r=function(e,t,n,i,r,a,o){function s(n){function r(){E.debugEnabled()&&E.debug("initialize"),e.add({target:n,listeners:h})}function s(){for(;p.length;)p.pop().destroy();e.remove({target:n,listeners:h})}function u(e){var t=e.data.config.source.options.adaption.rule,n=e.data.config.source.options.adaption;f(t,n)}function d(e){var t=e.data.source.options.adaption.rule,n=e.data.source.options.adaption;f(t,n)}function c(e){f("none")}function l(e){var t=e.data.adaption.rule,n=e.data.adaption;f(t,n)}function f(e,t){for(;p.length;)p.pop().destroy();m.hasOwnProperty(e)&&p.push(m[e].create(n,t))}var E=t.create("Adaptive.RessourceController"),p=[],h=[{type:i.CONFIG,listener:u},{type:i.UPDATE_SOURCE,listener:d},{type:i.SWITCH_STREAM,listener:c},{type:i.SET_ADAPTION,listener:l}],m={deviationOfMean:a,simpleTimeInterval:o};return r(),{destroy:s}}return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(27),n(28),n(13),n(53),n(130),n(121),n(123)],r=function(e,t,n,i,r,a,o){function s(i,s){function u(){P.debugEnabled()&&P.debug("initialize"),T(),t.add({target:i,listeners:X})}function d(){t.remove({target:i,listeners:X})}function c(t){for(I||P.debugEnabled()&&P.debug("initial player state"),I=t.data.state,I===e.PAUSED&&"playbackrestart"!==t.data.reason&&(T(),i.emit(o.PAUSED,{paused:{}})),I===e.PLAYING&&L.length&&L[L.length-1].state===e.LOADING&&(P.debugEnabled()&&P.debug("setRessourceBlockTimeout from playing"),m());L.length>K;)L.shift();L.push({state:I,timestamp:performance.now()}),N&&b()}function l(e){w||(C.add(e.data.stats.buffer.delay.current),C.count%x===0&&(g(),y(),S(C,R.adaptive.buffer.delay),A()))}function f(e){for(P.debugEnabled()&&P.debug("push startBuffering!"),D.push({event:e.data,timestamp:performance.now()});D.length>j;)D.shift();w?P.debugEnabled()&&P.debug("block emit startBuffering!"):(P.debugEnabled()&&P.debug("emit startBuffering!"),i.emit(o.BUFFERING,{startBufferings:D})),v()}function E(e){i.emit(o.STREAM_INFO,{streamInfo:{}}),T()}function p(e){i.emit(o.STREAM_QUALITY,{streamQuality:e.data.onStreamQuality})}function h(e){P.debugEnabled()&&P.debug("setRessourceBlockTimeout from success"),m()}function m(){P.debugEnabled()&&P.debug("setRessourceBlockTimeout"),_(!0),clearTimeout(O),O=setTimeout(function(){P.debugEnabled()&&P.debug("setRessourceBlockTimeout fired"),_(!1),I===e.BUFFERING?(P.debugEnabled()&&P.debug("setRessourceBlockTimeout fired but in buffering state"),i.emit(o.BUFFERING,{startBufferings:D})):(P.debugEnabled()&&P.debug("setRessourceBlockTimeout fired & not in buffering state"),T())},q)}function _(e){P.debugEnabled()&&P.debug("setRessourceBlock "+(e?"true":"false")),w=e}function T(){for(P.debugEnabled()&&P.debug("reset stats"),R={adaptive:{buffer:{delay:{samples:0,frequency:k,avg:0,min:0,max:0,deviation:0,count:0}}}},U=r.create(H,Y),bufferDelaysStandardDeviation=r.create(F,k),C=r.create(G,B),M=r.create(V,W);D.length;)D.pop()}function S(e,t){t.avg=e.arithmetic,t.min=e.minimum,t.max=e.maximum,t.deviation=e.deviation,t.samples=e.values.length,t.count=e.count,t.bufferDelaysArithmeticMeans=U.values,t.bufferDelaysStandardDeviations=M.values}function g(){U.add(C.arithmetic)}function y(){bufferDelaysStandardDeviation.add(U.values[U.values.length-1]),M.add(bufferDelaysStandardDeviation.deviation)}function A(){i.emit(o.STATS,{deviationOfMean:R.adaptive})}function v(){P.debugEnabled()&&P.debug("setBufferingLongTimeout"),b(),N=setTimeout(function(){P.debugEnabled()&&P.debug("setBufferingLongTimeout fired"),I===e.BUFFERING?(P.debugEnabled()&&P.debug("setBufferingLongTimeout fired and still in buffering state"),i.emit(o.BUFFERING_LONG)):P.debugEnabled()&&P.debug("setBufferingLongTimeout fired and not in buffering state")},z)}function b(){P.debugEnabled()&&P.debug("clearBufferingLongTimeout"),clearTimeout(N),N=0}var I,R,O,N,C,U,P=n.create("Adaptive.DeviationOfMean.Ressource"),w=!1,D=[],L=[],M=[],x=10,F=10,k=1,G=10,B=1,H=20,Y=1,V=20,W=1,K=100,j=10,q=2e3,z=3e3,X=[{type:a.APPLICATION_STATE_CHANGE,listener:c},{type:a.PLAY_STATS,listener:l},{type:a.BUFFERING,listener:f},{type:a.STREAM_INFO,listener:E},{type:a.STREAM_QUALITY,listener:p},{type:a.UPDATE_SOURCE_SUCCESS,listener:h},{type:a.SWITCH_STREAM_SUCCESS,listener:h}];return u(),{destroy:d}}return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e){return e.reduce(function(e,t){return e+t},0)/e.length}function t(e){return Math.pow(e.reduce(function(e,t){return e?t?e*t:e:t},0),1/e.length)}function n(e){var t=e.reduce(function(e,t,n){return t?n-1?e+1/t:(e?1/e:0)+1/t:e},0);return t?e.length/t:0}function i(t,n){var i=n||e(t);return t.length>1?Math.sqrt(t.reduce(function(e,t){return e+Math.pow(t-i,2)},0)/(t.length-1)):0}function r(r,a){function o(e){for(u.push(e);u.length>r;)u.shift();return d.count++,d.changed=!1,(!a||a&&c%a===0)&&s(),{minimum:d.min,maximum:d.max,arithmetic:d.arithmetic,geometric:d.geometric,harmonic:d.harmonic,deviation:d.deviation,count:d.count}}function s(){var r=JSON.parse(JSON.stringify(u)).sort(function(e,t){return e-t},0);d.arithmetic=e(r),d.geometric=t(r),d.harmonic=n(r),d.minimum=r[0],d.maximum=r[r.length-1],d.deviation=i(r,d.arithmetic),d.changed=!0}var u=[],d={},c=0;return d={add:o,minimum:0,maximum:0,arithmetic:0,geometric:0,harmonic:0,deviation:0,count:0,values:u,changed:!1}}return{create:r}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(27),n(28),n(13),n(53),n(130),n(121),n(123)],r=function(e,t,n,i,r,a,o){function s(e,i){function r(){l.debugEnabled()&&l.debug("initialize"),t.add({target:e,listeners:f})}function s(){t.remove({target:e,listeners:f})}function u(e){c(e)}function d(e){c(e)}function c(t){l.debug(t.name),e.emit(o.STATS,{simpleTimeInterval:{}})}var l=n.create("Adaptive.SimpleTimeInterval.Ressource"),f=[{type:a.STREAM_INFO,listener:u},{type:a.UPDATE_SOURCE_SUCCESS,listener:d},{type:a.UPDATE_SOURCE_FAIL,listener:d},{type:a.UPDATE_SOURCE_ABORT,listener:d},{type:a.SWITCH_STREAM_SUCCESS,listener:d},{type:a.SWITCH_STREAM_FAIL,listener:d},{type:a.SWITCH_STREAM_ABORT,listener:d}];return r(),{destroy:s}}return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(28),n(13),n(53),n(121),n(124),n(122)],r=function(e,t,n,i,r,a){function o(o){function s(){C.debugEnabled()&&C.debug("initialize"),e.add({target:o,listeners:D})}function u(){e.remove({target:o,listeners:D})}function d(e){for(I=e.data.config.source,N=I.entries.length,O=I.startIndex;U.length;)U.pop();U.push(-1),p("init")}function c(e){for(I=e.data.source,N=I.entries.length,O=I.startIndex;U.length;)U.pop();U.push(-1),w="update",p(w)}function l(e){R||C.debugEnabled()&&C.debug("initial player state"),R=e.data.state}function f(e){C.debugEnabled()&&C.debug("suggest stream to switch "+e.data.suggestion),C.debugEnabled()&&C.debug("current stream has index "+O+" of "+(N-1)),w&&(!e.data.priority||e.data.priority&&1!==e.data.priority)?(C.debugEnabled()&&C.debug("switch already initialized, abort"),o.emit(r.SUGGESTION_ABORT,{reason:"initialized"})):(w=void 0,e.data.suggestion&&("down"===e.data.suggestion?O<N-1?(U.push(O),O=1===e.data.priority?N-1:O+1,w="down"):(C.debugEnabled()&&C.debug("suggest to switch down but highest index reached, abort"),o.emit(r.SUGGESTION_ABORT,{reason:"highest"})):"up"===e.data.suggestion?O>0?(U.push(O),O-=1,w="up"):(C.debugEnabled()&&C.debug("suggest to switch up but lowest index reached, abort"),o.emit(r.SUGGESTION_ABORT,{reason:"lowest"})):"auto"===e.data.suggestion&&(previousStreamIndex<O&&O<N-1||0===O?(U.push(O),O+=1,w="down"):(previousStreamIndex>O&&O>0||O===N-1)&&(U.push(O),O-=1,w="up"))),w?p(w):C.debugEnabled()&&C.debug("switch not initialized"))}function E(e){C.debugEnabled()&&C.debug("forced to switch to stream with index "+e.data.index),C.debugEnabled()&&C.debug("current stream has index "+O+" of "+(N-1)),b(e.data.index)&&(U.push(O),O=e.data.index,w="direct",I.options.adaption.rule="none",p(w))}function p(e){C.debugEnabled()&&C.debug("apply switch to stream with index "+O),P=Math.round(1e11*Math.random());var t=n.copy(I.options.switch);t.tag="update"===e?t.tag:I.entries[O].h5live.rtmp.streamname+" streamSwitch "+P,t.pauseOnError="update"===e||t.pauseOnError,C.debugEnabled()&&C.debug('switch has tag "'+t.tag+'"');var i={source:n.copy(I),rule:n.copy(I.options.adaption.rule),entry:n.copy(I.entries[O]),options:n.copy(t),type:n.copy(e),id:n.copy(P)};o.emit(r.STREAM_SWITCH,i)}function h(e){}function m(e){w=!1}function _(e){w=!1}function T(e){w=!1}function S(e){var t=e.data.tag,n=t.split(" streamSwitch "+P);n.length>1&&n[0]===I.entries[O].h5live.rtmp.streamname&&C.debugEnabled()&&C.debug('stream switch init with id "'+t+'"')}function g(e){var t=e.data.tag,n=t.split(" streamSwitch "+P);n.length>1&&n[0]===I.entries[O].h5live.rtmp.streamname&&(C.debugEnabled()&&C.debug('stream switch success with tag "'+t+'"'),w=!1)}function y(e){var t=e.data.tag,n=t.split(" streamSwitch "+P);n.length>1&&n[0]===I.entries[O].h5live.rtmp.streamname&&(C.debugEnabled()&&C.debug('stream switch fail with tag "'+t+'"'),O=U.pop(),w=!1)}function A(e){var t=e.data.tag,n=t.split(" streamSwitch "+P);n.length>1&&n[0]===I.entries[O].h5live.rtmp.streamname&&(C.debugEnabled()&&C.debug('stream switch abort with tag "'+t+'"'),(!e.data||!e.data.reason||e.data&&e.data.reason&&"equal"!==e.data.reason)&&(O=U.pop()),w=!1)}function v(e){I.options.adaption=e.data.adaption}function b(e){return e<N&&e>-1}var I,R,O,N,C=t.create("SwitchRequestController"),U=[],P=0,w=!1,D=[{type:i.CONFIG,listener:d},{type:i.SWITCH_STREAM,listener:E},{type:i.UPDATE_SOURCE,listener:c},{type:i.APPLICATION_STATE_CHANGE,listener:l},{type:i.UPDATE_SOURCE_INIT,listener:h},{type:i.UPDATE_SOURCE_SUCCESS,listener:m},{type:i.UPDATE_SOURCE_FAIL,listener:_},{type:i.UPDATE_SOURCE_ABORT,listener:T},{type:i.SWITCH_STREAM_INIT,listener:S},{type:i.SWITCH_STREAM_SUCCESS,listener:g},{type:i.SWITCH_STREAM_FAIL,listener:y},{type:i.SWITCH_STREAM_ABORT,listener:A},{type:i.SET_ADAPTION,listener:v},{type:a.SWITCH_SUGGESTION,listener:f}];return s(),{destroy:u}}return{create:o}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(11),n(28),n(102),n(92),n(94),n(93),n(95),n(83),n(134),n(135),n(136),n(139)],r=function(e,t,n,i,r,a,o,s,u,d,c,l){"use strict";function f(t){function n(){c=s.create(t,E,m),f=s.create(E,t,h),p.push(l.create(E))}function a(){for(c.destroy(),c=null,f.destroy(),f=null;p.length;)p.pop().destroy()}var c,f,E=new e,p=[],h=[{from:d.CONNECTING,to:o.CONNECTING},{from:d.CONNECTED,to:o.CONNECTED},{from:d.RESUMING,to:o.RESUMING},{from:d.DESTROYED,to:o.DESTROYED},{from:d.RECONNECTING,to:o.RECONNECTING},{from:d.RECONNECTION_IMMINENT,to:o.RECONNECTION_IMMINENT},{from:d.RECONNECTION_CONFIG_INVALID,to:o.RECONNECTION_CONFIG_INVALID},{from:d.DISCONNECTED,to:o.DISCONNECTED},{from:d.INITIALIZATION_ERROR,to:o.INITIALIZATION_ERROR},{from:d.CONNECTION_ERROR,to:o.CONNECTION_ERROR},{from:d.ERROR,to:o.ERROR},{from:d.WARNING,to:o.WARNING},{from:d.STATE_CHANGE,to:o.STATE_CHANGE},{from:d.UPDATE_SOURCE_SUCCESS,to:o.UPDATE_SOURCE_SUCCESS},{from:d.UPDATE_SOURCE_FAIL,to:o.UPDATE_SOURCE_FAIL},{from:d.UPDATE_SOURCE_ABORT,to:o.UPDATE_SOURCE_ABORT},{from:d.META_DATA,to:o.META_DATA},{from:d.RANDOM_ACCESS_POINT,to:o.RANDOM_ACCESS_POINT},{from:d.SERVER_INFO,to:o.SERVER_INFO},{from:d.STREAM_INFO,to:o.STREAM_INFO},{from:d.STREAM_INFO_UPDATE,to:o.STREAM_INFO_UPDATE},{from:d.RAW_PACKET,to:o.RAW_PACKET},{from:d.STREAM_FRAGMENT,to:o.STREAM_FRAGMENT},{from:d.STREAM_STATUS,to:o.STREAM_STATUS},{from:d.STREAM_QUALITY,to:o.STREAM_QUALITY}],m=[{from:i.CONNECT,to:u.CONNECT},{from:i.DISCONNECT,to:u.DISCONNECT},{from:i.NETWORK_PLAY,to:u.PLAY},{from:i.PAUSE,to:u.PAUSE},{from:i.CONFIG,to:u.CONFIG},{from:i.NETWORK_UPDATE_SOURCE,to:u.UPDATE_SOURCE},{from:r.STATE_CHANGE,to:u.STATE_CHANGE}];return n(),{destroy:a}}return{create:f}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="networkmanager.";return{BASE:e,CONNECT:e+"connect",DISCONNECT:e+"disconnect",PLAY:e+"play",PAUSE:e+"pause",CONFIG:e+"config",UPDATE_SOURCE:e+"updateSource",STATE_CHANGE:e+"stateChange"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="webSocketHandler.";return{BASE:e,CONNECTING:e+"connecting",CONNECTED:e+"connected",DISCONNECTED:e+"disconnected",RESUMING:e+"resuming",MESSAGE:e+"message",RECONNECTION_IMMINENT:e+"reconnectionImminent",RECONNECTING:e+"reconnecting",RECONNECTION_CONFIG_INVALID:e+"reconnectionConfigInvalid",CONNECTION_ERROR:e+"connectionError",INITIALIZATION_ERROR:e+"initializationError",DESTROYED:e+"destroyed",ERROR:e+"error",WARNING:e+"warning",STATE_CHANGE:e+"stateChange",META_DATA:e+"metaData",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",RAW_PACKET:e+"raw",STREAM_STATUS:e+"streamStatus",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",STREAM_QUALITY:e+"streamQuality"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(28),n(137),n(138)],r=function(e,t,n){"use strict";function i(i){function r(){e.add({target:i,listeners:c})}function a(){e.remove({target:i,listeners:c})}function o(e){if(e){var n=e.data;if("string"==typeof n){var r=JSON.parse(n);if(r&&r.eventType){var a=r.eventType.substr(2,r.eventType.length-2),o=t.BASE+a[0].toLowerCase()+a.slice(1);o.indexOf(t.STREAM_INFO)!==-1&&s(),i.emit(o,r)}}else if(n instanceof ArrayBuffer&&n.byteLength>0){var c=new Uint8Array(n);if(i.emit(t.RAW_PACKET),n.byteLength>=8&&109===c[4]&&111===c[5]&&111===c[6]&&(102===c[7]||118===c[7])){for(var l=new Uint8Array(d),f=0,E=0;E<u.length;E++)l.set(u[E],f),f+=u[E].length;s(),i.emit(t.STREAM_FRAGMENT,l)}u.push(c),d+=n.byteLength}}}function s(){for(;u.length;)u.pop();d=0}var u=[],d=0,c=[{type:n.MESSAGE,listener:o}];return r(),{destroy:a}}return{create:i}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="message.";return{BASE:e,META_DATA:e+"metaData",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",RAW_PACKET:e+"raw",STREAM_STATUS:e+"streamStatus",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_ERROR:e+"updateSourceError",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",STREAM_QUALITY:e+"streamQuality"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="webSocketProxy.";return{BASE:e,CONNECTING:e+"connecting",CONNECTED:e+"connected",DISCONNECTED:e+"disconnected",RESUMING:e+"resuming",MESSAGE:e+"message",RECONNECTION_IMMINENT:e+"reconnectionImminent",RECONNECTING:e+"reconnecting",RECONNECTION_CONFIG_INVALID:e+"reconnectionConfigInvalid",CONNECTION_ERROR:e+"connectionError",INITIALIZATION_ERROR:e+"initializationError",DESTROYED:e+"destroyed",ERROR:e+"error",STATE_CHANGE:e+"stateChange",META_DATA:e+"metaData",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",RAW_PACKET:e+"raw",STREAM_STATUS:e+"streamStatus",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_ERROR:e+"updateSourceError",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",STREAM_QUALITY:e+"streamQuality"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(12),n(53),n(28),n(89),n(27),n(76),n(134),n(135),n(138),n(140),n(143),n(144),n(145)],r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,E){function p(e){function n(){i.add({target:e,listeners:J}),i.add({target:e,listeners:Q})}function r(){h.debugEnabled()&&h.debug("destroy");
for(var t in Z)Z.hasOwnProperty(t)&&(Z[t].destroy(),delete Z[t]);i.remove({target:e,listeners:J}),i.remove({target:e,listeners:Q}),i.remove({target:e,listeners:$})}function o(t){h.debugEnabled()&&h.debug("on connect"),1===Z.length&&W().isWaitForReconnect()?W().connect(t):1===Z.length?(Z.push(c.create(e)),K().connect(t)):Z.length||(Z[0]=c.create(e),Z[0].setActive(!0),W().connect(t))}function l(e){if(h.debugEnabled()&&h.debug("on disconnect"),1!==Z.length||!W().isWaitForReconnect())for(h.debugEnabled()&&h.debug("not waiting for reconnect");Z.length;)Z.pop().destroy()}function f(){h.debugEnabled()&&h.debug("on play"),1===Z.length&&Z[0].play()}function E(){h.debugEnabled()&&h.debug("on pause"),1===Z.length&&Z[0].pause()}function p(t){if(h.debugEnabled()&&h.debug("on update source"),0===Z.length)t.data.update.options.method="client",o(t);else{for(;Z.length>1;){var n=K().getConnectData().update.options;e.emit(d.UPDATE_SOURCE_ABORT,{reason:"superseded",tag:n.tag,count:n.count}),z()}var i=Z[0].getConnectData(),r=Z[0].getServerInfo(),a=i.config.server.websocket!==t.data.config.server.websocket,s=!r,u=!s&&r.capabilities.indexOf("onUpdateSource")===-1,c="client"===t.data.update.options.method;a||s||u||c?(t.data.update.options.method="client",o(t)):(t.data.update.options.method="server",Z[0].updateSource(t))}}function m(e){e.data.state===a.PAUSING&&X!==a.RECONNECTION_IMMINENT&&Z.length&&W().reset(),X=e.data.state}function _(n){var r=t.mustUseHLS||n.data.config.playback.allowSafariHlsFallback&&t.canUseHLS;r&&($=$.filter(function(e){return e.type===d.META_DATA})),i.add({target:e,listeners:$})}function T(e){h.debugEnabled()&&h.debug("fired "+e.name),e.active&&V(e)}function S(e){h.debugEnabled()&&h.debug("fired "+e.name),e.active&&V(e)}function g(t){h.debugEnabled()&&h.debug("fired "+t.name),t.update&&e.emit(u.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id}),(j()||t.active)&&V(t),z()}function y(e){h.debugEnabled()&&h.debug("fired "+e.name),e.active&&V(e)}function A(e){h.detailEnabled()&&h.detail("fired "+e.name),e.active&&V(e)}function v(e){h.debugEnabled()&&h.debug("fired "+e.name),e.active&&V(e)}function b(e){h.debugEnabled()&&h.debug("fired "+e.name),e.active&&V(e)}function I(t){h.debugEnabled()&&h.debug("fired "+t.name),t.update&&e.emit(u.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id}),t.active&&V(t)}function R(e){h.debugEnabled()&&h.debug("fired "+e.name),(j()||e.active)&&V(e),z()}function O(t){h.debugEnabled()&&h.debug("fired "+t.name),t.update&&e.emit(u.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id}),(j()||t.active)&&V(t),z()}function N(e){h.debugEnabled()&&h.debug("fired "+e.name),e.active&&V(e)}function C(t){h.debugEnabled()&&h.debug("fired "+t.name),t.update&&e.emit(u.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id}),(j()||t.active)&&V(t),z()}function U(e){h.debugEnabled()&&h.debug("fired "+e.name),e.active&&V(e)}function P(e){h.debugEnabled()&&h.debug("fired "+e.name),e.active&&V(e)}function w(e){h.debugEnabled()&&h.debug("fired "+e.name),e.active&&V(e)}function D(e){h.debugEnabled()&&h.debug("fired "+e.name),e.active&&V(e)}function L(e){h.debugEnabled()&&h.debug("fired "+e.name),e.active&&V(e)}function M(e){e.active&&V(e)}function x(e){h.debugEnabled()&&h.debug("fired "+e.name),e.active&&V(e)}function F(e){e.active&&V(e)}function k(e){h.debugEnabled()&&h.debug("fired "+e.name),e.active&&!e.update&&V(e)}function G(e){h.debugEnabled()&&h.debug("fired "+e.name),e.active&&V(e)}function B(t){h.debugEnabled()&&h.debug("fired "+t.name),t.active||(q(),t.active=!0,K().setActive(!0)),h.debugEnabled()&&h.debug("trigger update source success"),e.emit(u.UPDATE_SOURCE_SUCCESS,{tag:t.data.tag,count:t.data.count,type:t.data.type,id:t.data.id})}function H(t){h.debugEnabled()&&h.debug("fired "+t.name),h.debugEnabled()&&h.debug("trigger update source fail"),e.emit(u.UPDATE_SOURCE_FAIL,{tag:t.data.tag,count:t.data.count,code:t.data.code,message:t.data.message,type:t.data.type,id:t.data.id}),j()&&(h.debugEnabled()&&h.debug("trigger disconnected"),e.emit(u.DISCONNECTED,{code:t.data.code,message:t.data.message})),z()}function Y(t){h.debugEnabled()&&h.debug("fired "+t.name),h.debugEnabled()&&h.debug("trigger update source abort"),e.emit(u.UPDATE_SOURCE_ABORT,{tag:t.data.tag,count:t.data.count,reason:t.data.reason,type:t.data.type,id:t.data.id})}function V(t){t.name=t.name.replace(d.BASE,u.BASE),e.emit(t.name,t)}function W(){h.debugEnabled()&&h.debug("get active connection");for(var e=!1,t=0;t<Z.length;t+=1)if(Z[t].isActive()){h.debugEnabled()&&h.debug("found active connection"),e=Z[t];break}return e}function K(){var e=!1;return Z.length&&(e=Z[Z.length-1]),e}function j(){var e=!!K()&&K().shouldPauseOnError();return h.debugEnabled()&&h.debug("should pause on error: "+e),e}function q(){h.debugEnabled()&&h.debug("drop active connection?"),Z.length>1&&(h.debugEnabled()&&h.debug("drop active connection!"),Z.shift().destroy())}function z(){h.debugEnabled()&&h.debug("drop inactive connection?"),Z.length>1&&(h.debugEnabled()&&h.debug("drop inactive connection!"),Z.pop().destroy())}var X,J=[{type:s.CONNECT,listener:o},{type:s.DISCONNECT,listener:l},{type:s.PLAY,listener:f},{type:s.PAUSE,listener:E},{type:s.UPDATE_SOURCE,listener:p},{type:s.STATE_CHANGE,listener:m},{type:s.CONFIG,listener:_}],Q=[{type:d.CONNECTING,listener:T},{type:d.CONNECTED,listener:S},{type:d.DISCONNECTED,listener:g},{type:d.RESUMING,listener:y},{type:d.MESSAGE,listener:A},{type:d.RECONNECTION_IMMINENT,listener:v},{type:d.RECONNECTING,listener:b},{type:d.RECONNECTION_CONFIG_INVALID,listener:I},{type:d.CONNECTION_ERROR,listener:R},{type:d.INITIALIZATION_ERROR,listener:O},{type:d.DESTROYED,listener:N},{type:d.ERROR,listener:C},{type:d.STATE_CHANGE,listener:U}],$=[{type:d.SERVER_INFO,listener:w},{type:d.STREAM_INFO,listener:D},{type:d.STREAM_INFO_UPDATE,listener:L},{type:d.STREAM_FRAGMENT,listener:M},{type:d.RANDOM_ACCESS_POINT,listener:x},{type:d.RAW_PACKET,listener:F},{type:d.STREAM_STATUS,listener:k},{type:d.STREAM_QUALITY,listener:G},{type:d.UPDATE_SOURCE_SUCCESS,listener:B},{type:d.UPDATE_SOURCE_ERROR,listener:H},{type:d.UPDATE_SOURCE_ABORT,listener:Y},{type:d.META_DATA,listener:P}],Z=[];return n(),{destroy:r}}var h=e.create("WebSocketHandler");return{create:p}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(11),n(13),n(12),n(53),n(28),n(89),n(5),n(90),n(141),n(135),n(138),n(137),n(142),n(136),n(143),n(144),n(145),n(146)],r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,E,p,h,m,_){function T(d){function T(){ye.debugEnabled()&&ye.debug("init"),Pe.push(E.create(Ae)),r.add({target:Ae,listeners:be})}function A(){for(ye.debugEnabled()&&ye.debug("destroy");Pe.length;)Pe.pop().destroy();ue(),r.remove({target:Ae,listeners:be})}function v(e){if(ye.debugEnabled()&&ye.debug("on connect"),Ce=!1,clearTimeout(pe),_e=e.data,_e.count=Ue.retryCount,_e.reconnect){var t=p.validate(_e.reconnect);if(t.success)for(var n in _e.reconnect)_e.reconnect.hasOwnProperty(n)&&(Ue[n]=_e.reconnect[n]);else d.emit(c.RECONNECTION_CONFIG_INVALID,fe({reason:t.reason}))}if(_e.timeouts){var i=1e3*_e.timeouts.connecting;S=Math.max(Math.min(i,y),g)}try{Te=e.data.update?e.data:void 0,oe(_e.url),d.emit(e.name?c.CONNECTING:c.RECONNECTING,fe(_e)),x()&&(clearTimeout(me),me=setTimeout(re,1e3*e.data.update.options.timeout))}catch(e){var r="Connection initialization error.",a=e?ce(e):void 0;a&&a.message&&(r=a.message),a&&a.code&&(r+=" (code:"+a.code+")"),a&&a.name&&(r=a.name+": "+r),d.emit(c.INITIALIZATION_ERROR,fe({code:o.NETWORK.COULD_NOT_ESTABLISH_CONNECTION,message:r}))}}function b(){ye.debugEnabled()&&ye.debug("on play");try{_e=m.create(_e,!1),null===Ie?oe(_e.url):(ye.debugEnabled()&&ye.debug("sending play to server"),de("onPlay"),d.emit(c.RESUMING,fe()))}catch(e){d.emit(c.ERROR,fe(ce(e)))}}function I(){ye.debugEnabled()&&ye.debug("on pause");try{null!==Ie&&(ye.debugEnabled()&&ye.debug("sending pause to server"),_e=m.create(_e,!0),de("onPause"))}catch(e){d.emit(c.ERROR,fe(ce(e)))}}function R(e){se(e.data.silent)}function O(e){if(ye.debugEnabled()&&ye.debug("on update source"),Se&&Se.capabilities.indexOf("onUpdateSource")!==-1&&"server"===e.data.update.options.method&&null!==Ie){clearTimeout(me),me=setTimeout(re,1e3*e.data.update.options.timeout),De[e.data.update.options.count]=e.data,Te=e.data,Te.count=Ue.retryCount;var t=Te.update,n={options:{fastStart:t.options.fastStart,incTiming:t.options.incTiming},tag:t.options.tag,count:t.options.count};if(t.entry.h5live.rtmp&&t.entry.h5live.rtmp.url&&t.entry.h5live.rtmp.streamname&&(n.rtmp={url:t.entry.h5live.rtmp.url,stream:t.entry.h5live.rtmp.streamname}),t.entry.h5live.params&&(n.params=t.entry.h5live.params),t.entry.h5live.security&&"object"==typeof t.entry.h5live.security){n.security={};for(var i in t.entry.h5live.security)t.entry.h5live.security.hasOwnProperty(i)&&(n.security[i]=t.entry.h5live.security[i])}de("onUpdateSource",n)}}function N(){Ce=!1,Ue.retryCount=0}function C(){var e=Re;return Re=null!==Ie?Ie.readyState+2:a.UNINITIALIZED,Re!==e&&d.emit(c.STATE_CHANGE,fe({connectionState:Re})),Re}function U(){return Se}function P(){return _e}function w(){return Ie}function D(){return Ce}function L(e){Ne=!!e}function M(){return Ne}function x(){return!!Te&&Te}function F(){return x()&&"client"===Te.update.options.method}function k(){return P().config.query.cid}function G(e){return k()===e}function B(){return P().update&&P().update.options.pauseOnError||Te&&Te.update.options.pauseOnError}function H(){ye.debugEnabled()&&ye.debug("connection open"),setTimeout(function(){Ce||null===Ie||(clearTimeout(Oe),d.emit(c.CONNECTED,fe({count:Ue.retryCount})),Ue.retryCount=0)},200)}function Y(e){ye.debugEnabled()&&ye.debug("connection close"),clearTimeout(Oe);var t=e;if(n.isTridentBrowser&&1005===e.code&&(t=i.copy(e),t.code=parseInt(e.reason.split(" ")[1])),4200===t.code)se(!0);else{var r=t.code,a="Unknown reason.";u.hasOwnProperty(+r)&&(a=u[+r]),r>1e3&&r<4e3&&(r+=3100),ae(t,c.DISCONNECTED,fe({code:r,message:a}))}}function V(e){Ae.emit(c.MESSAGE,fe(e.data))}function W(e){ye.debugEnabled()&&ye.debug("connection error"),clearTimeout(he),he=setTimeout(function(){if(!Ce&&null!==Ie){clearTimeout(Oe);var t="Connection error.",n=e?e:void 0;n&&n.message&&(t=n.message),n&&n.code&&(t+=" (code:"+n.code+")"),n&&n.name&&(t=n.name+": "+t),ae(e,c.CONNECTION_ERROR,fe({code:o.NETWORK.CONNECTION_ERROR,message:t}))}},200)}function K(){ye.debugEnabled()&&ye.debug("connection timeout"),Ce||null===Ie||ae(null,c.INITIALIZATION_ERROR,fe({code:o.NETWORK.COULD_NOT_ESTABLISH_CONNECTION,message:"Could not open connection. Timeout reached."}))}function j(e){Ee(e)}function q(e){Se=e.data.onServerInfo,Ee(e)}function z(e){x()&&Se.events.indexOf("onUpdateSourceSuccess")===-1&&(tag=Te.update.options.tag,count=Te.update.options.count,d.emit(c.UPDATE_SOURCE_SUCCESS,fe({tag:tag,count:count,type:Te.update.type,id:Te.update.id})),De[count]?(_e=i.copy(De[count]),Te===De[count]&&(Te=void 0),delete De[count]):(_e=Te,Te=void 0)),Ee(e),ge=e.data.onStreamInfo}function X(e){ge=e.data.onStreamInfo,Ee(e)}function J(e){Ee(e)}function Q(e){Ee(e)}function $(e){Ee(e)}function Z(e){F()&&"stopped"===e.data.onStreamStatus.status&&d.emit(c.UPDATE_SOURCE_ERROR,fe({tag:Te.update.options.tag,count:Te.update.options.count,code:o.NETWORK.SOURCE_STREAM_STOPPED,message:s.NETWORK.SOURCE_STREAM_STOPPED,type:Te.update.type,id:Te.update.id})),Ee(e)}function ee(e){Ee(e)}function te(e){if(x()&&we.requestId>=e.data.onUpdateSourceSuccess.requestId){var t=e.data[e.data.eventType].tag,n=e.data[e.data.eventType].count,r=De[n]?De[n].update.type:Te.update.type,a=De[n]?De[n].update.id:Te.update.id;0===n&&(t=Te.update.options.tag,n=Te.update.options.count),d.emit(c.UPDATE_SOURCE_SUCCESS,fe({tag:t,count:n,type:r,id:a})),De[n]?(_e=i.copy(De[n]),Te===De[n]&&(Te=void 0),delete De[n]):(_e=Te,Te=void 0)}}function ne(e){if(x()&&we.requestId>=e.data.onUpdateSourceError.requestId){var t=e.data.onUpdateSourceError.code,n="Unknown reason.";u.hasOwnProperty(+t)&&(n=u[+t]),t>1e3&&t<4e3&&(t+=3100);var i=e.data[e.data.eventType].tag,r=e.data[e.data.eventType].count,a=De[r]?De[r].update.type:Te.update.type,o=De[r]?De[r].update.id:Te.update.id;0===r&&(i=Te.update.options.tag,r=Te.update.options.count),d.emit(c.UPDATE_SOURCE_ERROR,fe({tag:i,count:r,code:t,message:n,type:a,id:o})),Te===De[r]&&(Te=void 0),delete De[r]}}function ie(e){if(x()&&we.requestId>=e.data.onUpdateSourceAbort.requestId){var t=e.data[e.data.eventType].tag,n=e.data[e.data.eventType].count,i=De[n]?De[n].update.type:Te.update.type,r=De[n]?De[n].update.id:Te.update.id;0===n&&(t=Te.update.options.tag,n=Te.update.options.count);var a=e.data[e.data.eventType].reason;d.emit(c.UPDATE_SOURCE_ABORT,fe({tag:t,count:n,reason:a,type:i,id:r})),Te===De[n]&&(Te=void 0),delete De[n]}}function re(){if(x())for(d.emit(c.UPDATE_SOURCE_ERROR,fe({tag:Te.update.options.tag,count:Te.update.options.count,code:o.NETWORK.SOURCE_TIMEOUT,message:s.NETWORK.SOURCE_TIMEOUT,type:Te.update.type,id:Te.update.id})),Te=void 0;Object.keys(De).length;)delete De[Object.keys(De)[0]]}function ae(e,t,n){if(!Ce)if(clearTimeout(pe),pe=0,M()&&(e&&e.data&&ve.indexOf(e.data.code)!==-1||n&&n.data&&ve.indexOf(n.data.code)!==-1)&&Ue.retryCount<Ue.maxRetries){if(Ce=!0,!Ue.retryCount){for(;Ue.delays.length;)Ue.delays.pop();Ue.delays=h.calculate(Ue.minDelay,Ue.maxDelay,Ue.delaySteps,Ue.maxRetries,Ue.randomFactor)}var i=Ue.delays[Ue.retryCount];Ue.retryCount++;var r=_e;r.count=Ue.retryCount;var a=e&&e.data&&e.data.code?e.data.code:e&&e.code?e.code:0;a&&(a=n&&n.data&&n.data.code?n.data.code:n&&n.code?n.code:0),d.emit(c.RECONNECTION_IMMINENT,fe({delay:i,count:Ue.retryCount,code:a}))}else d.emit(t,n&&n.data?n:fe(n))}function oe(e){ye.debugEnabled()&&ye.debug("create connection"),ue(),Ie=new _(e),Ie.binaryType="arraybuffer",Ie.addEventListener(f.OPEN,H),Ie.addEventListener(f.CLOSE,Y),Ie.addEventListener(f.MESSAGE,V),Ie.addEventListener(f.ERROR,W),Oe=setTimeout(K,S)}function se(e){ye.debugEnabled()&&ye.debug("destroy connection"+(e?" silent":"")),Te=void 0,ue(),d.emit(c.DESTROYED,fe({silent:!!e}))}function ue(){clearTimeout(Oe),clearTimeout(pe),clearTimeout(he),clearTimeout(me),null!==Ie&&(Ie.onopen=null,Ie.onclose=null,Ie.onmessage=null,Ie.onerror=null,Ie.close(),Ie=null)}function de(e,t){if(ye.debugEnabled()&&ye.debug("send "+e),t)try{t=JSON.stringify(t)}catch(e){t="{}"}else t="{}";var n=we.requestId+1;we={},we.eventType=e,we[e]=JSON.parse(t),we.requestId=n;var i=JSON.stringify(we);try{le()&&Ie.send(i)}catch(e){}}function ce(e){return{code:e.code,name:e.name,message:e.message}}function le(){return C()===a.OPEN}function fe(e){return{data:e||void 0,connectionState:C(),connectionId:_e.config.query.cid,active:M(),update:x()}}function Ee(e){var t=e.name.replace(l.BASE,c.BASE);d.emit(t,fe(e.data))}var pe,he,me,_e,Te,Se,ge,ye=t.create("WebSocketProxy "+(new Date).toLocaleTimeString()),Ae=new e,ve=[4102,4103,4105,4106,4107,4108,4109,4111,4115,4500,4503],be=[{type:l.META_DATA,listener:j},{type:l.SERVER_INFO,listener:q},{type:l.STREAM_INFO,listener:z},{type:l.STREAM_INFO_UPDATE,listener:X},{type:l.STREAM_FRAGMENT,listener:J},{type:l.RANDOM_ACCESS_POINT,listener:Q},{type:l.RAW_PACKET,listener:$},{type:l.STREAM_STATUS,listener:Z},{type:l.STREAM_QUALITY,listener:ee},{type:l.UPDATE_SOURCE_SUCCESS,listener:te},{type:l.UPDATE_SOURCE_ERROR,listener:ne},{type:l.UPDATE_SOURCE_ABORT,listener:ie}],Ie=null,Re=a.UNINITIALIZED,Oe=0,Ne=!1,Ce=!1,Ue={minDelay:2,maxDelay:10,delaySteps:10,maxRetries:10,delays:[],retryCount:0,randomFactor:1.5},Pe=[],we={requestId:0},De={};return T(),{connect:v,disconnect:R,play:b,pause:I,updateSource:O,reset:N,getState:C,getConnectData:P,getServerInfo:U,getWebSocket:w,setActive:L,isActive:M,isUpdate:x,isWaitForReconnect:D,getConnectionId:k,isConnectionId:G,shouldPauseOnError:B,destroy:A}}var S=5e3,g=5e3,y=3e4;return{create:T}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({1000:"Normal closure, meaning that the purpose for which the connection was established has been fulfilled.",1001:'An endpoint is "going away", such as a server going down or a browser having navigated away from a page.',1002:"An endpoint is terminating the connection due to a protocol error",1003:"An endpoint is terminating the connection because it has received a type of data it cannot accept (e.g., an endpoint that understands only text data MAY send this if it receives a binary message).",1004:"Reserved. The specific meaning might be defined in the future.",1005:"No status code was actually present.",1006:"Maybe no network, wrong url or server down.",1007:"An endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [http://tools.ietf.org/html/rfc3629] data within a text message).",1008:'An endpoint is terminating the connection because it has received a message that "violates its policy". This reason is given either if there is no other sutible reason, or if there is a need to hide specific details about the policy.',1009:"An endpoint is terminating the connection because it has received a message that is too big for it to process.",1011:"A server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request.",1015:"The connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified).",4005:"The requested source stream has been stopped.",4400:"Bad request. Maybe stream parameters are missing or malformed.",4403:"Access denied. The authentication token is missing or invalid.",4500:"The connection has been rejected due an internal server error.",4503:"The requested service is currently unavailable.",4900:"The security service has been rejected due an internal server error.",4901:"The security service denied access. The authentication token is invalid.",4903:"The security service denied access. The url is expired or a token parameter is missing (expires, token, or options).",4904:"The security service can not be found."})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="";return{BASE:e,OPEN:e+"open",CLOSE:e+"close",MESSAGE:e+"message",ERROR:e+"error"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e){for(var t=["minDelay","maxDelay","delaySteps","maxRetries"],n=0;n<t.length;++n){if(!e.hasOwnProperty(t[n]))return{success:!1,reason:"The reconnect config is invalid, it must contain 'minDelay', 'maxDelay', 'delaySteps', and 'maxRetries'. Reset to default."};if("number"!=typeof e[t[n]])return{success:!1,reason:"The reconnect config is invalid, the value '"+t[n]+"' have to be a number. Reset to default."}}return e[t[0]]>e[t[1]]?{success:!1,reason:"The reconnect config is invalid, the value '"+t[0]+"' have to be lower then '"+t[1]+"'. Reset to default."}:e[t[0]]<1?{success:!1,reason:"The reconnect config is invalid, the value '"+t[0]+"' have to be greater or equal then 1 sec. Reset to default."}:{success:!0}}return{validate:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e,t,n,i,r){var a=[],o=Math.sqrt(e),s=Math.sqrt(t);n>i&&(n=i);for(var u=(s-o)/(n-1),d=0;d<i;d+=1){var c=r*(Math.random()-.5),l=o+u*Math.min(n-1,d)+(!d&&o-Math.abs(c)<=.5?Math.abs(c)+r*Math.random():c),f=Math.round(l*l*1e3);a.push(f)}return a}return{calculate:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e,t){var n=e.url.split("&flags=");if(n.length>1&&(n[1]=decodeURIComponent(n[1])),t)n.length>1&&n[1].indexOf("paused")===-1?e.url=n[0]+"&flags="+encodeURIComponent("paused,"+n[1]):1===n.length&&(e.url+="&flags=paused");else if(n.length>1&&n[1].indexOf("paused")!==-1){var i=n[1].split(",");if(1===i.length)e.url=e.url.replace("&flags=paused","");else{e.url=n[0]+"&flags=";for(var r=0;r<i.length;r+=1)"paused"!==i[r]&&(e.url+=encodeURIComponent(i[r]),e.url+=encodeURIComponent(i.length>2&&r<i.length-1?",":""))}}return e}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(142)],r=function(e){var t=WebSocket.addEventListener;return WebSocket.prototype.addEventListener=function(n,i,r){void 0!==typeof this["on"+n]&&e[n.toUpperCase()]===n?this["on"+n]=i:t(n,i,r)},WebSocket}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(12),n(11),n(9),n(28),n(83),n(112),n(92),n(94),n(93),n(95),n(149),n(150),n(151),n(152),n(153),n(154),n(148),n(155),n(156),n(157),n(159),n(161),n(166),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(158)],r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,E,p,h,m,_,T,S,g,y,A,v,b,I,R,O,N,C,U,P,w){"use strict";function D(i){function A(){r.add({target:k,listeners:H}),x=a.create(i,k,V),F=a.create(k,i,Y),B.push(g.create(k)),B.push(y.create(k)),B.push(P.create(k)),B.push(O.create(k)),B.push(C.create(k)),t.useFakeAudio&&B.push(b.create(k))}function D(e){G.debugEnabled()&&G.debug("creating media handlers"),e.data.type===o.MP4?(B.push(I.create(k)),B.push(N.create(k)),B.push(U.create(k))):B.push(R.create(k)),r.remove({target:k,listeners:H})}function L(e){!t.hasMediaSource||e.data.config.playback.allowSafariHlsFallback&&t.canUseHLS||B.push(v.create(k))}function M(){for(x.destroy(),x=null,F.destroy(),F=null;B.length;)B.pop().destroy()}var x,F,k=new n,G=e.create("MediaManager"),B=[],H=[{type:E.VIDEO_SOURCE,listener:D},{type:h.CONFIG,listener:L}],Y=[{from:w.LOAD_START,to:d.LOAD_START},{from:w.PROGRESS,to:d.PROGRESS},{from:w.SUSPEND,to:d.SUSPEND},{from:w.ABORT,to:d.ABORT},{from:w.EMPTIED,to:d.EMPTIED},{from:w.STALLED,to:d.STALLED},{from:w.PLAY,to:d.PLAY},{from:w.PAUSE,to:d.PAUSE},{from:w.LOADED_META_DATA,to:d.LOADED_META_DATA},{from:w.LOADED_DATA,to:d.LOADED_DATA},{from:w.WAITING,to:d.WAITING},{from:w.ERROR,to:d.ERROR},{from:w.PLAYING,to:d.PLAYING},{from:w.CAN_PLAY,to:d.CAN_PLAY},{from:w.CAN_PLAY_THROUGH,to:d.CAN_PLAY_THROUGH},{from:w.SEEKING,to:d.SEEKING},{from:w.SEEKED,to:d.SEEKED},{from:w.TIME_UPDATE,to:d.TIME_UPDATE},{from:w.ENDED,to:d.ENDED},{from:w.RATE_CHANGE,to:d.RATE_CHANGE},{from:w.DURATION_CHANGE,to:d.DURATION_CHANGE},{from:w.VOLUME_CHANGE,to:d.VOLUME_CHANGE},{from:w.ELEMENT_CREATED,to:d.ELEMENT_CREATED},{from:w.PLAY_START_SUCCESS,to:d.PLAY_START_SUCCESS},{from:w.PLAY_START_ERROR,to:d.PLAY_START_ERROR},{from:w.VIEWPORT_VISIBLE,to:d.VIEWPORT_VISIBLE},{from:w.VIEWPORT_HIDDEN,to:d.VIEWPORT_HIDDEN},{from:w.UPDATE_SOURCE_ABORT,to:d.UPDATE_SOURCE_ABORT},{from:w.UPDATE_SOURCE_FAIL,to:d.UPDATE_SOURCE_FAIL},{from:w.UPDATE_SOURCE_TIMEOUT,to:d.UPDATE_SOURCE_TIMEOUT},{from:f.ERROR,to:d.PLAYBACK_ERROR},{from:f.SUSPENDED,to:d.PLAYBACK_SUSPENDED},{from:m.QUALITY_STATS,to:d.QUALITY_STATS},{from:m.FRAME_DROP,to:d.FRAME_DROP},{from:_.PLAY_STATS,to:d.PLAY_STATS},{from:p.SOURCE_ENDED,to:d.PLAYBACK_FINISHED},{from:p.SOURCE_CLOSED,to:d.PLAYBACK_FINISHED},{from:l.PLAYBACK_STARTED,to:d.PLAYBACK_STARTED},{from:l.BUFFERING,to:d.BUFFERING},{from:T.BUFFER_TWEAKS_CREATED,to:d.BUFFER_TWEAKS_CREATED},{from:T.BUFFER_TWEAKS_ERROR,to:d.BUFFER_TWEAKS_ERROR},{from:S.TIME_OFFSET,to:d.TIME_OFFSET}],V=[{from:s.CREATE_VIDEO,to:E.CREATE_VIDEO},{from:s.DESTROY_VIDEO,to:E.DESTROY_VIDEO},{from:s.VIDEO_SOURCE,to:E.VIDEO_SOURCE},{from:s.PLAY,to:E.PLAY},{from:s.PAUSE,to:E.PAUSE},{from:s.SEEK,to:E.SEEK},{from:s.MUTE,to:E.MUTE},{from:s.UNMUTE,to:E.UNMUTE},{from:s.SET_VOLUME,to:E.SET_VOLUME},{from:s.SET_RATE,to:E.SET_RATE},{from:s.UPDATE_SOURCE,to:E.UPDATE_SOURCE},{from:s.CONFIG,to:h.CONFIG},{from:c.SERVER_INFO,to:h.SERVER_INFO},{from:c.STREAM_FRAGMENT,to:h.STREAM_FRAGMENT},{from:c.RANDOM_ACCESS_POINT,to:h.RANDOM_ACCESS_POINT},{from:u.STATE_CHANGE,to:h.APPLICATION_STATE_CHANGE},{from:u.STARTUP_STATS,to:h.STARTUP_STATS},{from:u.DOCUMENT_VISIBLE,to:h.DOCUMENT_VISIBLE},{from:u.DOCUMENT_HIDDEN,to:h.DOCUMENT_HIDDEN},{from:u.STREAM_INFO,to:h.STREAM_INFO},{from:u.STREAM_INFO_UPDATE,to:h.STREAM_INFO_UPDATE},{from:u.SWITCH_STREAM_INIT,to:h.SWITCH_STREAM_INIT},{from:u.SWITCH_STREAM_SUCCESS,to:h.SWITCH_STREAM_SUCCESS},{from:u.SWITCH_STREAM_ABORT,to:h.SWITCH_STREAM_ABORT},{from:u.SWITCH_STREAM_FAIL,to:h.SWITCH_STREAM_FAIL},{from:u.UPDATE_SOURCE_INIT,to:h.UPDATE_SOURCE_INIT},{from:u.UPDATE_SOURCE_SUCCESS,to:h.UPDATE_SOURCE_SUCCESS}];return A(),{destroy:M}}return{create:D}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="statsCollector.";return{BASE:e,PLAY_STATS:e+"playStats"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="mediaControl.";return{BASE:e,PLAYBACK_STARTED:e+"playbackStarted",BUFFERING:e+"buffering"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="mediaHandler.";return{BASE:e,ERROR:e+"error",SUSPENDED:e+"suspended"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="mediaControl.";return{BASE:e,CREATE_VIDEO:e+"createVideo",DESTROY_VIDEO:e+"destroyVideo",VIDEO_SOURCE:e+"videoSource",UPDATE_SOURCE:e+"updateSource",PLAY:e+"play",PAUSE:e+"pause",SEEK:e+"seek",MUTE:e+"mute",UNMUTE:e+"unmute",SET_VOLUME:e+"volume",SET_RATE:e+"playbackRate"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="mediaSourceProxy.";return{BASE:e,SOURCE_OPEN:e+"sourceopen",SOURCE_ENDED:e+"sourceended",SOURCE_CLOSED:e+"sourceclosed",SOURCE_READY:e+"sourceready"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="mediaManager.";return{BASE:e,CONFIG:e+"config",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",APPLICATION_STATE_CHANGE:e+"applicationStateChange",STARTUP_STATS:e+"startupStats",DOCUMENT_VISIBLE:e+"documentVisible",DOCUMENT_HIDDEN:e+"documentHidden",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_ABORT:e+"switchStreamAbort",SWITCH_STREAM_FAIL:e+"switchStreamFail",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",UPDATE_SOURCE_FAIL:e+"updateSourceFail"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="qualityHandler.";return{BASE:e,QUALITY_STATS:e+"qualitystats",FRAME_DROP:e+"framedrop"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="mediaControl.";return{BASE:e,BUFFER_TWEAKS_CREATED:e+"tweaksCreated",BUFFER_TWEAKS_ERROR:e+"tweaksError"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="sourceBufferQueue.";return{BASE:e,TIME_OFFSET:e+"timeOffset"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(12),n(112),n(28),n(149),n(155),n(151),n(158),n(152),n(153),n(148),n(27)],r=function(e,t,n,i,r,a,o,s,u,d,c,l){function f(f){function E(){i.add({target:f,listeners:j}),h()}function p(){i.remove({target:f,listeners:j}),k&&i.remove({target:f,listeners:q}),m()}function h(){L.debugEnabled()&&L.debug("add control listeners"),m(),i.add({target:f,listeners:z})}function m(){L.debugEnabled()&&L.debug("remove control listeners"),i.remove({target:f,listeners:z})}function _(){T(),L.debugEnabled()&&L.debug("add play state listeners?"),M&&(L.debugEnabled()&&L.debug("add play state listeners!"),i.add({target:f,listeners:X}))}function T(){L.debugEnabled()&&L.debug("remove play state listeners"),i.remove({target:f,listeners:X})}function S(){_()}function g(e){L.debugEnabled()&&L.debug("buffer tweaks created"),!k&&D===l.PLAYING&&M.buffer.start<e.data.tweaks.buffer.start&&setTimeout(function(){F=!0,f.emit(r.BUFFERING),L.debugEnabled()&&L.debug("new tweaks, pausing to raise buffer"),f.emit(o.PAUSE)},10),M.buffer=e.data.tweaks.buffer}function y(){D===l.LOADING&&(L.debugEnabled()&&L.debug("hls: canplaythrough while loading, wait for progress"),f.emit(o.PLAY,{external:!1}),G=!0)}function A(){(D===l.BUFFERING||D===l.LOADING&&G)&&(L.debugEnabled()&&L.debug("hls: progress at buffering or after canplaythrough while loading, continue"),G=!1,F=!1,x=!0,f.emit(r.PLAYBACK_STARTED,H?{stats:H}:{}))}function v(){D===l.PLAYING&&(L.debugEnabled()&&L.debug("hls: waiting while playing, now buffering"),F=!0,f.emit(r.BUFFERING))}function b(e){L.debugEnabled()&&L.debug("video source"),k=e.data.type===n.HLS,k&&(T(),_(),i.remove({target:f,listeners:q}),i.add({target:f,listeners:q}))}function I(e){switch(D=e.data.state){case l.PLAYING:H=null;break;case l.LOADING:break;case l.PAUSED:T();break;case l.PAUSING:T(),L.warnEnabled()&&L.warn("entering paused state"),B=-1,x=!1,F=!0,G=!1}}function R(e){H=e.data.stats}function O(){m(),f.emit(o.PLAY,{external:!1}),h()}function N(e){k||B!==-1||setTimeout(function(){L.debugEnabled()&&L.debug("pausing to raise buffer"),f.emit(o.PAUSE)},10)}function C(e){var t=!0;if(e.length){for(var n=e[0],i=1;i<e.length;i++)if(e[i]!==n){t=!1;break}return t}return!1}function U(e,t,n){e.length===n&&e.shift(),e.push(t)}function P(e){if(!e.data.buffered||!e.data.buffered.length)return void(L.debugEnabled()&&L.debug("no data in play stats"));var n=e.data.stats,i=n.buffer.delay.current,a=i>M.buffer.start,s=k?i>0:i>M.buffer.min,u=n.buffer.end-n.buffer.start,d=e.data.currentTime,c=e.data.buffered,l=w(c,d)!==-1;U(Y,d,K),U(V,i,W);var E=C(Y)&&C(V);if(!k&&!l&&!x&&u>.45){var p=c.length,h=Math.min(c.start(p-1)+.3,c.end(p-1));return L.warn("seek to range: "+c.start(p-1)+" < "+h+" > "+c.end(p-1)),void f.emit(o.SEEK,{position:t.isTridentBrowser?0:h})}if(!k&&!x&&t.isFirefox&&c.length>1&&w(c,d)!==c.length-1&&c.end(p-1)-c.start(p-1)>.3){var p=c.length,h=c.start(p-1);return L.warnEnabled()&&L.warn("seek to startable range start: "+c.start(p-1)),void f.emit(o.SEEK,{position:h})}if(a&&B===-1&&l){if(B=d,!k&&t.isSafari&&B<.2)return B=.3,L.warnEnabled()&&L.warn("initial safari stream startTime set to "+B+", seeking"),void f.emit(o.SEEK,{position:B});L.debugEnabled()&&L.debug("stream startTime set to "+B)}F&&a&&(k?k&&G&&(L.debugEnabled()&&L.debug("hls: buffering and has enough to start, don't wait for progress"),G=!1):(L.debugEnabled()&&L.debug("starting stream"),O()),F=!1,x&&f.emit(r.PLAYBACK_STARTED,H?{stats:H}:{})),F||(!x&&B!==-1&&B<d-.1&&(x=!0,k&&G&&(L.debugEnabled()&&L.debug("hls: current time rising and started, don't wait for progress"),G=!1),f.emit(r.PLAYBACK_STARTED,H?{stats:H}:{})),d>M.buffer.start&&(!s||x&&E)&&(F=!0,k||(L.debugEnabled()&&L.debug("pausing to buffer"),f.emit(o.PAUSE)),f.emit(r.BUFFERING)))}function w(e,n){for(var i=0;e&&i<e.length;++i)if(e.start(i)<=n&&e.end(i)>=n||t.isTridentBrowser&&n<=.3&&e.start(i)<=5&&e.end(i)-e.start(i)>.2)return i;return-1}var D,L=e.create("BufferControl"),M={},x=!1,F=!0,k=!1,G=!1,B=-1,H=null,Y=[],V=[],W=5,K=5,j=[{type:d.APPLICATION_STATE_CHANGE,listener:I},{type:d.STARTUP_STATS,listener:R},{type:o.VIDEO_SOURCE,listener:b},{type:u.SOURCE_READY,listener:S},{type:a.BUFFER_TWEAKS_CREATED,listener:g}],q=[{type:s.CAN_PLAY_THROUGH,listener:y},{type:s.PROGRESS,listener:A},{type:s.WAITING,listener:v}],z=[{type:o.PLAY,listener:N}],X=[{type:c.PLAY_STATS,listener:P}];return E(),{destroy:p}}return{create:f}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="mediaElementHandler.";return{BASE:e,VIDEO_SOURCE:e+"videoSource",LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",
LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",ERROR:e+"error",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange",QUALITY_UPDATE:e+"qualityupdate",ELEMENT_CREATED:e+"elementCreated",PLAY_START_SUCCESS:e+"playStartSuccess",PLAY_START_ERROR:e+"playStartError",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_TIMEOUT:e+"updateSourceTimeout"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(53),n(12),n(130),n(28),n(149),n(155),n(154),n(153),n(148),n(160)],r=function(e,t,n,i,r,a,o,s,u,d,c){function l(l){function f(){U.debugEnabled()&&U.debug("initialize"),p(),r.add({target:l,listeners:B})}function E(){R=null,[B,H,Y].forEach(function(e){r.remove({target:l,listeners:e})})}function p(){R=i.create(10*x)}function h(e){r.add({target:l,listeners:e?Y:H}),r.remove({target:l,listeners:e?H:Y})}function m(e){if(e.data.streamInfo.videoInfo&&e.data.streamInfo.haveVideo&&e.data.streamInfo.videoInfo.frameRate<=30&&n.isTridentBrowser&&!G){var i=1;w=t.copy(P),v(Math.sqrt(30)-Math.sqrt(e.data.streamInfo.videoInfo.frameRate),i),w.start+=(w.target-w.start)/2,w.min+=(w.start-w.min)/2,b()}}function _(e){m(e)}function T(e){O=n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS,O||r.add({target:l,listeners:Y});var i;e.data.config.tweaks&&(e.data.config.tweaks.buffer&&(i=c.validateBuffer(e.data.config.tweaks.buffer),i.success?(w=t.copy(e.data.config.tweaks.buffer),D=t.copy(w),G=!0):l.emit(o.BUFFER_TWEAKS_ERROR,{reason:i.reason})),e.data.config.tweaks.bufferDynamic&&!O&&(i=c.validateDynamic(e.data.config.tweaks.bufferDynamic),i.success?(L=e.data.config.tweaks.bufferDynamic.offsetThreshold,M=e.data.config.tweaks.bufferDynamic.offsetStep,x=e.data.config.tweaks.bufferDynamic.cooldownTime):l.emit(o.BUFFER_TWEAKS_ERROR,{reason:i.reason}))),b()}function S(e){var t=e.data.stats.buffer.delay.current;t&&R.add(t),!k&&n.isTridentBrowser&&t>N&&(w.target=t,w.limit=w.target+C,b()),k=!0}function g(){h(!0);var e=((new Date).getTime()-F)/1e3;F!==-1&&e<L&&w.start<D.limit&&(U.warnEnabled()&&U.warn("buffering "+e+" seconds after stream started, raising buffer values"),v(M),b()),p(),clearInterval(I),I=0}function y(){h(!1),F=(new Date).getTime(),k&&x&&(I=setInterval(function(){U.debugEnabled()&&U.debug("stream running stable since "+x+" sec"),U.debugEnabled()&&U.debug("buffer min: "+R.minimum+", max: "+R.maximum),w.start>D.start?(U.debug(-M+" sec cooldown"),v(-M),b()):(U.debugEnabled()&&U.debug("no cooldown"),clearInterval(I),I=0)},1e3*x))}function A(e){n.isFirefox&&(U.debugEnabled()&&U.debug("frame drop"),U.debugEnabled()&&U.debug(""+JSON.stringify(e)),U.debugEnabled()&&U.debug("current buffer: "+JSON.stringify(w)),U.debugEnabled()&&U.debug("limit: "+D.limit+", start: "+w.start),w.start<D.limit?(U.debugEnabled()&&U.debug("start lower then limit -> tweaking"),v(w.target-w.start),b()):U.debugEnabled()&&U.debug("start higher then limit -> tweaking denied"))}function v(e,t){t=t||1,["start","target","limit"].forEach(function(n){w[n]*=t,w[n]+=e})}function b(){U.debugEnabled()&&U.debug("new buffer: "+JSON.stringify(w)),l.emit(o.BUFFER_TWEAKS_CREATED,{tweaks:{buffer:t.copy(w)}})}var I,R,O,N=2,C=1.5,U=e.create("BufferTweaker"),P={max:8,min:.2,start:.5,target:1.2,limit:1.7},w=t.copy(P),D=t.copy(P),L=0,M=0,x=0,F=-1,k=!1,G=!1,B=[{type:u.STREAM_INFO,listener:m},{type:u.STREAM_INFO_UPDATE,listener:_},{type:u.CONFIG,listener:T},{type:s.FRAME_DROP,listener:A}],H=[{type:d.PLAY_STATS,listener:S},{type:a.BUFFERING,listener:g}],Y=[{type:a.PLAYBACK_STARTED,listener:y}];return f(),{destroy:E}}return{create:l}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e){var t=["min","start","target","limit","max"],n=t.filter(function(t){return!e.hasOwnProperty(t)});if(n.length)return{success:!1,reason:"The buffer config is invalid, it must contain "+n.join(", ")+". Reset to default."};for(var i in t)if(t.hasOwnProperty(i)){if("number"!=typeof e[t[i]])return{success:!1,reason:"The buffer config is invalid, the value '"+t[i]+"' have to be a number. Reset to default."};if(i>0&&e[t[i-1]]>e[t[i]])return{success:!1,reason:"The buffer config is invalid, the value '"+t[i-1]+"' have to be lower then '"+t[i]+"'. Reset to default."}}return{success:!0}}function t(e){var t=["offsetThreshold","offsetStep","cooldownTime"],n=t.filter(function(t){return!e.hasOwnProperty(t)});return n.length?{success:!1,reason:"The dynamic buffer config is invalid, it must contain "+n.join(", ")+". Reset to default."}:(t.forEach(function(t){if("number"!=typeof e[t]||0===e[t])return{success:!1,reason:"The dynamic buffer config is invalid, the value '"+t+"' have to be a number. Reset to default."}}),{success:!0})}return{validateBuffer:e,validateDynamic:t}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(12),n(162),n(28),n(163),n(164),n(165)],r=function(e,t,n,i,r,a,o){function s(s,u,d,c,l,f,E,p){function h(){Y(),C()}function m(){T()}function _(){var e=u,n={id:e,autoplay:!1,controls:!1,playsInline:!0,muted:f,volume:ne,style:{backgroundColor:"transparent"}};(t.isIOS11||!t.isIOS&&t.mustUseHLS)&&(n.style.width="100vw",n.style.height="100vh"),z=document.getElementById(u),te=!!z,ee.debugEnabled()&&ee.debug("using "+(te?"external ":"generated ")+"video eleement"),te?($=z.parentElement,Q=z.style.cssText,z.style.cssText=""):z=document.createElement("video"),L(z,n)}function T(){z&&(i.remove({target:z,listeners:re}),t.isTridentBrowser&&(Z=void 0,["scroll","resize"].forEach(function(e){window.removeEventListener&&removeEventListener(e,O,!1),window.detachEvent&&detachEvent("on"+e,O)})),X.src="",z.load(),z.removeChild(z.firstChild),z.parentElement.removeChild(z),te&&(ee.debugEnabled()&&ee.debug("releasing external video"),z.style.cssText=Q,Q=null,$.appendChild(z)),z=null,J&&(J.parentElement.removeChild(J),J=null))}function S(){ee.debugEnabled()&&ee.debug("mute"),z&&(z.muted=!0)}function g(){ee.debugEnabled()&&ee.debug("unmute"),z&&(z.muted=!1)}function y(e){function t(){return new Promise(function(e){l?ie||(ie=setTimeout(function(){if(ie=0,z){try{z.load()}catch(e){}e()}},250)):e()})}function i(){if(z)return W(),n.play(z).then(function(){ee.debugEnabled()&&ee.debug("play promise resolved"),s.emit(o.PLAY_START_SUCCESS,{index:c}),p=!1}).catch(function(t){ee.debugEnabled()&&ee.debug("play promise rejected"),t.error.name!==r.NOT_ALLOWED_ERROR||z.muted||!E||p?z&&z.muted&&p&&(ee.debugEnabled()&&ee.debug("unmute to reset"),g(),z.muted||(R({type:a.VOLUME_CHANGE}),p=!1)):(ee.debugEnabled()&&ee.debug("mute to play"),S(),z&&z.muted&&(p=!0,setTimeout(y.bind(null,{data:{external:!1}}),20))),(e&&e.data&&!e.data.external||p)&&s.emit(o.PLAY_START_ERROR,{error:t.error,automuted:p,index:c})})}ee.debugEnabled()&&ee.debug("onPlay"),t().then(i)}function A(){ee.debugEnabled()&&ee.debug("onPause"),z&&(ie&&(clearTimeout(ie),ie=0),z.pause(),b(1),(t.isIOS11||!t.isIOS&&t.mustUseHLS)&&J&&J.tagName&&"IFRAME"===J.tagName&&J.contentWindow.location.reload(!0)),V()}function v(e){z&&e&&z.volume!==e&&(ee.debugEnabled()&&ee.debug("set volume: "+e),z.volume=e)}function b(e){z&&e&&z.playbackRate!==e&&(ee.debugEnabled()&&ee.debug("set rate to: "+e),z.playbackRate=e)}function I(e){z&&e&&e.data&&!isNaN(e.data.position)&&e.data.position>=0&&(ee.debugEnabled()&&ee.debug("seek to: "+e.data.position),z.currentTime=e.data.position)}function R(e){var t=N();switch(e.type){case a.ERROR:t.code=z.error.code;break;case a.VOLUME_CHANGE:t.muted=z.muted,t.volume=z.volume;break;case a.CAN_PLAY:t.haveVideo="undefined"!=typeof z.videoTracks&&z.videoTracks.length>0,t.haveAudio="undefined"!=typeof z.audioTracks&&z.audioTracks.length>0,t.videoWidth=z.videoWidth,t.videoHeight=z.videoHeight}ee.debugEnabled()&&ee.detail(e.type),s.emit("mediaElementProxy."+e.type,t)}function O(){var e=z&&"function"==typeof z.getBoundingClientRect?z.getBoundingClientRect():{top:0,left:0,bottom:0,right:0},t=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,i=e.top<=t&&e.top+e.height>=0,r=e.left<=n&&e.left+e.width>=0,a=i&&r;a!==Z&&(ee.debugEnabled()&&ee.debug("viewport changed to "+(a?"visible":"hidden")),Z=a,s.emit(a?o.VIEWPORT_VISIBLE:o.VIEWPORT_HIDDEN,{index:c}))}function N(){return{currentTime:z.currentTime,buffered:z.buffered,played:z.played,playbackRate:z.playbackRate,index:c}}function C(){_(),U(),z.appendChild(X),t.isIOS11||!t.isIOS&&t.mustUseHLS?(P(),d.appendChild(J)):(ee.debugEnabled()&&ee.debug("appending video to container"),d.appendChild(z),i.add({target:z,listeners:re}),t.isTridentBrowser&&(["scroll","resize"].forEach(function(e){window.addEventListener&&addEventListener(e,O,!1),window.attachEvent&&attachEvent("on"+e,O)}),O()))}function U(){X=document.createElement("source")}function P(){ee.debugEnabled()&&ee.debug("iOS11 detected, using iframe hack");var e={frameBorder:0,scrolling:"no",style:{cssText:"z-index: 0;width: 100%;height: 100%;position: absolute;display: none;top: 0;left: 0;"}};J=document.createElement("iframe"),L(J,e),J.addEventListener("load",w),J.addEventListener("unload",D)}function w(e){var t={style:{height:"100%",width:"100%",overflow:"hidden",position:"absolute",margin:"0",padding:"0"}},n=e.target.contentDocument.body;n&&(L(n,t),n.firstChild||n.appendChild(z))}function D(e){var t=e.target.contentDocument.body;t&&t.firstChild&&t.removeChild(z)}function L(e,t){Object.keys(t).forEach(function(n){"object"!=typeof t[n]?e[n]=t[n]:Object.keys(t[n]).forEach(function(i){e[n][i]=t[n][i]})})}function M(e){e&&e.source&&(X.src=e.source)}function x(e){z&&e&&(z.type=e)}function F(){z&&z.load()}function k(){return z?z.getVideoPlaybackQuality:void 0}function G(){return z?z:void 0}function B(){l&&(J?(J.style.display="block",J.style.zIndex=1):z&&(z.style.display="block",z.style.zIndex=1))}function H(){l&&(J?(J.style.display="none",J.style.zIndex=0):z&&(z.style.display="none",z.style.zIndex=0))}function Y(){var e=[a.TIME_UPDATE];for(var t in a)a.hasOwnProperty(t)&&e.indexOf(a[t])===-1&&re.push({type:a[t],listener:R})}function V(){i.remove({target:z,listeners:re})}function W(){i.add({target:z,listeners:re})}function K(){return c}function j(e){c=e}function q(){ee.debugEnabled()&&ee.debug("show index "+c+" on top"),J?(J.style.display="block",J.style.zIndex=10):z&&(z.style.display="block",z.style.zIndex=10)}var z,X,J,Q,$,Z,ee=e.create("MediaElementProxy "+u),te=!1,ne=1,ie=0,re=[];return h(),{destroy:m,play:y,pause:A,loadVideo:F,setSource:M,setType:x,setVolume:v,setMute:S,setUnmute:g,setRate:b,destroyVideo:T,seek:I,getVideoPlaybackQuality:k,getVideoElement:G,getEventPayload:N,show:B,hide:H,getIndex:K,setIndex:j,showOnTop:q}}return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e){return new Promise(function(i,r){var a=e.play();Promise.all([a]).then(function(t){i({media:e})}).catch(function(i){t=i&&i.name?i.name:"Unknown",n=i&&i.message?i.message:"Message not available.",r({media:e,error:{name:t,message:n}})})})}var t,n;return{play:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return{ABORT_ERROR:"AbortError",NOT_ALLOWED_ERROR:"NotAllowedError"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="";return{BASE:e,LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",ERROR:e+"error",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="mediaElementProxy.";return{BASE:e,LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",ERROR:e+"error",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange",QUALITY_UPDATE:e+"qualityupdate",ELEMENT_CREATED:e+"elementCreated",PLAY_START_SUCCESS:e+"playStartSuccess",PLAY_START_ERROR:e+"playStartError",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(28),n(112),n(167),n(151),n(158),n(153),n(152),n(168)],r=function(e,t,n,i,r,a,o,s,u){function d(d){function c(){I.debugEnabled()&&I.debug("create"),t.add({target:d,listeners:C}),l()}function l(){I.debugEnabled()&&I.debug("create mediasource"),v=new window.MediaSource,t.add({target:v,listeners:U}),P.push(u.create(d,v,R.timestampReset,N,O?b:null))}function f(){if(v){for(I.debugEnabled()&&I.debug("destroy mediasource"),t.remove({target:v,listeners:U});P.length;)P.pop().destroy();v=null}}function E(){I.debugEnabled()&&I.debug("bind mediasource"),d.emit(r.VIDEO_SOURCE,{src:window.URL.createObjectURL(v),type:n.MP4})}function p(){f(),l(),E()}function h(){I.debugEnabled()&&I.debug("destroy"),f(),t.remove({target:d,listeners:C})}function m(e){N=0,b&&b.mimeType!=e.data.streamInfo.mimeType?(I.debugEnabled()&&I.debug("new mime type received"),b=e.data.streamInfo,N=v&&v.activeSourceBuffers.length&&v.activeSourceBuffers[v.activeSourceBuffers.length-1].buffered.length?v.activeSourceBuffers[v.activeSourceBuffers.length-1].buffered.end(v.activeSourceBuffers[v.activeSourceBuffers.length-1].buffered.length-1):0,O=!0,p(),O=!1):b=e.data.streamInfo}function _(e){R=e.data.options}function T(){E()}function S(){I.debugEnabled()&&I.debug("open"),d.emit(s.SOURCE_OPEN,A())}function g(){I.debugEnabled()&&I.debug("ended"),p(),d.emit(s.SOURCE_ENDED,A())}function y(){I.debugEnabled()&&I.debug("closed"),p(),d.emit(s.SOURCE_CLOSED,A())}function A(){return{readyState:v.readyState}}var v,b,I=e.create("MediaSourceProxy"),R={timestampReset:!1},O=!1,N=0,C=[{type:o.STREAM_INFO,listener:m},{type:o.STREAM_INFO_UPDATE,listener:m},{type:r.UPDATE_SOURCE,listener:_},{type:a.ELEMENT_CREATED,listener:T}],U=[{type:i.SOURCE_OPEN,listener:S},{type:i.SOURCE_ENDED,listener:g},{type:i.SOURCE_CLOSED,listener:y}],P=[];return c(),{destroy:h}}return{create:d}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="";return{BASE:e,SOURCE_OPEN:e+"sourceopen",SOURCE_ENDED:e+"sourceended",SOURCE_CLOSED:e+"sourceclosed"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(12),n(28),n(169),n(167),n(151),n(158),n(153),n(152),n(156),n(27)],r=function(e,t,n,i,r,a,o,s,u,d,c){function l(l,f,E,p,h){function m(){n.add({target:l,listeners:se}),h&&(J=!0,P({data:{streamInfo:h}}))}function _(){for(;Q.length;)Q.pop();n.remove({target:l,listeners:se}),n.remove({target:l,listeners:ue}),k&&n.remove({target:k,listeners:de}),f.removeEventListener(r.SOURCE_OPEN,w),k=null}function T(e){G=e.data.currentTime,B!==c.PAUSED&&Y.detailEnabled()&&Y.detail("current time "+G)}function S(e){if(!ae){for(var t=["moov","ftyp"],n="",i=4;i<8;++i)n+=String.fromCharCode(e.data[i]);if(t.indexOf(n)===-1)return void(Y.debugEnabled()&&Y.debug("dropping fragment: "+n));Y.debugEnabled()&&Y.debug("initialized with "+n),ae=!0}A(e.data)}function g(e){if(Y.debugEnabled()&&Y.debug("random access point streamtime "+e.data.onRandomAccessPoint.streamTime),!ae){oe=Math.floor(e.data.onRandomAccessPoint.streamTime)/1e3,Y.debugEnabled()&&Y.debug("set start time to random access point");var t=parseFloat(oe.toString());k&&k.buffered.length&&(oe=-1),t>0?(Y.debugEnabled()&&Y.debug("from stream info update"),E&&(R(-t),q=0,v(0,1/0))):0===t&&(Y.debugEnabled()&&Y.debug("from stream info"),E?(q=0,v(0,1/0),R(0)):R(p)),k&&k.buffered.length&&(Y.debugEnabled()&&Y.debug("have buffer and start time"),t>0?(Y.debugEnabled()&&Y.debug("from stream info update"),E&&I(0)):0===t&&(Y.debugEnabled()&&Y.debug("from stream info"),E?I(t):R(k.buffered.end(k.buffered.length-1))))}}function y(e){E=e.data.options.timestampReset}function A(e){O({command:$,fragment:e})}function v(e,t){O({command:Z,from:e,to:t})}function b(){O({command:ee,zeroing:t.isTridentBrowser&&!isNaN(f.duration)&&f.duration>0})}function I(e){O({command:te,position:e})}function R(e){O({command:ne,offset:e})}function O(e){e.count=z++,J?N(e):C(e)}function N(e){if(Y.detailEnabled()&&Y.detail("queue "+e.command+" "+e.count),e.force)Q.unshift(e);else if(e.command===$&&Q.length&&Q[Q.length-1].command===$){if(X+1<j){var t=Q[Q.length-1].fragment,n=e.fragment,i=new Uint8Array(t.byteLength+n.byteLength);i.set(new Uint8Array(t),0),i.set(new Uint8Array(n),t.byteLength),Q[Q.length-1].fragment=i,Q[Q.length-1].count=Q[Q.length-1].count.toString()+" & "+e.count,X++}else X=0,Y.detailEnabled()&&Y.detail("joined fragments threshold ("+j+") reached so begin new one"),Q.push(e);Y.detailEnabled()&&Y.detail("joined fragments count "+X)}else X=0,Y.detailEnabled()&&Y.detail("joined fragments count "+X),Q.push(e)}function C(e){if(Y.detailEnabled()&&Y.detail("execute "+e.command+" "+e.count),Y.detailEnabled()){var t="ranges ";if(!k||k&&!k.buffered.length)t+="0";else for(var n=0,i=k.buffered.length;n<i;n+=1)t+=n+" "+k.buffered.start(n)+" - "+k.buffered.end(n),n!==i-1&&(t+=", ");Y.detail(t)}switch(e.command){case $:J=!0,ie?(Y.detailEnabled()&&Y.detail("append "+e.count),k.appendBuffer(e.fragment),F()||q++):U();break;case Z:J=!0,k.buffered.length&&k.buffered.end(k.buffered.length-1)>0?(k.remove(e.from,e.to),Y.debugEnabled()&&Y.debug("removed buffer from "+e.from+" to "+e.to+" "+e.count)):U();break;case ee:J=!0,re=1,Y.debugEnabled()&&Y.debug("append enabled after reset"),ie=!0,e.zeroing?(Y.debugEnabled()&&Y.debug("zeroing mse duration"),f.duration=0):U();break;case te:J=!0,Y.debugEnabled()&&Y.debug("seek to position "+e.position+" "+e.count),l.emit(a.SEEK,{position:e.position}),U();break;case ne:J=!0,k&&(Y.debugEnabled()&&Y.debug("offset "+e.offset+" "+e.count),k.timestampOffset=e.offset,l.emit(d.TIME_OFFSET,{offset:Math.round(1e3*k.timestampOffset)})),U()}}function U(){if(oe>-1&&k&&k.buffered.length){var e=parseFloat(oe.toString());oe=-1,Y.debugEnabled()&&Y.debug("have buffer and start time on update end"),e>0?(Y.debugEnabled()&&Y.debug("from stream info update"),I(E?0:e)):0===e&&(Y.debugEnabled()&&Y.debug("from stream info"),I(E?e:p))}J=!1,re&&(re=0,Y.debugEnabled()&&Y.debug("source ready"),l.emit(u.SOURCE_READY)),Q.length?C(Q.shift()):x()&&F()&&(Y.debugEnabled()&&Y.debug("remove buffer"),v(k.buffered.start(0),G-W))}function P(e){Y.debugEnabled()&&Y.debug("stream info"),h=e.data.streamInfo,H=h&&h.mimeType?h.mimeType:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',f&&"open"===f.readyState?[c.PLAYING,c.BUFFERING].indexOf(B)!==-1?ae=!1:k?b():(Y.debugEnabled()&&Y.debug("init sourcebuffer after stream info"),D()):(Y.debugEnabled()&&Y.debug("add source open listener after stream info"),f.addEventListener(r.SOURCE_OPEN,w))}function w(){Y.debugEnabled()&&Y.debug("mediasource open"),f.removeEventListener(r.SOURCE_OPEN,w),Y.debugEnabled()&&Y.debug("init sourcebuffer"),D(H)}function D(){!k&&f&&"open"===f.readyState&&(Y.debugEnabled()&&Y.debug("create source buffer with mime type '"+H+"'"),k=f.addSourceBuffer(H),n.add({target:l,listeners:ue}),n.add({target:k,listeners:de}),Y.debugEnabled()&&Y.debug("append enabled init source buffer"),ie=!0,J&&U(),l.emit(u.SOURCE_READY))}function L(e){B=e.data.state,B===c.PAUSED&&M()}function M(){for(Y.debugEnabled()&&Y.debug("pause"),ae=!1,ie=!1;Q.length;)Q.pop();v(0,1/0),q=0,p=0}function x(){return k&&k.buffered.length&&k.buffered.start(0)<G-V}function F(){return K<q}var k,G,B,H,Y=e.create("SourceBufferQueue "+(new Date).toLocaleTimeString()),V=30,W=20,K=300,j=30,q=0,z=0,X=0,J=!1,Q=[],$="append",Z="remove",ee="reset",te="seek",ne="offset",ie=!1,h=h||void 0,E=!!E,re=0,ae=!1,oe=-1,p=p||0,se=[{type:s.STREAM_INFO,listener:P},{type:s.STREAM_INFO_UPDATE,listener:P},{type:s.STREAM_FRAGMENT,listener:S},{type:s.RANDOM_ACCESS_POINT,listener:g},{type:a.UPDATE_SOURCE,listener:y}],ue=[{type:o.TIME_UPDATE,listener:T},{type:s.APPLICATION_STATE_CHANGE,listener:L}],de=[{type:i.UPDATE_END,listener:U}];return m(),{destroy:_}}return{create:l}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="";return{BASE:e,ABORT:e+"abort",ERROR:e+"error",UPDATE:e+"update",UPDATE_START:e+"updatestart",UPDATE_END:e+"updateend"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(28),n(151),n(153)],r=function(e,t,n,i){function r(r){function a(){c.debugEnabled()&&c.debug("initialize"),t.add({target:r,listeners:l})}function o(){u(),t.remove({target:r,listeners:l})}function s(e){u(),e.data.streamInfo.haveAudio||(window.AudioContext=window.AudioContext||window.webkitAudioContext||function(){return{close:function(){}}},d=new AudioContext)}function u(){d&&"function"==typeof d.close&&(d.close(),d=null)}var d,c=e.create("FakeAudioContext"),l=[{type:i.STREAM_INFO,listener:s},{type:n.PAUSE,listener:u}];return a(),{destroy:o}}return{create:r}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(12),n(28),n(151),n(153),n(158),n(27)],r=function(e,t,n,i,r,a,o){function s(s){function u(){y.debugEnabled()&&y.debug("initialize"),n.add({target:s,listeners:v})}function d(){n.remove({target:s,listeners:v}),n.remove({target:s,listeners:b})}function c(e){m=e.data.state,n.remove({target:s,listeners:b}),(t.isTridentBrowser&&m===o.PLAYING||!t.isTridentBrowser&&m!==o.PAUSED)&&n.add({target:s,listeners:b})}function l(e){var t=E(e.data.currentTime,e.data.buffered),n=p(e.data.currentTime,e.data.buffered);if(_===e.data.currentTime){if(A++,A<T)return;if(n>t&&h(e.data.buffered,n)>g&&f(e.data.currentTime,e.data.buffered)){var r=e.data.buffered.start(p(e.data.currentTime,e.data.buffered));y.debugEnabled()&&y.debug("recover gap, seek to "+r,3),s.emit(i.SEEK,{position:r}),s.emit(i.PLAY,{external:!1})}}_=e.data.currentTime,A=0}function f(e,t){return e+S>=t.end(E(e,t))}function E(e,t){for(var n=0;n<t.length-1&&t.start(n+1)<=e;)n++;return n}function p(e,t){for(var n=0;n<t.length-1&&t.start(n)<=e;)n++;return n}function h(e,t){return t<e.length?e.end(t)-e.start(t):0}var m,_,T=10,S=.2,g=.5,y=e.create("GapHandler"),A=0,v=[{type:r.APPLICATION_STATE_CHANGE,listener:c}],b=[{type:a.TIME_UPDATE,listener:l}];return u(),{destroy:d}}return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(53),n(28),n(150),n(153),n(148),n(158),n(27)],r=function(e,t,n,i,r,a,o,s){function u(o){function u(){h.debugEnabled()&&h.debug("initialize"),n.add({target:o,listeners:m})}function d(){n.remove({target:o,listeners:m})}function c(e){n.remove({target:o,listeners:_});var t=e.data.state;switch(t){case s.PAUSED:case s.PAUSING:h.debugEnabled()&&h.debug("entering paused state"),f=null;break;case s.PLAYING:n.add({target:o,listeners:_})}}function l(e){if(E===e.data.index&&f&&"undefined"!=typeof f.currentTime&&e.data.stats.currentTime<f.currentTime-p){var n={currentTime:{last:f.currentTime,current:e.data.stats.currentTime}};o.emit(i.ERROR,n)}E=e.data.index,f=t.copy(e.data.stats)}var f,E,p=2,h=e.create("HLSJumpHandler"),m=[{type:r.APPLICATION_STATE_CHANGE,listener:c}],_=[{type:a.PLAY_STATS,listener:l}];return u(),{destroy:d}}return{create:u}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(9),n(13),n(12),n(28),n(150),n(151),n(153),n(158),n(27)],r=function(e,t,n,i,r,a,o,s,u){function d(d){function c(){T.debugEnabled()&&T.debug("initialize"),i.add({target:d,listeners:y})}function l(){i.remove({target:d,listeners:y})}function f(t){g=t.name===o.DOCUMENT_HIDDEN,T.debug(g?"hidden":"visible"),g&&e.mobile&&(m===u.PLAYING||m===u.LOADING||m===u.BUFFERING)&&d.emit(r.SUSPENDED)}function E(t){var n=t.data.buffered.length?t.data.buffered.end(0)-t.data.currentTime:"n.a.";(_&&t.name===s.PAUSE||g&&e.mobile)&&m===u.PLAYING?d.emit(r.SUSPENDED):S||(S=setTimeout(function(){m===u.PLAYING&&(T.debugEnabled()&&T.debug("nanoplayer: recover unexpected pause type "+t.name+", delay = "+n,3),d.emit(a.PLAY,{external:!1})),S=0},200))}function p(e){m=e.data.state}function h(e){_=n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS}var m,_,T=t.create("PauseHandler"),S=0,g=!1,y=[{type:s.PAUSE,listener:E},{type:s.WAITING,listener:E},{type:s.ENDED,listener:E},{type:o.APPLICATION_STATE_CHANGE,listener:p},{type:o.CONFIG,listener:h},{type:o.DOCUMENT_VISIBLE,listener:f},{type:o.DOCUMENT_HIDDEN,listener:f}];return c(),{destroy:l}}return{create:d}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(28),n(27),n(151),n(153),n(158),n(154)],r=function(e,t,n,i,r,a,o){function s(i){function s(){t.add({target:i,listeners:N})}function u(){t.remove({target:i,listeners:N}),t.remove({target:i,listeners:C})}function d(){for(T={droppedVideoFrames:0,droppedVideoFramesCurrent:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0};b.length;)b.pop()}function c(e){S=e.data.state,S===n.PAUSED?p():!O&&I&&S===n.PLAYING&&E()}function l(e){I=e.data.streamInfo.haveVideo&&(R=e.data.streamInfo.videoInfo.frameRate)}function f(e){l(e)}function E(){p(),t.add({target:i,listeners:C}),O=setInterval(m,y)}function p(){clearInterval(O),t.remove({target:i,listeners:C}),O=0,d()}function h(e){for(var t in e.data.quality)if(T.hasOwnProperty(t)){if("droppedVideoFrames"===t){for(T.droppedVideoFramesCurrent=e.data.quality.droppedVideoFrames-T.droppedVideoFrames;b.length>v-1;)b.shift();b.push({count:T.droppedVideoFramesCurrent,time:e.data.currentTime})}"corruptedVideoFrames"===t&&(T.corruptedVideoFramesCurrent=e.data.quality.corruptedVideoFrames-T.corruptedVideoFrames),T[t]=e.data.quality[t]}i.emit(o.QUALITY_STATS,T)}function m(){if(S===n.PLAYING){var e=_("extreme");if(!e&&(e=_("high")),!e&&(e=_("medium")),e){for(g.debugEnabled()&&g.debug("frame drop detected with type '"+e.type+"'"),g.debug(e.frames.dropped+" frames in last "+e.samples.all.length+" seconds dropped");b.length;)b.pop();i.emit(o.FRAME_DROP,e)}}}function _(e){if(b.length>A[e].samplesRange-1){var t=b.slice(-A[e].samplesRange),n=t.filter(function(t){return t.count>=R*A[e].ratioThreshold});if(n.length>A[e].samplesMatchAllowed){var i=0;return t.forEach(function(e){i+=e.count}),{type:e,framerate:R,samples:{all:t,matched:n,limit:Math.ceil(R*A[e].ratioThreshold)},frames:{dropped:i}}}}return!1}var T,S,g=e.create("QualityHandler"),y=1e3,A={extreme:{ratioThreshold:.95,samplesRange:3,samplesMatchAllowed:1},high:{ratioThreshold:.2,samplesRange:5,samplesMatchAllowed:1},medium:{ratioThreshold:.1,samplesRange:10,samplesMatchAllowed:3}},v=10,b=[],I=!1,R=0,O=0,N=[{type:r.APPLICATION_STATE_CHANGE,listener:c},{type:r.STREAM_INFO,listener:l},{type:r.STREAM_INFO_UPDATE,listener:f}],C=[{type:a.QUALITY_UPDATE,listener:h}];return s(),{destroy:u}}return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(98),n(28),n(13),n(12),n(130),n(27),n(153),n(151),n(158),n(148)],r=function(e,t,n,i,r,a,o,s,u,d){function c(s){function c(){g(),t.add({target:s,listeners:D}),t.add({target:s,listeners:L})}function l(){t.remove({target:s,listeners:L}),t.remove({target:s,listeners:D})}function f(e){switch(A=e.data.state){case a.PAUSED:P.debugEnabled()&&P.debug("remove stats listener"),t.remove({target:s,listeners:M});break;case a.PLAYING:break;case a.LOADING:g(),v&&(P.debugEnabled()&&P.debug("hls: add stats listener"),t.add({target:s,listeners:M}))}}function E(e){v=i.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&i.canUseHLS}function p(e){C+=1,U+=e.data.byteLength}function h(e){v||(P.debugEnabled()&&P.debug("wss: add stats listener"),t.add({target:s,listeners:M})),b=e.data.streamInfo.haveVideo}function m(e){b=e.data.streamInfo.haveVideo}function _(t){var n=t.data.buffered.length-1,i=t.data.played.length-1;if(y.currentTime=A===a.LOADING?0:t.data.currentTime,i>=0&&(y.playout.start=t.data.played.start(i),y.playout.end=t.data.played.end(i)),n>=0&&(!v||v&&(y.buffer.end!==t.data.buffered.end(n)||t.data.buffered.end(n)<y.currentTime))&&(y.buffer.update.current=t.data.buffered.end(n)-y.buffer.end,y.buffer.delay.before=y.buffer.end-y.currentTime,y.buffer.start=t.data.buffered.start(n),y.buffer.end=t.data.buffered.end(n),y.buffer.delay.current=y.buffer.end-y.currentTime,I.add(y.buffer.delay.current),S(I,y.buffer.delay),R.add(y.buffer.update.current),S(R,y.buffer.update)),e&&!v){var r=Math.floor(e.now()/1e3);w!==r&&(w=r,y.bitrate.current=8*U,O.add(y.bitrate.current),S(O,y.bitrate),b&&(y.framerate.current=C,N.add(y.framerate.current),S(N,y.framerate)),C=0,U=0)}T(t)}function T(e){s.emit(d.PLAY_STATS,{stats:y,buffered:e?e.data.buffered:null,played:e?e.data.played:null,currentTime:e?e.data.currentTime:0,playbackRate:e?e.data.playbackRate:0,index:e?e.data.index:0})}function S(e,t){t.avg=e.arithmetic,t.min=e.minimum,t.max=e.maximum,t.deviation=e.deviation}function g(){y={currentTime:0,playout:{start:0,end:0},buffer:{start:0,end:0,delay:{before:0,current:0,avg:0,min:0,max:0,deviation:0},update:{current:0,avg:0,min:0,max:0,deviation:0}},quality:{droppedVideoFrames:0,droppedVideoFramesCurrent:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0},bitrate:{current:0,avg:0,min:0,max:0,deviation:0},framerate:{current:0,avg:0,min:0,max:0,deviation:0}},I=r.create(10),R=r.create(10),O=r.create(10),N=r.create(10),C=0,U=0,T(null)}var y,A,v,b,I,R,O,N,C,U,P=n.create("StatsCollector"),w=0,D=[{type:o.APPLICATION_STATE_CHANGE,listener:f},{type:o.CONFIG,listener:E}],L=[{type:o.STREAM_FRAGMENT,listener:p},{type:o.STREAM_INFO,listener:h},{type:o.STREAM_INFO_UPDATE,listener:m}],M=[{type:u.TIME_UPDATE,listener:_}];return c(),{destroy:l}}return{create:c}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(153)],r=function(e){function t(t){function n(){a()&&t.addListener(e.STREAM_FRAGMENT,r)}function i(){t.removeListener(e.STREAM_FRAGMENT,r)}function r(e){window.fragments||(window.fragments=[]),window.fragments.push(e.data)}function a(){return!!o("nanoDump")}function o(e){return document.cookie.indexOf(e+"=")!==-1?document.cookie.split(e+"=")[1].split(";")[0]:null}return n(),{destroy:i}}return{create:t}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(12),n(53),n(28),n(151),n(153),n(161),n(158),n(165),n(5),n(90),n(27),n(76)],r=function(e,t,n,i,r,a,o,s,u,d,c,l,f){function E(e){function E(){i.add({target:e,listeners:Be})}function h(t){if(t&&t.name&&t.data){var n=t.name,i=Q(n),r=t.data.index;if(ve===r)switch(n){case u.CAN_PLAY:Qe||(!Ae||We)&&Ae||(e.emit(i,t.data),Qe=!0,oe());break;default:e.emit(i,t.data)}else if(r===we&&we!==ve)switch(p.debugEnabled()&&p.debug("onMediaElementEvent switchMediaElementIndex: "+we),n){case u.CAN_PLAY:p.debugEnabled()&&p.debug("onMediaElementEvent CAN_PLAY on switchMediaElementIndex: "+we),Qe||(p.debugEnabled()&&p.debug("onMediaElementEvent emit CAN_PLAY"),e.emit(i,t.data),Qe=!0);break;case u.CAN_PLAY_THROUGH:p.debugEnabled()&&p.debug("onMediaElementEvent CAN_PLAY_THROUGH on switchMediaElementIndex: "+we),Ke&&(p.debugEnabled()&&p.debug("onMediaElementEvent CAN_PLAY_THROUGH wait for progress"),$e=!0,e.emit(i,t.data));break;case u.PROGRESS:p.debugEnabled()&&p.debug("onMediaElementEvent PROGRESS on switchMediaElementIndex: "+we),Ke&&$e&&(p.debugEnabled()&&p.debug("onMediaElementEvent PROGRESS call mediaElementSwitch"),$e=!1,Ee())}}}function m(e){K(e)&&(T(e.data.config),_())}function _(){Ae=t.mustUseHLS||Ne.playback.allowSafariHlsFallback&&t.canUseHLS,
be=Ne.source.entries,ve=0,ke=0,startIndex=Ne.source.startIndex,xe=startIndex,Ne.playback&&(Ve=!!Ne.playback.muted,Ie=!!Ne.playback.automute)}function T(e){Ne=e}function S(t){var n;K(t)&&(t.data.elementIds&&(De=t.data.elementIds),t.data.container&&(Le=t.data.container)),ke=De.length;for(var i=0;i<ke;i++)n=C({elementId:De[i],index:i}),He.push(n);e.emit(s.ELEMENT_CREATED,{video:M(n[ve])}),e.emit(s.VOLUME_CHANGE,{muted:!0,volume:1}),Ae&&B(He[ve])}function g(e){var t,n,i=Te();p.debugEnabled()&&p.debug("received video source"),p.debugEnabled()&&p.debug("src: "+e.data.src),p.debugEnabled()&&p.debug("type: "+e.data.type),K(e)&&(Ue=e.data.src,t=!Ue.length,Pe=e.data.type,n=(i||We)&&Ye?we:ve,p.debugEnabled()&&p.debug("sourceTemplate set"),He.length&&(!Ae||Ae&&(t||!Ge&&(Ye&&We||!Ye&&!We)))&&(ce(He[n]),le(He[n]),Ae||V(He[n]),Ye&&!t&&(p.debugEnabled()&&p.debug("call play while playing after video source received"),U(He[n],{},i)),$(),Z(),t||(p.debugEnabled()&&p.debug("add time update interval for play stats"),ee(),"function"==typeof L(He[n])&&(p.debugEnabled()&&p.debug("add quality update interval"),te()))))}function y(e){if(He[ve]){if(Ae){B(He[ve]);var t=ve?0:1;H(He[t]),Ve?w(He[ve]):D(He[ve]),k(He[ve],je)}p.debugEnabled()&&p.debug("onPlay index: "+ve),Ye||U(He[ve],e,!1)}}function A(){p.debugEnabled()&&p.debug("onPause index: "+ve),P(He[ve],!1),isNaN(we)||P(He[we],!1)}function v(){p.debugEnabled()&&p.debug("mute index: "+ve),w(He[ve],!0)}function b(){p.debugEnabled()&&p.debug("unmute index: "+ve);for(var e=0;e<He.length;e++)D(He[e],!0);ue()}function I(e){p.debugEnabled()&&p.debug("onSeek index: "+ve),F(He[ve],e)}function R(){for(var e=0;e<He.length;e++)x(He[e])}function O(e){K(e)&&(p.debugEnabled()&&p.debug("onSetVolume index: "+ve),je=Math.min(1,Math.max(0,e.data.volume)),k(He[ve],je))}function N(e){if(K(e)){p.debugEnabled()&&p.debug("onSetVolume index: "+ve);var t=e.data.rate;G(He[ve],t)}}function C(t){return o.create(e,t.elementId,Le,t.index,Ae,Ve,Ie,Je)}function U(e,t,n){e&&(e.play(t),n||(Ye=!0))}function P(e,t){e&&(e.pause(),t||(Ye=!1))}function w(e,t){e&&(t&&(Ve=!0),e.setMute())}function D(e,t){e&&(t&&(Ve=!1),e.setUnmute())}function L(e){if(e)return e.getVideoPlaybackQuality()}function M(){return He[ve].getVideoElement()}function x(e){e&&e.destroyVideo()}function F(e,t){e&&e.seek(t)}function k(e,t){e&&(e.setVolume(t),je=t)}function G(e,t){e&&e.setRate(t)}function B(e){e&&Ae&&e.show()}function H(e){e&&Ae&&e.hide()}function Y(e){if(e)return e.getEventPayload()}function V(e){e&&e.loadVideo()}function W(e){if(e){for(var t=0;t<e.length;t++)e[t].destroy();e=[]}}function K(e,t){var n=e&&e.hasOwnProperty("data");return t?n&&e.data.hasOwnProperty(t):n}function j(){Z(),$(),i.remove({target:e,listeners:Be}),W(He)}function q(e){fe(e)}function z(e){Ae&&K(e)&&Me&&e.data.id===Me.id&&We&&(Ke=!0,We=!1,Qe=!0,xe=Me.entry.index)}function X(e){fe(e)}function J(e){Ae&&K(e)&&Me&&e.data.id===Me.id&&We&&(Ke=!0,We=!1,Qe=!0,xe=Fe)}function Q(e){var t=e.indexOf(".")+1;return"mediaElementHandler."+e.substring(t)}function $(){clearInterval(Re),Re=void 0}function Z(){clearInterval(Oe),Oe=void 0}function ee(){Re=setInterval(ne,qe)}function te(){Oe=setInterval(ie,ze)}function ne(){var t=Y(He[ve]);e.emit(u.TIME_UPDATE,t)}function ie(){var t=Y(He[ve]);e.emit(u.QUALITY_UPDATE,t)}function re(e){Ce&&ae();var t=e&&e.hasOwnProperty("options")&&e.options.hasOwnProperty("timeout")?1e3*e.options.timeout:Xe;Ce=setTimeout(function(){pe()},t)}function ae(){Ce&&(clearTimeout(Ce),Ce=0)}function oe(){p.debugEnabled()&&p.debug("reset switch variables"),we=void 0,Qe=!0,We=!1,Ke=!1,Me=void 0,Fe=void 0}function se(e){e&&e.showOnTop()}function ue(){setTimeout(function(){for(var e=0;e<He.length;e++)e!==ve&&w(He[e],!1)},50)}function de(){Ze=!0,setTimeout(function(){Ze=!1},500)}function ce(e){e&&e.setSource({source:Ue})}function le(e){e&&e.setType({type:Pe})}function fe(e){var t,i,r,a;if(Ae&&K(e)&&e.data.hasOwnProperty("entry"))if(r=e.data.entry.index,t=Ge?"update"===Ge.type:Te(),i="update"===e.data.type,p.debugEnabled()&&p.debug((i?"updateSourceInit":"switchStreamInit")+" with entryIndex: "+r),Ze)p.debugEnabled()&&p.debug((i?"updating":"switching")+" is disabled, abort");else{if(We&&(!t||t&&i)||Ge&&(!t||t&&i))p.debugEnabled()&&p.debug("abort ongoing "+(t?"update":"switch")+" process"),a=n.copy(Ge?Ge:Me),a.reason="superseded",he(a),ae(),Ge?Ge=void 0:(P(He[we],!0),oe());else if(We&&t&&!i||Ge&&t&&!i)return void(p.debugEnabled()&&p.debug("ongoing updateSource process!"));i||xe!==r?(p.debugEnabled()&&p.debug("new "+(i?"update":"switch")),Ke?(p.debugEnabled()&&p.debug("do not handle switch, still ongoing switch!"),p.debugEnabled()&&p.debug("add to queue!"),Ge=e.data):(p.debugEnabled()&&p.debug("handle switch without ongoing"),Se(e.data,r,i))):(p.debugEnabled()&&p.debug("abort switch attempt on equal index"),a=n.copy(e.data),a.reason="equalsource",oe(),ae(),he(a)),de()}}function Ee(){Ae&&void 0!==we&&Ke&&(p.debugEnabled()&&p.debug("switch mediaElement after successfull "+(Te()?"updateSource":"switchStream")),ae(),se(He[we]),setTimeout(function(){H(He[ve]),w(He[ve]),Ve?w(He[we]):D(He[we]),P(He[ve],!0),k(He[we],je),B(He[we]),ve=we,Ge?(Ke=!1,ge()):oe()},150))}function pe(){void 0!==we&&we!==ve&&We&&!Ke&&(payload=n.copy(Me),me(payload),P(He[we],!0),Te()&&(xe=void 0,_e()),Ge=void 0,oe())}function he(t){e.emit(s.UPDATE_SOURCE_ABORT,{source:t.source,entry:t.entry,rule:t.rule,reason:t.reason,tag:t.tag,count:t.count,type:t.type,id:t.id})}function me(t){e.emit(s.UPDATE_SOURCE_FAIL,{tag:t.options.tag,count:t.options.count,code:d.NETWORK.SOURCE_TIMEOUT,message:c.NETWORK.SOURCE_TIMEOUT,type:t.type,id:t.id})}function _e(){e.emit(s.UPDATE_SOURCE_TIMEOUT,{code:d.STREAM.MEDIA_NOT_AVAILABLE,message:c.STREAM.MEDIA_NOT_AVAILABLE})}function Te(){return Me&&Me.hasOwnProperty("type")&&"update"===Me.type}function Se(e,t,n,i){we=ve?0:1,p.debugEnabled()&&p.debug("mediaElementPrepareSwitch on switchMediaElementIndex: "+we),Qe=!1,We=!0,Me=e,n?(be=Me.source.entries,startIndex=Me.source.startIndex,Fe=startIndex,i&&(ce(He[we],startIndex),le(He[we]),Ae||V(He[we]),U(He[we],{},!0),$(),Z(),Ue.length&&(p.debugEnabled()&&p.debug("add time update interval for play stats"),ee(),"function"==typeof L(He[we])&&(p.debugEnabled()&&p.debug("add quality update interval"),te())))):Ye&&(we=ve?0:1,Fe=t,i&&(ce(He[we],t),le(He[we]),Ae||V(He[we]),U(He[we],{},!0))),Ye&&re(Me)}function ge(){if(Ge){var e="update"===Ge.type,t=Ge.entry.index,i=n.copy(Ge);Ge=void 0,p.debugEnabled()&&p.debug("handleQueuedSwitch"),Se(i,t,e,!0)}}function ye(e){var t=e.data.state;switch(t){case l.PAUSED:(We||Ke)&&void 0!==we&&[f.BUFFER].indexOf(e.data.reason)===-1?(B(He[we]),H(He[ve]),ve=we,Ge?(xe=Ge.source.startIndex,startIndex=Ge.source.startIndex,be=Ge.source.entries):xe=Fe,oe(),ae(),Ge=void 0):(H(He[we]),oe(),ae()),Ye=!1,Qe=!1}}var Ae,ve,be,Ie,Re,Oe,Ne,Ce,Ue,Pe,we,De,Le,Me,xe,Fe,ke,Ge,Be=[{type:a.CONFIG,listener:m},{type:r.CREATE_VIDEO,listener:S},{type:r.DESTROY_VIDEO,listener:R},{type:r.VIDEO_SOURCE,listener:g},{type:r.PLAY,listener:y},{type:r.PAUSE,listener:A},{type:r.MUTE,listener:v},{type:r.UNMUTE,listener:b},{type:r.SEEK,listener:I},{type:r.SET_VOLUME,listener:O},{type:r.SET_RATE,listener:N},{type:u.LOAD_START,listener:h},{type:u.PROGRESS,listener:h},{type:u.SUSPEND,listener:h},{type:u.ABORT,listener:h},{type:u.EMPTIED,listener:h},{type:u.STALLED,listener:h},{type:u.PLAY,listener:h},{type:u.PAUSE,listener:h},{type:u.LOADED_META_DATA,listener:h},{type:u.LOADED_DATA,listener:h},{type:u.WAITING,listener:h},{type:u.ERROR,listener:h},{type:u.PLAYING,listener:h},{type:u.CAN_PLAY,listener:h},{type:u.CAN_PLAY_THROUGH,listener:h},{type:u.SEEKING,listener:h},{type:u.SEEKED,listener:h},{type:u.TIME_UPDATE,listener:h},{type:u.ENDED,listener:h},{type:u.RATE_CHANGE,listener:h},{type:u.DURATION_CHANGE,listener:h},{type:u.VOLUME_CHANGE,listener:h},{type:u.ELEMENT_CREATED,listener:h},{type:u.PLAY_START_SUCCESS,listener:h},{type:u.PLAY_START_ERROR,listener:h},{type:u.VIEWPORT_VISIBLE,listener:h},{type:u.VIEWPORT_HIDDEN,listener:h},{type:a.SWITCH_STREAM_INIT,listener:q},{type:a.SWITCH_STREAM_SUCCESS,listener:z},{type:a.UPDATE_SOURCE_INIT,listener:X},{type:a.UPDATE_SOURCE_SUCCESS,listener:J},{type:a.APPLICATION_STATE_CHANGE,listener:ye}],He=[],Ye=!1,Ve=!1,We=!1,Ke=!1,je=1,qe=100,ze=1e3,Xe=1e4,Ie=!1,Je=!1,Qe=!1,$e=!1,Ze=!1;return E(),{destroy:j}}var p=e.create("MediaElementHandler");return{create:E}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(77),n(86),n(84),n(10),n(2),n(9)],r=function(e,t,n,i,r,a){"use strict";function o(e){this.version=n.CORE,this.type="native",this.config={playback:{autoplay:!0,muted:!1},source:{hls:void 0}},this._playerDivId=e}o.isSupported=function(){return"iOS"===a.os||"Safari"===a.browser},o.supportedTechniques=[t.NATIVE];var s=o.prototype=Object.create(e.prototype);return s.setup=function(e){var t=this;return new Promise(function(n,i){try{r.merge(e,t.config),r.clean(t.config),window.location=t.config.source.hls,n(t.config)}catch(e){i(e)}})},s.play=function(){},s.pause=function(){},s.mute=function(){},s.unmute=function(){},s.setVolume=function(){},o}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(77),n(86),n(4),n(180),n(5),n(90),n(84),n(181),n(11),n(10),n(2),n(3),n(53),n(78),n(79),n(14),n(182),n(27),n(76),n(116)],r=function(e,t,n,i,r,a,o,s,u,d,c,l,f,E,p,h,m,_,T,S){function g(e){this.version=o.CORE,this.type="flash",this.config=E.create(),this._volume=1,this._muted=!1,this._mediaElement=null,this._mediaSource=null,this._playing=!1,this._playerDivId=e,this._playerDiv=document.getElementById(this._playerDivId),this._mediaElementId="flash-"+e,this.state=this.STATE.IDLE,this._triggered=0,this._stats={currentTime:0,playout:{start:0,end:0},buffer:{start:0,end:0,delay:{before:0,current:0,avg:0,min:0,max:0,deviation:0},update:{current:0,avg:0,min:0,max:0,deviation:0}},quality:{droppedVideoFrames:0,droppedVideoFramesCurrent:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0},bitrate:{current:0,avg:0,min:0,max:0,deviation:0},framerate:{current:0,avg:0,min:0,max:0,deviation:0}},this._intervalEmitStats=0,this._streamInfo=null,this._isSwitchStream=!1,this._isUpdateSource=!1,this._switchCount=0}var y=d.log,A=2e4,v=1e4,b=6e4,I=2e4,R=1e4,O=6e4;g.isSupported=function(){return 0!==s.ua.pv[0]||s.ua.pv===[0,0,0]},g.supportedTechniques=[t.FLASH];var N=g.prototype=Object.create(e.prototype);return N.setup=function(e){return new Promise(function(t,i){try{var a=c.check(e,p.create());c.merge(e,this.config),c.clean(this.config),!this.config.source.h5live||this.config.source.entries&&this.config.source.entries.length||(this.config.source.entries=[{h5live:f.copy(this.config.source.h5live)}]);var o=this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live.rtmp,s=this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live.params;if(!(o&&o.url&&o.streamname||s&&s.url&&s.stream))throw new l(n.CONFIG_RTMP,r.SETUP.CONFIG_RTMP);this._emitter=new u,this._setListeners(this.config.events,this),a.forEach(function(e){this._emitWarning(e)}.bind(this)),this._metaDataEnabled=this.config.playback.metadata,this._setupVideoElement(),this._setupFinish().then(t,i)}catch(e){i(e)}}.bind(this))},N.play=function(){this._setMediaElement(),this._mediaElement.Start()},N.pause=function(){this._isSwitchStream&&(this._emit(h.SWITCH_STREAM_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(h.UPDATE_SOURCE_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource}),this._isUpdateSource=!1),this._triggered=arguments.length?arguments[0]:0,clearTimeout(this._bufferTimeout),this._setMediaElement(),this._mediaElement.Stop()},N.mute=function(){this._setMediaElement(),this._muted=!0,this._mediaElement.SetVolume(0),this._emit(h.MUTE)},N.unmute=function(){this._setMediaElement(),this._muted=!1,this._mediaElement.SetVolume(this._volume),this._emit(h.UNMUTE)},N.setVolume=function(e){e<0&&(e=0),e>1&&(e=1),this._setMediaElement(),this._volume=e,this._muted||this._mediaElement.SetVolume(this._volume),this._emit(h.VOLUME_CHANGE,{volume:e})},N.destroy=function(){this._setState(this.STATE.DESTROYING),this._playing&&this.pause(this.state),this._emit(h.DESTROY),this._mediaElement&&(this.pause(),document.getElementById(this._playerDivId).removeChild(this._mediaElement),this._mediaElement=null),clearTimeout(this._bufferTimeout),this.removeAllListeners()},N.updateSource=function(e){return new Promise(function(t,n){try{this._isSwitchStream&&(this._emit(h.SWITCH_STREAM_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream,reason:"superseded"}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(h.UPDATE_SOURCE_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource,reason:"superseded"}),this._isUpdateSource=!1),this._isUpdateSource=Math.round(1e11*Math.random()),this._switchCount++,setTimeout(this._emit.bind(this,h.UPDATE_SOURCE_INIT,{source:this.config.source,entry:this._getEntry(),rule:"none",options:this.config.source.options?this.config.source.options:{},tag:"",count:this._switchCount,type:"direct",id:this._isUpdateSource}),0);var i=!1;this.state!==this.STATE.PLAYING&&this.state!==this.STATE.LOADING&&this.state!==this.STATE.BUFFERING||(i=!0),this.config.source=e,!this.config.source.h5live||this.config.source.entries&&this.config.source.entries.length||(this.config.source.entries=[{h5live:f.copy(this.config.source.h5live)}]),this._setConnectionConfig(this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live),this.config.source.entries.length>1&&this.config.source.options&&this.config.source.options.adaption&&this.config.source.options.adaption.rule&&"none"!==this.config.source.options.adaption.rule&&this._emitWarning("ABR is not supported with flash!"),i?this.play():(setTimeout(this._emit.bind(this,h.UPDATE_SOURCE_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isUpdateSource}),0),this._isUpdateSource=!1),t(f.copy(this.config))}catch(e){n(e)}}.bind(this))},N.switchStream=function(e){return new Promise(function(t,n){if(isNaN(e)||e<0||e>=this.config.source.entries.length){var i=new l(a.PLAYER.INVALID_ENTRY_INDEX,r.PLAYER.INVALID_ENTRY_INDEX);n(i)}else{this._isSwitchStream&&(this._emit(h.SWITCH_STREAM_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream,reason:"superseded"}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(h.UPDATE_SOURCE_ABORT,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource,reason:"superseded"}),this._isUpdateSource=!1),this._isSwitchStream=Math.round(1e11*Math.random()),this._switchCount++,setTimeout(this._emit.bind(this,h.SWITCH_STREAM_INIT,{source:this.config.source,entry:this._getEntry(),rule:"none",options:this.config.source.options?this.config.source.options:{},tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),0);var o=!1;this.state!==this.STATE.PLAYING&&this.state!==this.STATE.LOADING&&this.state!==this.STATE.BUFFERING||(o=!0),this._setConnectionConfig(this.config.source.entries[e].h5live),o?this.play():(setTimeout(this._emit.bind(this,h.SWITCH_STREAM_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),0),this._isSwitchStream=!1),t(f.copy(this.config))}}.bind(this))},N.setAdaption=function(e){e&&e.rule&&"none"!==e.rule&&this._emitWarning("ABR is not supported with flash!")},N._setupVideoElement=function(){var e="nano.player.swf";"undefined"!=typeof this.config.playback.flashplayer&&(e=this.config.playback.flashplayer);var t=document.createElement("div");t.setAttribute("id","flashReplace"),this._playerDiv.appendChild(t);var n="9.0.0",i={},r={};r.quality="high",r.bgcolor="#000000",r.allowscriptaccess="always",r.allowfullscreen="true",r.allowfullscreeninteractive="true",r.wmode="transparent";var a={};a.id=this._mediaElementId,a.name=this._mediaElementId,a.align="middle",a.wmode="transparent",s.embedSWF(e,"flashReplace","100%","100%",n,null,i,r,a)},N._setupFinish=function(){return new Promise(function(e,t){function n(){if(o++,a&&(this._mediaElement=document.getElementById(this._mediaElementId),this._mediaElement&&this._mediaElement.Start)){clearInterval(a);try{if(window._flashPlayers[this._mediaElementId]=this,this._setName(),this._mediaElement.TraceExternalFunctions(),this._setNetStream(!1),this._setConnectionConfig(this.config.source.entries[isNaN(this.config.source.startIndex)?0:this.config.source.startIndex].h5live),this.config.source.entries.length>1&&this.config.source.options&&this.config.source.options.adaption&&this.config.source.options.adaption.rule&&"none"!==this.config.source.options.adaption.rule&&this._emitWarning("ABR is not supported with flash!"),this._setPlayerConfig(this._playerDiv.offsetWidth,this._playerDiv.offsetHeight),this.config.playback.muted&&this.mute(),this.config.playback.timeouts){var n=1e3*this.config.playback.timeouts.loading,s=1e3*this.config.playback.timeouts.buffering;A=Math.max(Math.min(n,b),v),I=Math.max(Math.min(s,O),R)}this.config.type=this.type,this._setState(this.STATE.READY),this._emit(h.READY,{config:this.config}),this.config.playback.autoplay&&this.play(),e(f.copy(this.config))}catch(e){t(e)}}o>100&&(clearInterval(a),t(new l(i.EMBED_PLAYER,r.SETUP.EMBED_PLAYER)))}var a=0,o=0;a=setInterval(n.bind(this),100)}.bind(this))},N._setListeners=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&"function"==typeof e[n]){var i=n.replace("on",""),r=e[n];t.on(i,r)}},N._setState=function(e){this.state=e,y("nanoplayer ("+this._playerDivId+'): set state "'+this._getState()+'"',3),this._emit(h.STATE_CHANGE)},N._getState=function(){for(var e in this.STATE)if(this.STATE[e]===this.state)return e},N._emit=function(e,t){var n={};t&&t.name&&t.data?n=t:t?(n.data=t,n.name=e||"unknown"):(n.data={},n.name=e||"unknown"),n.player=this._playerDivId,n.id=this.id,n.version=this.version,n.state=this.state,"Error"===e&&n.data.code&&n.data.message&&y("nanoplayer ("+this._playerDivId+"): error "+n.data.code+" "+n.data.message,1),this.emit(n.name,n)},N._emitError=function(e,t){this._emit(h.ERROR,{code:e,message:t})},N._emitWarning=function(e){this._emit(h.WARNING,{message:e})},N._setConnectionConfig=function(e){this._setMediaElement();var t=e.rtmp,n=e.params,i=n&&n.url?n.url:t&&t.url?t.url:null,r=n&&n.stream?n.stream:t&&t.streamname?t.streamname:null;i&&r?(this.config.url=i+"/"+r,this._mediaElement.SetServerUrl(i),this._mediaElement.SetStreamName(r)):this.config.url=""},N._setPlayerConfig=function(e,t){this._setMediaElement(),this._mediaElement.SetVideoDisplayResolution(e+","+t),this._mediaElement.SetResize("false"),this._mediaElement.SetOnlyThisResolution(e+","+t)},N._setNetStream=function(e){this._setMediaElement(),this._mediaElement.UseNetstream(e?1:0)},N._setMediaElement=function(){var e=document.getElementById(this._mediaElementId);this._mediaElement=e},N._getPauseReason=function(e){var t="";if(e)switch(this.state){case this.STATE.READY:t=T.SERVER_NOT_FOUND;break;case this.STATE.LOADING:t=T.STREAM_NOT_FOUND;break;case this.STATE.BUFFERING:t=T.BUFFER;break;case this.STATE.UNKNOWN:t=T.UNKNOWN;break;case this.STATE.PLAYING:t=T.NORMAL;break;case this.STATE.DESTROYING:t=T.DESTROY;break;case this.STATE.PLAYBACK_RESTARTING:t=T.PLAYBACK_RESTART;break;default:t=T.NORMAL}else t=T.NORMAL;return t},N._startIntervals=function(){this._stopIntervals(),this._onStats(!0),this._intervalEmitStats=setInterval(this._onStats.bind(this),100)},N._stopIntervals=function(){this._intervalEmitStats&&(clearInterval(this._intervalEmitStats),this._intervalEmitStats=0)},N._getEntry=function(){var e={},t=this._mediaElement.GetStreamName();return this.config.source.entries.forEach(function(n){n.h5live.rtmp.streamname===t&&(e=f.copy(n))}),e},N._onStreamInfo=function(e){y("nanoplayer ("+this._playerDivId+"): onStreamInfo",2),this._setMediaElement(),this._streamInfo=e,this._streamInfo.url="",this._streamInfo.rtmp={url:this._mediaElement.GetServerUrl(),streamname:this._mediaElement.GetStreamName()},this._isSwitchStream&&(this._emit(h.SWITCH_STREAM_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(h.UPDATE_SOURCE_SUCCESS,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource}),this._isUpdateSource=!1),this._emit(h.STREAM_INFO,{streamInfo:this._streamInfo})},N._onStats=function(e){var t=e?0:this._stats.currentTime+.1;this._stats.currentTime=t;var n="stats error";try{n=JSON.stringify(this._stats)}catch(e){}y("nanoplayer ("+this._playerDivId+"): stats - "+n,4),this._emit(h.STATS,{stats:this._stats})},N._onLoading=function(){this._isSwitchStream||this._isUpdateSource||(this._playing=!0,this._setState(this.STATE.LOADING),this._emit(h.LOADING)),this._loadingTimeout=setTimeout(function(){this._isSwitchStream&&(this._emit(h.SWITCH_STREAM_FAIL,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"direct",id:this._isSwitchStream,code:r.STREAM.NOT_FOUND,message:"The requested stream can not be found."}),this._isSwitchStream=!1),this._isUpdateSource&&(this._emit(h.UPDATE_SOURCE_FAIL,{source:this.config.source,entry:this._getEntry(),rule:"none",tag:"",count:this._switchCount,type:"update",id:this.isUpdateSource,code:r.STREAM.NOT_FOUND,message:"The requested stream can not be found."}),this._isUpdateSource=!1),this._emitError(r.STREAM.NOT_FOUND,"The requested stream can not be found."),this.pause(this.state)}.bind(this),A)},N._onPlaying=function(){clearTimeout(this._loadingTimeout),clearTimeout(this._bufferTimeout),this.state===this.STATE.LOADING&&(this._startPlayingTimeout&&clearTimeout(this._startPlayingTimeout),this._startPlayingTimeout=setTimeout(function(){clearTimeout(this._startPlayingTimeout),this._startPlayingTimeout=0,this._setState(this.STATE.PLAYING),this._playing=!0,this.setVolume(this._volume),!this._intervalEmitStats&&this._emit(h.PLAY,{stats:{connecting:0,connected:0,firstFragmentReceived:0,firstFrameRendered:0,playable:0,playing:0}}),!this._intervalEmitStats&&this._startIntervals()}.bind(this),1e3))},N._onStartBuffering=function(){this.state<this.STATE.PLAYING||this._isSwitchStream||this._isUpdateSource||(this._setState(this.STATE.BUFFERING),this._startBufferTimeout&&clearTimeout(this._startBufferTimeout),this._startBufferTimeout=setTimeout(function(){clearTimeout(this._startBufferTimeout),this._startBufferTimeout=0,this.state===this.STATE.BUFFERING&&(this._playing=!1,this._emit(h.START_BUFFERING),this._bufferTimeout=setTimeout(function(){this._emitError(r.STREAM.MEDIA_NOT_AVAILABLE,"No media available"),this.pause(this.state)}.bind(this),I))}.bind(this),2e3))},N._onStopBuffering=function(){clearTimeout(this._loadingTimeout),clearTimeout(this._bufferTimeout),this._playing=!0,this._setState(this.STATE.PLAYING),this._emit(h.STOP_BUFFERING)},N._onPause=function(){if(!this._isSwitchStream&&!this._isUpdateSource){clearTimeout(this._loadingTimeout),clearTimeout(this._bufferTimeout),this._playing=!1;var e=this._getPauseReason(this._triggered);y("nanoplayer ("+this._playerDivId+'): trigger pause with reason "'+e+'", state "'+this._getState()+'"',3),this._setState(this.STATE.PAUSED),this._stopIntervals(),this._emit(h.PAUSE,{reason:e})}},N._emitMetaData=function(e,t){if(this._metaDataEnabled){y("nanoplayer ("+this._playerDivId+"): onMetaData",2);try{var n=JSON.stringify(t);y("nanoplayer ("+this._playerDivId+"): handlerName="+e+", metaData="+n,2)}catch(e){}var i={handlerName:e,streamTime:0,message:t};this._emit(h.METADATA,i)}},N._onMetaData=function(e){if(Array.isArray(e)){for(var t={},n=0;n<e.length;n+=1)t[e[n].name]=e[n].value;e=t}var i={haveAudio:!!e.audiocodecid,haveVideo:!!e.videocodecid,audioInfo:null,videoInfo:null};i.haveAudio&&(i.audioInfo={sampleRate:e.audiosamplerate,channels:e.stereo?2:1,bitsPerSample:e.audiosamplesize}),i.haveVideo&&(i.videoInfo={width:e.width,height:e.height,frameRate:e.framerate}),this._onStreamInfo(i),this._emitMetaData("MetaData",e)},N._onCuePoint=function(e){this._emitMetaData("CuePoint",e)},N._onVolumeChange=function(){},N._onResize=function(){if(this._streamInfo&&this._streamInfo.haveVideo){this._setMediaElement();var e=this._streamInfo.videoInfo.width,t=this._streamInfo.videoInfo.height,n=this._mediaElement.GetCurrentSizeOfContainer(),i=n[0]/n[1],r=e/t;i<r?(e=n[0],t=Math.round(e/r)):(t=n[1],e=Math.round(t*r)),this._mediaElement.SetResize("true"),this._mediaElement.SetVideoDisplayResolution(e+","+t),this._mediaElement.SetResize("false"),this._mediaElement.SetOnlyThisResolution(e+","+t),this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(function(){this._resizeTimeout=0,this._mediaElement.SetResize("true"),this._mediaElement.SetVideoDisplayResolution(e+","+t),this._mediaElement.SetResize("false"),this._mediaElement.SetOnlyThisResolution(e+","+t)}.bind(this),300)}},N._onDebug=function(e){var t="string"==typeof e?e:e.message?e.message:e.data.message?e.data.message:"unknown";y("nanoplayer ("+this._playerDivId+"): "+t,2)},N._onFlashReady=function(){this._onDebug("flash ready")},N._onFlashState=function(e,t){if("undefined"!=typeof e){var n="";if("string"==typeof e||e instanceof String)n=e,this._onDebug("onFlashCallState: "+n+" from "+t);else{this._onDebug("onFlashCallState: "+t);for(var i in e)e.hasOwnProperty(i)&&(this._onDebug("onFlashCallState: "+i+" = "+e[i]),"state"!==i&&"code"!==i||(n=e[i]))}n===this.FLASH_STATE.VIDEO_DISPLAY.LOADING||n===this.FLASH_STATE.NET_STREAM.PLAY.RESET||n===this.FLASH_STATE.NET_STREAM.PLAY.UNPUBLISH_NOTIFY||n===this.FLASH_STATE.NET_STREAM.PLAY.PUBLISH_NOTIFY?this._onLoading():n===this.FLASH_STATE.VIDEO_DISPLAY.REWINDING||n===this.FLASH_STATE.VIDEO_DISPLAY.PLAYING||n===this.FLASH_STATE.NET_STREAM.PLAY.START?(this.state===this.STATE.LOADING&&this._onPlaying(),this.state===this.STATE.BUFFERING&&this._onStopBuffering()):n===this.FLASH_STATE.VIDEO_DISPLAY.BUFFERING?this._onStartBuffering():n!==this.FLASH_STATE.VIDEO_DISPLAY.CONNECTION_ERROR&&n!==this.FLASH_STATE.VIDEO_DISPLAY.STOPPED&&n!==this.FLASH_STATE.VIDEO_DISPLAY.DISCONNECTED&&n!==this.FLASH_STATE.NET_STREAM.PLAY.STOP&&n!==this.FLASH_STATE.NET_STREAM.PLAY.STREAM_NOT_FOUND||this._onPause(),"error"===e.level?this._onDebug("onFlashCallState: ERROR - "+n):this._onDebug("onFlashCallState: state="+n)}},N._setName=function(){this._setMediaElement(),this._mediaElement.SetName(this._mediaElementId)},N.STATE=_,N.FLASH_STATE=m,N.PAUSE_REASON=T,window._flashPlayers={},window.onFlashCallExternalApplicationReady=function(){return!0},window.onFlashCallInternalApplicationReady=function(e){window._flashPlayers[e]&&window._flashPlayers[e]._onFlashReady()},window.onFlashCallMyTrace=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onDebug(t)},window.onFlashCallAutoResizeContainer=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onResize(t)},window.onFlashCallVolumeChange=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onVolumeChange(t)},window.onFlashCallMetaDataReceived=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onMetaData(t)},window.onFlashCallCuePointReceived=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onCuePoint(t)},window.onFlashCallState=function(e,t,n){window._flashPlayers[e]&&window._flashPlayers[e]._onFlashState(t,n)},g}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({EMBED_PLAYER:'Could not embed player. Please check the path to the player in the config param "playback.flashplayer" or copy to base directory.'})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){/**
	     * @license
	     * SWFObject v2.3.20130521 <http://github.com/swfobject/swfobject> is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
	     */
var e=function(){function t(){if(!K&&document.getElementsByTagName("body")[0]){try{var e,t=_("span");t.style.display="none",e=k.getElementsByTagName("body")[0].appendChild(t),e.parentNode.removeChild(e),e=null,t=null}catch(e){return}K=!0;for(var n=H.length,i=0;i<n;i++)H[i]()}}function n(e){K?e():H[H.length]=e}function i(e){if(typeof F.addEventListener!==U)F.addEventListener("load",e,!1);else if(typeof k.addEventListener!==U)k.addEventListener("load",e,!1);else if(typeof F.attachEvent!==U)S(F,"onload",e);else if("function"==typeof F.onload){var t=F.onload;F.onload=function(){t(),e()}}else F.onload=e}function r(){var e=Y.length;if(e>0)for(var t=0;t<e;t++){var n=Y[t].id,i=Y[t].callbackFn,r={success:!1,id:n};if(X.pv[0]>0){var d=m(n);if(d)if(!g(Y[t].swfVersion)||X.wk&&X.wk<312)if(Y[t].expressInstall&&o()){var c={};c.data=Y[t].expressInstall,c.width=d.getAttribute("width")||"0",c.height=d.getAttribute("height")||"0",d.getAttribute("class")&&(c.styleclass=d.getAttribute("class")),d.getAttribute("align")&&(c.align=d.getAttribute("align"));for(var l={},f=d.getElementsByTagName("param"),E=f.length,p=0;p<E;p++)"movie"!==f[p].getAttribute("name").toLowerCase()&&(l[f[p].getAttribute("name")]=f[p].getAttribute("value"));s(c,l,n,i)}else u(d),i&&i(r);else A(n,!0),i&&(r.success=!0,r.ref=a(n),r.id=n,i(r))}else if(A(n,!0),i){var h=a(n);h&&typeof h.SetVariable!==U&&(r.success=!0,r.ref=h,r.id=h.id),i(r)}}}function a(e){var t=null,n=m(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=typeof n.SetVariable!==U?n:n.getElementsByTagName(P)[0]||n),t}function o(){return!j&&g("6.0.65")&&(X.win||X.mac)&&!(X.wk&&X.wk<312)}function s(e,t,n,i){var r=m(n);if(n=h(n),j=!0,R=i||null,O={success:!1,id:n},r){"OBJECT"===r.nodeName.toUpperCase()?(b=d(r),I=null):(b=r,I=n),e.id=M,(typeof e.width===U||!/%$/.test(e.width)&&T(e.width)<310)&&(e.width="310"),(typeof e.height===U||!/%$/.test(e.height)&&T(e.height)<137)&&(e.height="137");var a=X.ie?"ActiveX":"PlugIn",o="MMredirectURL="+encodeURIComponent(F.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+a+"&MMdoctitle="+encodeURIComponent(k.title.slice(0,47)+" - Flash Player Installation");if(typeof t.flashvars!==U?t.flashvars+="&"+o:t.flashvars=o,X.ie&&4!==r.readyState){var s=_("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",E(r)}l(e,t,n)}}function u(e){if(X.ie&&4!==e.readyState){e.style.display="none";var t=_("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),E(e)}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=_("div");if(X.win&&X.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(P)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,a=0;a<r;a++)1===i[a].nodeType&&"PARAM"===i[a].nodeName||8===i[a].nodeType||t.appendChild(i[a].cloneNode(!0))}}return t}function c(e,t){var n=_("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",n.firstChild}function l(e,t,n){var i,r=m(n);if(n=h(n),X.wk&&X.wk<312)return i;if(r){var a,o,s,u=_(X.ie?"div":P);typeof e.id===U&&(e.id=n);for(s in t)t.hasOwnProperty(s)&&"movie"!==s.toLowerCase()&&f(u,s,t[s]);X.ie&&(u=c(e.data,u.innerHTML));for(a in e)e.hasOwnProperty(a)&&(o=a.toLowerCase(),"styleclass"===o?u.setAttribute("class",e[a]):"classid"!==o&&"data"!==o&&u.setAttribute(a,e[a]));X.ie?V[V.length]=e.id:(u.setAttribute("type",L),u.setAttribute("data",e.data)),r.parentNode.replaceChild(u,r),i=u}return i}function f(e,t,n){var i=_("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function E(e){var t=m(e);t&&"OBJECT"===t.nodeName.toUpperCase()&&(X.ie?(t.style.display="none",function e(){if(4===t.readyState){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}else setTimeout(e,10)}()):t.parentNode.removeChild(t))}function p(e){return e&&e.nodeType&&1===e.nodeType}function h(e){return p(e)?e.id:e}function m(e){if(p(e))return e;var t=null;try{t=k.getElementById(e)}catch(e){}return t}function _(e){return k.createElement(e)}function T(e){return parseInt(e,10)}function S(e,t,n){e.attachEvent(t,n),W[W.length]=[e,t,n]}function g(e){e+="";var t=X.pv,n=e.split(".");return n[0]=T(n[0]),n[1]=T(n[1])||0,n[2]=T(n[2])||0,!!(t[0]>n[0]||t[0]===n[0]&&t[1]>n[1]||t[0]===n[0]&&t[1]===n[1]&&t[2]>=n[2])}function y(e,t,n,i){var r=k.getElementsByTagName("head")[0];if(r){var a="string"==typeof n?n:"screen";if(i&&(N=null,C=null),!N||C!==a){var o=_("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),N=r.appendChild(o),X.ie&&typeof k.styleSheets!==U&&k.styleSheets.length>0&&(N=k.styleSheets[k.styleSheets.length-1]),C=a}N&&(typeof N.addRule!==U?N.addRule(e,t):typeof k.createTextNode!==U&&N.appendChild(k.createTextNode(e+" {"+t+"}")))}}function A(e,t){if(q){var n=t?"visible":"hidden",i=m(e);K&&i?i.style.visibility=n:"string"==typeof e&&y("#"+e,"visibility:"+n)}}function v(e){var t=/[\\"<>.;]/,n=null!==t.exec(e);return n&&typeof encodeURIComponent!==U?encodeURIComponent(e):e}var b,I,R,O,N,C,U="undefined",P="object",w="Shockwave Flash",D="ShockwaveFlash.ShockwaveFlash",L="application/x-shockwave-flash",M="SWFObjectExprInst",x="onreadystatechange",F=window,k=document,G=navigator,B=!1,H=[],Y=[],V=[],W=[],K=!1,j=!1,q=!0,z=!1,X=function(){var e=typeof k.getElementById!==U&&typeof k.getElementsByTagName!==U&&typeof k.createElement!==U,t=G.userAgent.toLowerCase(),n=G.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(t),r=n?/mac/.test(n):/mac/.test(t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o="Microsoft Internet Explorer"===G.appName,s=[0,0,0],u=null;if(typeof G.plugins!==U&&typeof G.plugins[w]===P)u=G.plugins[w].description,u&&typeof G.mimeTypes!==U&&G.mimeTypes[L]&&G.mimeTypes[L].enabledPlugin&&(B=!0,o=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=T(u.replace(/^(.*)\..*$/,"$1")),s[1]=T(u.replace(/^.*\.(.*)\s.*$/,"$1")),s[2]=/[a-zA-Z]/.test(u)?T(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof F.ActiveXObject!==U)try{var d=new ActiveXObject(D);d&&(u=d.GetVariable("$version"),u&&(o=!0,u=u.split(" ")[1].split(","),s=[T(u[0]),T(u[1]),T(u[2])]))}catch(e){}return{w3:e,pv:s,wk:a,ie:o,win:i,mac:r}}();(function(){X.w3&&((typeof k.readyState!==U&&("complete"===k.readyState||"interactive"===k.readyState)||typeof k.readyState===U&&(k.getElementsByTagName("body")[0]||k.body))&&t(),K||(typeof k.addEventListener!==U&&k.addEventListener("DOMContentLoaded",t,!1),X.ie&&(k.attachEvent(x,function e(){"complete"===k.readyState&&(k.detachEvent(x,e),t())}),F==top&&!function e(){if(!K){try{k.documentElement.doScroll("left")}catch(t){return void setTimeout(e,0)}t()}}()),X.wk&&!function e(){if(!K)return/loaded|complete/.test(k.readyState)?void t():void setTimeout(e,0)}()))})();return H[0]=function(){B&&r()},function(){X.ie&&window.attachEvent("onunload",function(){for(var t=W.length,n=0;n<t;n++)W[n][0].detachEvent(W[n][1],W[n][2]);for(var i=V.length,r=0;r<i;r++)E(V[r]);for(var a in X)X[a]=null;X=null;for(var o in e)e[o]=null;e=null})}(),{registerObject:function(e,t,n,i){if(X.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,Y[Y.length]=r,A(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){if(X.w3)return a(e)},embedSWF:function(e,t,i,r,a,u,d,c,f,E){var p=h(t),m={success:!1,id:p};X.w3&&!(X.wk&&X.wk<312)&&e&&t&&i&&r&&a?(A(p,!1),n(function(){i+="",r+="";var n={};if(f&&typeof f===P)for(var h in f)n[h]=f[h];n.data=e,n.width=i,n.height=r;var _={};if(c&&typeof c===P)for(var T in c)_[T]=c[T];if(d&&typeof d===P)for(var S in d)if(d.hasOwnProperty(S)){var y=z?encodeURIComponent(S):S,v=z?encodeURIComponent(d[S]):d[S];typeof _.flashvars!==U?_.flashvars+="&"+y+"="+v:_.flashvars=y+"="+v}if(g(a)){var b=l(n,_,t);n.id===p&&A(p,!0),m.success=!0,m.ref=b,m.id=b.id}else{if(u&&o())return n.data=u,void s(n,_,t,E);A(p,!0)}E&&E(m)})):E&&E(m)},switchOffAutoHideShow:function(){q=!1},enableUriEncoding:function(e){z=typeof e===U||e},ua:X,getFlashPlayerVersion:function(){return{major:X.pv[0],minor:X.pv[1],release:X.pv[2]}},hasFlashPlayerVersion:g,createSWF:function(e,t,n){return X.w3?l(e,t,n):void 0},showExpressInstall:function(e,t,n,i){X.w3&&o()&&s(e,t,n,i)},removeSWF:function(e){X.w3&&E(e)},createCSS:function(e,t,n,i){X.w3&&y(e,t,n,i)},addDomLoadEvent:n,addLoadEvent:i,getQueryParamValue:function(e){var t=k.location.search||k.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),!e)return v(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))===e)return v(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(j){var e=m(M);e&&b&&(e.parentNode.replaceChild(b,e),I&&(A(I,!0),X.ie&&(b.style.display="block")),R&&R(O)),j=!1}},version:"2.3"}}();return e}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({VIDEO_DISPLAY:{CONNECTION_ERROR:"connectionError",LOADING:"loading",PLAYING:"playing",REWINDING:"rewinding",BUFFERING:"buffering",STOPPED:"stopped",DISCONNECTED:"disconnected"},NET_STREAM:{PLAY:{RESET:"NetStream.Play.Reset",UNPUBLISH_NOTIFY:"NetStream.Play.UnpublishNotify",PUBLISH_NOTIFY:"NetStream.Play.PublishNotify",PLAY:"NetStream.Play.Start",STOP:"NetStream.Play.Stop",STREAM_NOT_FOUND:"NetStream.Play.StreamNotFound"}}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return{FORCE_NOT_SUPPORTED:'The forced tech "$tech$" is not supported by your browser.',SOURCE_NOT_SUPPORTED:"The players source configuration is malformed or missing, please check documentation for more information or contact us.",CLIENT_NOT_SUPPORTED:"This browser does not fully support HTML5 and H5Live.\t            Supported are: Chrome >=54 (Windows, MacOSX, Android), Firefox >=48 (Windows, MacOSX, Android), Microsoft Edge (Windows), Microsoft Internet Explorer 11 (at least Windows 8), Safari (MacOSX & at least iOS 10)."}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){}function t(e,t){return function(){e.apply(t,arguments)}}function n(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function i(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void n._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?r:a)(t.promise,e._value);var i;try{i=n(e._value)}catch(e){return void a(t.promise,e)}r(t.promise,i)}))}function r(e,i){try{if(i===e)throw new TypeError("A promise cannot be resolved with itself.");if(i&&("object"==typeof i||"function"==typeof i)){var r=i.then;if(i instanceof n)return e._state=3,e._value=i,void o(e);if("function"==typeof r)return void u(t(r,i),e)}e._state=1,e._value=i,o(e)}catch(t){a(e,t)}}function a(e,t){e._state=2,e._value=t,o(e)}function o(e){2===e._state&&0===e._deferreds.length&&n._immediateFn(function(){e._handled||n._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)i(e,e._deferreds[t]);e._deferreds=null}function s(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function u(e,t){var n=!1;try{e(function(e){n||(n=!0,r(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}var d=setTimeout;return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(t,n){var r=new this.constructor(e);return i(this,new s(t,n,r)),r},n.all=function(e){var t=Array.prototype.slice.call(e);return new n(function(e,n){function i(a,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,function(e){i(a,e)},n)}t[a]=o,0===--r&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var r=t.length,a=0;a<t.length;a++)i(a,t[a])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)})},n._immediateFn="function"==typeof window.setImmediate&&function(e){window.setImmediate(e)}||function(e){d(e,0)},n._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},n._setImmediateFn=function(e){n._immediateFn=e},n._setUnhandledRejectionFn=function(e){n._unhandledRejectionFn=e},void 0===window.Promise&&(window.Promise=n),window.Promise}.apply(t,i),!(void 0!==r&&(e.exports=r))}]);